<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>系统的黑一下锤子</title>
      <link href="/2018/05/16/wo-chui-you-cheng-le/"/>
      <url>/2018/05/16/wo-chui-you-cheng-le/</url>
      <content type="html"><![CDATA[<p>罗老师，你负责认真，我们帮你赢。所以我在百忙之中帮您写了个软文，以期有更多的锤友们帮你赢。</p><a id="more"></a><p>经历了罗老师长达 2 个月微博上的宣传，终于我锤又要成了。为了系统性的黑锤子，我可是做足了功课。在所搜集资料的时候，我突然发自内心的想对罗老师说一声佩服:</p><blockquote><p>您跟您的团队明明几乎什么新鲜东西都没有，却还能时不时的开个发布会让锤粉们, 不，现在叫锤友们 high 一下，真的很厉害。</p></blockquote><h3 id="首先发布会还是一贯的套路"><a href="# 首先发布会还是一贯的套路" class="headerlink" title="首先发布会还是一贯的套路:"></a>首先发布会还是一贯的套路:</h3><p>如下图:</p><p><img src="https://i.imgur.com/YgwLC8o.jpg" alt="https://i.imgur.com/YgwLC8o.jpg"></p><p>(看不到图需翻墙)</p><h3 id="罗老师嘲讽一下友商"><a href="# 罗老师嘲讽一下友商" class="headerlink" title="罗老师嘲讽一下友商:"></a>罗老师嘲讽一下友商:</h3><blockquote><p>注意，为避免误会，下面的意思纯属我从发布会理解过来的，并非罗老师原话:</p></blockquote><ol><li>来，看看跑分，你小米，黑鲨手机，跑分常温下根本没你们说的那么高，你看，不光我测试了，有个媒体也测试了。不管不管，我最高，我定标准我来测。</li><li>跑分算什么啊，我们锤子不在乎跑分，无聊。我们不喜欢堆砌硬件（是吧，说你呢一加、小米）</li></ol><h3 id="嘲讽一下中国的开源"><a href="# 嘲讽一下中国的开源" class="headerlink" title="嘲讽一下中国的开源"></a>嘲讽一下中国的开源 </h3><blockquote><p> 注意，为避免误会，下面的意思纯属我从发布会理解过来的，并非罗老师原话:</p></blockquote><ol><li>我们的 OneStep 开源了吧，你看，我们为开源世界做出了贡献，其他厂商们，你们直接用就行了哦。</li><li>为啥不用？ 是因为用了要遵守我们的开源协议，给我们 credit 是吧? 垃圾 </li></ol><h3 id="我锤的开源"><a href="# 我锤的开源" class="headerlink" title="我锤的开源"></a> 我锤的开源 </h3><p> 真实的情况呢:</p><p>如下图:</p><p><img src="https://i.imgur.com/oxWp0jg.png" alt="https://i.imgur.com/oxWp0jg.png"></p><p>而且，锤子引以为傲的开源事业, 这是 ROM 开发者对您的评价 </p><blockquote><p> 较真的系统不更新安卓版本，不过 GMS 认证，不遵守开源协议，不做安全启动…</p></blockquote><p>听说您最近开源代码了， BootLoader 因为一些 bug 第三方也能解开了，第三方 ROM 终于能够适配了，可喜可贺。</p><p>有位锤友因为相信了您可以解锁 BootLoader , 第三方预装应用全部可以删除 ，跟你法庭上对峙，听说您还揪着不放:</p><p><img src="https://i.imgur.com/2kSQCwX.jpg" alt="https://i.imgur.com/2kSQCwX.jpg"></p><p>问题是，您干吗吹着牛逼呢？换句话说，您做婊子为何还要里个牌坊呢？</p><h3 id="TNT- 真他妈的革命性"><a href="#TNT- 真他妈的革命性" class="headerlink" title="TNT 真他妈的革命性"></a>TNT 真他妈的革命性 </h3><p> 革命性的创新，老实讲，我本来是没有报什么期待的，但是一看到这个，真的是想送您一首 <a href="http://url.cn/5vYvwT4" target="_blank" rel="noopener">《How Low》</a> (视频版见这里: <a href="https://www.youtube.com/watch?v=ox-lfowevqA" target="_blank" rel="noopener">https://www.youtube.com/watch?v=ox-lfowevqA</a>)</p><p>有个问题我想问您一下，明明就是 Android，为什么还能比 Android 快 30% 呢, 我仔细一想，您的意思难道是跟您之前的锤子搭载的 Android 比？<br><img src="https://i.imgur.com/Lv1mqNF.jpg" alt="https://i.imgur.com/Lv1mqNF.jpg"></p><h4 id="工作站"><a href="# 工作站" class="headerlink" title="工作站"></a>工作站 </h4><p> 请问您是对工作站有什么误解吗? 难道需要您的工作站仅仅是完成 PPT/EXCEL 和 王者荣耀?</p><h4 id="PPT-amp-EXCEl"><a href="#PPT-amp-EXCEl" class="headerlink" title="PPT &amp; EXCEl"></a>PPT &amp; EXCEl</h4><p>我不否认，可能您的所谓的 什么胶囊 一键生成 PPT 可能很好用。</p><p>但是，就您演示的 PPT 和 EXCEL 操作，什么效率提升 300%， 玉龙哥哥，您这是降低工作效率好吗？另外您演示的这些别家不是没有，真的不是没有，不仅有，而且比您这个做得好。只不过人家是为残障人士用的。</p><h4 id="售价"><a href="# 售价" class="headerlink" title="售价"></a>售价 </h4><p> 您这个售价确实不是为了赚钱，您的智商鉴定机虽然涨价了，但是效果应该更强了。</p><h4 id="捐赠 -OpenSSL-、FreeBSD"><a href="# 捐赠 -OpenSSL-、FreeBSD" class="headerlink" title="捐赠 OpenSSL 、FreeBSD"></a>捐赠 OpenSSL 、FreeBSD</h4><p>真的棒，这相声收入不错。</p><p>很感激您对开源事业做出的贡献。</p><h3 id="我为什么讨厌罗老师"><a href="# 我为什么讨厌罗老师" class="headerlink" title="我为什么讨厌罗老师?"></a>我为什么讨厌罗老师?</h3><p>来看一下罗老师是如何来给你下套的:</p><h4 id="英语培训时期"><a href="# 英语培训时期" class="headerlink" title="英语培训时期"></a>英语培训时期 </h4><blockquote><p> 有思想的年轻人在哪里都不太合群……直到他们来到老罗英语培训 </p></blockquote><p> 这句话真的很有煽动性。 仔细一想，如果您去了老罗英语培训，您就属于有思想的那一群啦。 -&gt; （有思想哪有可能那么容易被煽动）</p><h4 id="在网上澄清精日"><a href="# 在网上澄清精日" class="headerlink" title="在网上澄清精日"></a>在网上澄清精日 </h4><p><img src="https://i.imgur.com/VGLL1VE.png" alt="https://i.imgur.com/VGLL1VE.png"></p><blockquote><p> 常常被没有理解能力的人误会，被别有用心的人利用。</p></blockquote><p>如果您不能理解玉龙哥哥，那么要么您是没有理解能力，要么您是别有用心。</p><h4 id="说手机是为你们做的"><a href="# 说手机是为你们做的" class="headerlink" title="说手机是为你们做的"></a>说手机是为你们做的 </h4><blockquote><p> 如果有一天，傻逼都用我们的手机，你要知道，那是给你们做的。</p></blockquote><p>我有个问题了，罗老师，当一个人掏出他的锤子手机的时候，如何判断他是傻逼还是粉丝呢？ 所以它实际上处于一种介于傻逼和粉丝的中间态，对嘛？</p><h4 id="发布会举出小米、黑鲨手机"><a href="# 发布会举出小米、黑鲨手机" class="headerlink" title="发布会举出小米、黑鲨手机"></a>发布会举出小米、黑鲨手机 </h4><blockquote><p> 我们是在室温，不光我们自己，还有其他媒体也测试过。</p></blockquote><p>暗示友商跑分作假，锤子天下第一。</p><h4 id="展示微软蓝屏、苹果五国"><a href="# 展示微软蓝屏、苹果五国" class="headerlink" title="展示微软蓝屏、苹果五国"></a>展示微软蓝屏、苹果五国 </h4><blockquote><p> 别人都不敢展示，但是我们敢。</p></blockquote><p>一口老血喷出来，别人做的系统，你做的什么？ ROM 开发就叫系统了？ 而且您这套路，碰瓷大公司，然后想让观众想到您跟微软苹果是一个阵线上的嘛？</p><h4 id="待补充"><a href="# 待补充" class="headerlink" title="待补充.."></a>待补充..</h4><p>我会慢慢补充的，罗老师是打心眼里坏。</p><h2 id="最后"><a href="# 最后" class="headerlink" title="最后"></a>最后 </h2><p> 好多人都在讲王自如跟罗老师的争论罗老师赢了，大概忘了辩论的目的是为了锤子的销量了吧。</p><p><a href="https://www.zhihu.com/question/25015684/answer/29832927" target="_blank" rel="noopener">https://www.zhihu.com/question/25015684/answer/29832927</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>Macbook Pro late 2013 使用戴尔 U2518DR</title>
      <link href="/2018/05/11/mac-late-2013-use-dell-2518DR/"/>
      <url>/2018/05/11/mac-late-2013-use-dell-2518DR/</url>
      <content type="html"><![CDATA[<blockquote><p>按照说明书上直接按上去后显示模糊，开始找网上的方案看能否解决问题。</p></blockquote><a id="more"></a><h2 id="关闭系统保护"><a href="# 关闭系统保护" class="headerlink" title="关闭系统保护"></a>关闭系统保护 </h2><p> 开机进入恢复模式 <code>csrutil disable; reboot</code></p><h2 id="生成配置文件"><a href="# 生成配置文件" class="headerlink" title="生成配置文件"></a>生成配置文件 </h2><p> 根据这里的指导生成配置文件并复制到指定文件夹中 </p><p><a href="https://comsysto.github.io/Display-Override-PropertyList-File-Parser-and-Generator-with-HiDPI-Support-For-Scaled-Resolutions/" target="_blank" rel="noopener">Scaled Resolutions for your MacBooks external Monitor | by Comsysto Reply</a></p><p> 附注： 我的配置文件地址 -&gt; <a href="https://www.dropbox.com/s/4ucfat6cwcqmvnk/DisplayProductID-413c.plist?dl=0" target="_blank" rel="noopener">Dropbox - DisplayProductID-413c.plist</a></p><h2 id="安装 -RDM"><a href="# 安装 -RDM" class="headerlink" title="安装 RDM"></a>安装 RDM</h2><p>RDM 可以在这里下载 <a href="http://avi.alkalay.net/software/RDM/" target="_blank" rel="noopener">Index of /software/RDM</a></p><p>另外这是 github 介绍页 <a href="https://github.com/avibrazil/RDM" target="_blank" rel="noopener">GitHub - avibrazil/RDM: Easily set Mac Retina display to higher unsupported resolutions</a></p><p>设置 display 2 为 <code>1920 x 1080</code> 终于完美了！</p><p>放张图吧:</p><p><img src="https://i.imgur.com/tCDNw8f.jpg" alt="https://i.imgur.com/tCDNw8f.jpg"></p>]]></content>
      
      
        <tags>
            
            <tag> mac </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Mac 下 JAVA 8 与 JAVA 9 共存与切换</title>
      <link href="/2018/03/09/add-java8-along-with-java9/"/>
      <url>/2018/03/09/add-java8-along-with-java9/</url>
      <content type="html"><![CDATA[<p>由于系统崩溃，上个星期重新安装了系统之后就安装了 <code>JDK 9</code>， 但由于使用 <code>JDK 9</code> 时， <code>Lombok</code> 会出现一堆 bug，无奈只能再安装 <code>JDK 1.8</code>。</p><a id="more"></a><h2 id="安装"><a href="# 安装" class="headerlink" title="安装"></a>安装 </h2><p> 正常安装 <code>JDK 1.8</code> 和 <code>JDK 9</code> 即可, <code>JAVA 8</code> 对应的就是 <code>JDK 1.8</code>，<code>JAVA 9</code> 对应的 <code>JDK 9</code>。</p><p>安装地址: <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p><h2 id="切换"><a href="# 切换" class="headerlink" title="切换"></a>切换 </h2><p> 安装好之后，可以使用如下命令找到 <code>JAVA 8</code> 和 <code>JAVA 9</code> 的位置。</p><ul><li>JAVA 8</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/libexec/java_home  -v 1.8</span><br></pre></td></tr></table></figure><ul><li>JAVA 9</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/use/libexec/java_home -v 9</span><br></pre></td></tr></table></figure><p>在 .zshrc 或 .bashrc 中，添加如下内容:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置 JDK 8</span></span><br><span class="line"><span class="built_in">export</span> JAVA_8_HOME=`/usr/libexec/java_home -v 1.8`</span><br><span class="line"><span class="comment"># 设置 JDK 9</span></span><br><span class="line"><span class="built_in">export</span> JAVA_9_HOME=`/usr/libexec/java_home -v 9.0`</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认 JDK 8</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=<span class="variable">$JAVA_8_HOME</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 动态切换版本 </span></span><br><span class="line"><span class="built_in">alias</span> jdk8=<span class="string">"export JAVA_HOME=<span class="variable">$JAVA_8_HOME</span>"</span></span><br><span class="line"><span class="built_in">alias</span> jdk9=<span class="string">"export JAVA_HOME=<span class="variable">$JAVA_9_HOME</span>"</span></span><br></pre></td></tr></table></figure><p> 即可，可以直接使用命令 <code>jdk9</code> 切换成 JAVA 9.</p><h2 id="Intellij-Idea- 修改 -JDK"><a href="#Intellij-Idea- 修改 -JDK" class="headerlink" title="Intellij Idea 修改 JDK"></a>Intellij Idea 修改 JDK</h2><p><code>File</code> -&gt; <code>Project Structure</code> -&gt; <code>Project</code> -&gt; <code>Project SDK</code> 中新增 <code>JAVA 8</code> 的 SDK 即可 </p><p> 参考链接: <a href="http://chessman-126-com.iteye.com/blog/2162466" target="_blank" rel="noopener">http://chessman-126-com.iteye.com/blog/2162466</a></p>]]></content>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>介绍一个非常好用的 Javascript 工具 - QuokkaJS</title>
      <link href="/2018/03/06/a-great-javascript-tool-quokkajs/"/>
      <url>/2018/03/06/a-great-javascript-tool-quokkajs/</url>
      <content type="html"><![CDATA[<p>今天介绍一下 <a href="https://quokkajs.com/" target="_blank" rel="noopener">Quokka JS</a>, 我这段时间写 JS 多亏了这个插件。</p><a id="more"></a><h2 id="介绍"><a href="# 介绍" class="headerlink" title="介绍"></a>介绍 </h2><p> 我是在 Youtube 上看 《Fun Fun Function》 的时候发现的这样的一款插件，插件能够实时看到 js 代码中元素的类型以及运行的结果。</p><p>如下图演示的效果 </p><p><img src="https://i.imgur.com/qDied5b.gif" alt="https://i.imgur.com/qDied5b.gif"></p><h2 id="安装"><a href="# 安装" class="headerlink" title="安装"></a> 安装 </h2><p> 可以直接根据官网的教程进行安装，我个人感觉 Visual Studio Code 上的插件比 Intellij idea 上的插件功能多一些。</p><h2 id="使用"><a href="# 使用" class="headerlink" title="使用"></a>使用 </h2><p> 使用方法简单介绍下:</p><blockquote><ol><li>安装好 Visual Studio Code 之后，可以新建一个文件，然后 <code>CMD +SHIFT + P</code> -&gt; <code>Start On Current File</code></li></ol></blockquote><p><img src="https://i.imgur.com/cLLJvpA.png" alt="https://i.imgur.com/cLLJvpA.png"></p><blockquote><ol start="2"><li>然后就可以进行编程了。</li></ol></blockquote><p>简单做了一个演示的小视频</p><p><iframe src="https://player.vimeo.com/video/258810119" width="640" height="400" frameborder="0" webkitallowfullscreen=""mozallowfullscreen="" allowfullscreen></iframe></p><p><a href="https://vimeo.com/258810119" target="_blank" rel="noopener">A demo on how to use quokkajs</a> from <a href="https://vimeo.com/user64572850" target="_blank" rel="noopener">Alex Zhao</a> on <a href="https://vimeo.com" target="_blank" rel="noopener">Vimeo</a>.</p>]]></content>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> tools </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>AWS Batch 介绍与实践</title>
      <link href="/2018/01/21/aws-batch-and-some-others/"/>
      <url>/2018/01/21/aws-batch-and-some-others/</url>
      <content type="html"><![CDATA[<p>最近，我们在一个项目中使用到了 AWS Batch，特通过这篇博客来记录一下。</p><a id="more"></a><h2 id="什么是 -Batch"><a href="# 什么是 -Batch" class="headerlink" title="什么是 Batch ?"></a>什么是 Batch ?</h2><p>官方介绍:</p><blockquote><p>AWS Batch 让开发人员、科学家和工程师能够轻松高效地在 AWS 上运行成千上万项批处理计算任务。AWS Batch 可根据提交的批处理任务的数量和特定资源要求，动态预置计算资源 (CPU 或 内存优化型实例) 的最佳数量和类型。借助 AWS Batch，您无需安装和管理运行您的任务所使用的批处理计算软件或服务器群集，从而使您能够专注于分析结果和解决问题。AWS Batch 可以跨多种 AWS 计算服务和功能 (如 Amazon EC2 和竞价型实例) 计划、安排和执行您的批处理计算工作负载。</p></blockquote><p>简单来说，Batch 是可以预定义执行任务所需的计算机资源，然后在任务触发时能够自动创建对应的实例。</p><h2 id="Batch- 好处"><a href="#Batch- 好处" class="headerlink" title="Batch 好处"></a>Batch 好处 </h2><p> 据官网的描述,batch 有如下的优势:</p><ul><li><p>完全托管 </p><p> 借助 AWS Batch，您无需运行第三方商业或开源批处理解决方案，也无需安装或管理批处理软件或服务器。AWS Batch 可为您管理所有基础设施，从而避免了预置、管理、监控和扩展您的批处理计算任务所带来的复杂性。</p></li><li><p>与 AWS 集成 </p><p>AWS Batch 已与 AWS 平台进行本地集成，让您能够利用 AWS 的扩展、联网和访问管理功能。这便于您轻松运行能够安全地从 AWS 数据存储 (如 Amazon S3 和 Amazon DynamoDB) 中检索数据并向其中写入数据的任务。</p></li><li><p> 成本优化的资源预置 </p><p>AWS Batch 可根据所提交的批处理任务的数量和资源要求预置计算资源并优化任务分配。AWS Batch 能够将计算资源动态扩展至运行您的批处理任务所需的任何数量，从而使您不必受固定容量群集的限制。此外，AWS Batch 还可代表您针对竞价型实例动态出价，从而进一步降低运行您的批处理任务而产生的费用。</p></li></ul><h2 id="典型的应用场景"><a href="# 典型的应用场景" class="headerlink" title="典型的应用场景"></a> 典型的应用场景 </h2><h3 id="金融服务 -–- 交易后分析"><a href="# 金融服务 -–- 交易后分析" class="headerlink" title="金融服务 – 交易后分析"></a> 金融服务 – 交易后分析 </h3><p> 自动分析每天的交易费用、执行报告和市场绩效。</p><p><img src="http://harchiko.qiniudn.com/Dilithium_flowchart%20diagrams_v3_kw-02.322877d73eda8ed71a44db216a1d195550befac0" alt="http://harchiko.qiniudn.com/Dilithium_flowchart%20diagrams_v3_kw-02.322877d73eda8ed71a44db216a1d195550befac0"></p><h3 id="数字媒体：视觉效果呈现"><a href="# 数字媒体：视觉效果呈现" class="headerlink" title="数字媒体：视觉效果呈现"></a>数字媒体：视觉效果呈现 </h3><p> 自动处理内容呈现工作负载，并通过执行依赖关系或资源排程降低人为干预的必要性。</p><p><img src="http://harchiko.qiniudn.com/Dilithium-Diagrams_Visual-Effects-Rendering.ad9c0479c3772c67953e96ef8ae76a5095373d81" alt="http://harchiko.qiniudn.com/Dilithium-Diagrams_Visual-Effects-Rendering.ad9c0479c3772c67953e96ef8ae76a5095373d81"></p><h2 id="如何使用 -Batch"><a href="# 如何使用 -Batch" class="headerlink" title="如何使用 Batch"></a>如何使用 Batch</h2><p>下面以我们实际的应用场景来说明如何使用 Batch.</p><p>我们的场景类似上面的金融服务交易后分析:</p><p>1. 一个随时更新的 xml 文件。</p><ol start="2"><li>需要每天定时检查更新，发现 xml 更新后需要更新对应的文件到相关的 S3 中。</li><li>更新完相关的文件之后，需要启动另一分析程序，分析更新后的 xml 文件，将相关的内容上传到另外的云服务中。</li></ol><p>所以目前的结构是这样的:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+-----------+    +------+   +-----+    +---+    +------+    +-----+</span><br><span class="line">|cloud watch+--&gt; |lambda+--&gt;+batch| +-&gt;+SNS| +&gt; |lambda| +-&gt;+batch|</span><br><span class="line">+-----------+    +------+   +-----+    +---+    +------+    +-----+</span><br></pre></td></tr></table></figure><p>cloud watch 用来做定时任务，定时通过 Lambda 触发相关的 Batch， batch 发现 xml 更新之后会发送通知到 SNS, 由 SNS 来触发 lambda, 然后由 lambda 启用 Batch 。</p><h3 id="Lambda-Function"><a href="#Lambda-Function" class="headerlink" title="Lambda Function"></a>Lambda Function</h3><p>可以看到 lambda 在我们整个系统中起着很重要的作用，用来接收 cloud watch 的定时任务，用来接收 SNS 传递过来的信息。</p><ul><li>第一个 Lambda 我们需要接收来自 Cloud Watch 的信息，然后通过 Cloud Watch 的信息来启动相关的 Batch Job。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> boto3</span><br><span class="line"></span><br><span class="line">print(<span class="string">'Loading function'</span>)</span><br><span class="line">batch = boto3.client(<span class="string">'batch'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lambda_handler</span><span class="params">(event, context)</span>:</span></span><br><span class="line">    <span class="comment"># Log the received event</span></span><br><span class="line">    print(<span class="string">"Received event:"</span> + json.dumps(event, indent=<span class="number">2</span>))</span><br><span class="line">    <span class="comment"># Get parameters for the SubmitJob call</span></span><br><span class="line">    <span class="comment"># http://docs.aws.amazon.com/batch/latest/APIReference/API_SubmitJob.html</span></span><br><span class="line">    jobName = event[<span class="string">'jobName'</span>]</span><br><span class="line">    jobQueue = event[<span class="string">'jobQueue'</span>]</span><br><span class="line">    jobDefinition = event[<span class="string">'jobDefinition'</span>]</span><br><span class="line">    <span class="comment"># containerOverrides and parameters are optional</span></span><br><span class="line">    <span class="keyword">if</span> event.get(<span class="string">'containerOverrides'</span>):</span><br><span class="line">        containerOverrides = event[<span class="string">'containerOverrides'</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        containerOverrides = &#123;&#125;</span><br><span class="line">    <span class="keyword">if</span> event.get(<span class="string">'parameters'</span>):</span><br><span class="line">        parameters = event[<span class="string">'parameters'</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        parameters = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># Submit a Batch Job</span></span><br><span class="line">        response = batch.submit_job(jobQueue=jobQueue, jobName=jobName, jobDefinition=jobDefinition,</span><br><span class="line">                                    containerOverrides=containerOverrides, parameters=parameters)</span><br><span class="line">        <span class="comment"># Log response from AWS Batch</span></span><br><span class="line">        print(<span class="string">"Response:"</span> + json.dumps(response, indent=<span class="number">2</span>))</span><br><span class="line">        <span class="comment"># Return the jobId</span></span><br><span class="line">        jobId = response[<span class="string">'jobId'</span>]</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">'jobId'</span>: jobId</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        print(e)</span><br><span class="line">        message = <span class="string">'Error submitting Batch Job'</span></span><br><span class="line">        print(message)</span><br><span class="line">        <span class="keyword">raise</span> Exception(message)</span><br></pre></td></tr></table></figure><p>我们需要由 Cloud Watch 传递相关的参数启动相关的 Batch。</p><ul><li>第二个 Lambda 见 <a href="#SNS">SNS</a> 部分。</li></ul><h3 id="Batch"><a href="#Batch" class="headerlink" title="Batch"></a>Batch</h3><p>在 Batch 启动镜像之前，我们需要先给机器配置做一个预定义，AWS 规定是必须有 jobDefinition ， 但是可以通过参数来覆盖一些 jobDefinition 的定义。</p><p><img src="http://harchiko.qiniudn.com/Screen%20Shot%202018-01-22%20at%209.54.07%20AM.png" alt="http://harchiko.qiniudn.com/Screen%20Shot%202018-01-22%20at%209.54.07%20AM.png"></p><p>点击 Create ，即可创建相关的 Batch definition，其中的 image 需要填入相关的 docker 镜像。</p><p>这里可以预先定义包括环境变量，运行环境，机器配置等一系列的东西。</p><p>配置完成之后可以现在 jobs 中测试一下 job 能否正常运行。</p><h3 id="cloud-watch"><a href="#cloud-watch" class="headerlink" title="cloud watch"></a>cloud watch</h3><p>1. 点击 cloud watch, 在其中选择 rules。</p><p><img src="http://harchiko.qiniudn.com/cloud-watch1.png" alt="http://harchiko.qiniudn.com/cloud-watch1.png"></p><ol start="2"><li>点击 create rules， 创建定时任务，这里我们需要将相关的参数传到 lambda 中。</li></ol><p>值得注意的是，cron 可能与 linux 下有所不同，参考: <a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/ScheduledEvents.html#CronExpressions" target="_blank" rel="noopener">https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/ScheduledEvents.html#CronExpressions</a>。</p><p>在右边，我们选择 add target, lambda function。选择我们之前的 Lambda，选择 Configure input 下的 Constant，填入相关参数 </p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  "jobName": "Lambda-Broadbean", // 随便写，job 的名字</span><br><span class="line">  "jobQueue": "feeds", // 注意跟 Batch 中的 Queue 对应</span><br><span class="line">  "jobDefinition": "feedstream-Broadbean" // 上面创建的 feedstream 的名字</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> 这样，一个能够定时触发的 Batch 就完成了，也就是前几个流程。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+-----------+    +------+   +-----+ </span><br><span class="line">|cloud watch+--&gt; |lambda+--&gt;+batch|</span><br><span class="line">+-----------+    +------+   +-----+</span><br></pre></td></tr></table></figure><h3 id="SNS"><a href="#SNS" class="headerlink" title="SNS"></a>SNS</h3><p>我们需要通过 SNS 来传递信息到 Lambda 。</p><p>我们需要看一下 SNS 的消息格式 (删减了一些内容):</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"Records"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"EventVersion"</span>: <span class="string">"1.0"</span>,</span><br><span class="line">      <span class="attr">"EventSubscriptionArn"</span>: <span class="string">"arn:awe-4689-b71c-43657a0ce152"</span>,</span><br><span class="line">      <span class="attr">"EventSource"</span>: <span class="string">"aws:sns"</span>,</span><br><span class="line">      <span class="attr">"Sns"</span>: &#123;</span><br><span class="line">        <span class="attr">"SignatureVersion"</span>: <span class="string">"1"</span>,</span><br><span class="line">        <span class="attr">"Timestamp"</span>: <span class="string">"2018-01-20T04:06:35.010Z"</span>,</span><br><span class="line">        <span class="attr">"Signature"</span>: <span class="string">"i/FC0Z3XT5M4jhru0wP65dD4vaCDYwczszj8V+aCCJX7SCbY1A+X7FjdrSWDeEFMaCqQhg4Wq/ch204kMHg47k4NCQ00cLJmBNc9XnrLiQMuAv1pcSdYu3uWikTlJ8E95K7h6Y/kq2/Tq1f+ELu6r5jEMV3/pKxSaRrdXmTZOZzjQDJKTT1fGNWIgRFOA/Ey+gcaZ8Fg=="</span>,</span><br><span class="line">        <span class="attr">"SigningCertUrl"</span>: <span class="string">"https://sn1.pem"</span>,</span><br><span class="line">        <span class="attr">"MessageId"</span>: <span class="string">"28dcb39b-12da-551856c"</span>,</span><br><span class="line">        <span class="attr">"Message"</span>: <span class="string">"&#123;\"type\":\"lovelive\",\"jobXmlTag\":\"job\",\"gzipped\":true,\"emptyCDATA\":false&#125;&#125;"</span>,</span><br><span class="line">        <span class="attr">"MessageAttributes"</span>: &#123;&#125;,</span><br><span class="line">        <span class="attr">"Type"</span>: <span class="string">"Notification"</span>,</span><br><span class="line">        <span class="attr">"UnsubscribeUrl"</span>: <span class="string">"https://sns.us-eace152"</span>,</span><br><span class="line">        <span class="attr">"TopicArn"</span>: <span class="string">"arn:aws:sns:us-east-1:162141517946:start_feed_consumer"</span>,</span><br><span class="line">        <span class="attr">"Subject"</span>: <span class="literal">null</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> 可以看到相关的 Message 内容都在 Records[0] -&gt; Message 下, 在 Lambda 中只需要 <code>event[&#39;Records&#39;][0][&#39;Sns&#39;][&#39;Message&#39;]</code> 即可获取相关的 Message 信息。然后通过解析此信息来启动 Batch。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> boto3</span><br><span class="line"></span><br><span class="line">print(<span class="string">'Loading function'</span>)</span><br><span class="line"></span><br><span class="line">batch = boto3.client(<span class="string">'batch'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lambda_handler</span><span class="params">(event, context)</span>:</span></span><br><span class="line">    <span class="comment"># Log the received event.</span></span><br><span class="line">    print(<span class="string">"Received event:"</span> + json.dumps(event, indent=<span class="number">2</span>))</span><br><span class="line">    download_message = event[<span class="string">'Records'</span>][<span class="number">0</span>][<span class="string">'Sns'</span>][<span class="string">'Message'</span>]</span><br><span class="line">    <span class="comment"># Get parameters for the SubmitJob call</span></span><br><span class="line">    <span class="comment"># http://docs.aws.amazon.com/batch/latest/APIReference/API_SubmitJob.html</span></span><br><span class="line">    jobName = <span class="string">"lambda-feed-consumer"</span></span><br><span class="line">    jobQueue = <span class="string">"feeds"</span></span><br><span class="line">    jobDefinition = <span class="string">"FeedConsumer"</span></span><br><span class="line">    containerOverrides = &#123;</span><br><span class="line">        <span class="string">'environment'</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">'name'</span>: <span class="string">'DOWNLOAD_MESSAGE'</span>,</span><br><span class="line">                <span class="string">'value'</span>: download_message</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">'name'</span>: <span class="string">'PARALLELISM'</span>,</span><br><span class="line">                <span class="string">'value'</span>: <span class="number">15</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># Submit a Batch Job</span></span><br><span class="line">        response = batch.submit_job(jobQueue=jobQueue, jobName=jobName, jobDefinition=jobDefinition,</span><br><span class="line">                                    containerOverrides=containerOverrides)</span><br><span class="line">        <span class="comment"># Log response from AWS Batch</span></span><br><span class="line">        print(<span class="string">"Response:"</span> + json.dumps(response, indent=<span class="number">2</span>))</span><br><span class="line">        <span class="comment"># Return the jobId</span></span><br><span class="line">        jobId = response[<span class="string">'jobId'</span>]</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">'jobId'</span>: jobId</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        print(e)</span><br><span class="line">        message = <span class="string">'Error submitting Batch Job'</span></span><br><span class="line">        print(message)</span><br><span class="line">        <span class="keyword">raise</span> Exception(message)</span><br></pre></td></tr></table></figure><p>这里的代码相对来说比较简单，这里其实可以直接调用上一个 Lambda 来启用 Batch。</p><p>至此，我们整个流程就完成了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+-----------+    +------+   +-----+    +---+    +------+    +-----+</span><br><span class="line">|cloud watch+--&gt; |lambda+--&gt;+batch| +-&gt;+SNS| +&gt; |lambda| +-&gt;+batch|</span><br><span class="line">+-----------+    +------+   +-----+    +---+    +------+    +-----+</span><br></pre></td></tr></table></figure><p>Q&amp;A</p><ol><li>为什么不使用 <code>Job depends on</code> 参数启用 job 呢?</li></ol><p>Batch 在启用 job 的时候有一个参数是 <code>Job depends on</code>, 如下图 <br><img src="http://harchiko.qiniudn.com/batch-job.png" alt="http://harchiko.qiniudn.com/batch-job.png"></p><p> 根据这里的文档: <a href="https://docs.aws.amazon.com/batch/latest/userguide/submit_job.html" target="_blank" rel="noopener">https://docs.aws.amazon.com/batch/latest/userguide/submit_job.html</a></p><p><code>Job depends on</code> 的意思是在在其他的 job 结束之后，此 job 才能运行，我们这里通过在每一个项目结束之后，使用 SNS 来启动, 这里就不需要此参数了。</p><ol start="2"><li>为什么不直接使用 Batch 的定时，而直接使用 Cloud Watch ?</li></ol><p>一开始我们也是想使用 Batch 自己的定时任务，但是官方提供的文档 <a href="https://docs.aws.amazon.com/batch/latest/userguide/job_scheduling.html" target="_blank" rel="noopener">https://docs.aws.amazon.com/batch/latest/userguide/job_scheduling.html</a> 中异常简单，并不了解如何来使用，咨询对 <code>AWS</code> 比较熟悉大牛之后，我们采用了 cloud watch 发送 event 到 lambda，然后使用 lambda 来启用 batch 的方法。</p><ol start="3"><li>为什么要使用 SNS?</li></ol><p>我们希望在上一个 Batch 任务执行完毕之后，使用其参数立即来构建另一个 Batch 任务。</p>]]></content>
      
      <categories>
          
          <category> aws </category>
          
      </categories>
      
      
        <tags>
            
            <tag> batch </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>使用 Charles 进行移动端抓包</title>
      <link href="/2018/01/07/using-charles/"/>
      <url>/2018/01/07/using-charles/</url>
      <content type="html"><![CDATA[<blockquote><p>不管是测试还是开发人员，在实际工作过程中经常要查看请求链接，已经请求内容来定位到问题。这个时候，就需要我们来进行抓包。</p></blockquote><a id="more"></a><h2 id="工具"><a href="# 工具" class="headerlink" title="工具"></a>工具 </h2><p>–</p><p><strong> 抓包的工具 </strong> 其实还是挺多的，据我了解大概有 </p><ul><li>Fiddler （windows)</li><li>wireshark （比较高级，能够捕获各种各样的包，不局限与 http/https）</li><li>Anyproxy 阿里出的抓包工具，还具有一些其他的功能 （基于 node 和 web， 所以是全平台都可以使用）</li><li>Charles（windows &amp;&amp; mac）</li></ul><h2 id="原理"><a href="# 原理" class="headerlink" title="原理"></a> 原理 </h2><p> 抓包的原理实际上很简单：</p><p>本来，我们的请求是这样的:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+----------+             +----------+</span><br><span class="line">|          |             |          |</span><br><span class="line">|  you     | +---------&gt; |  server  |</span><br><span class="line">|          |             |          |</span><br><span class="line">+----------+             +----------+</span><br></pre></td></tr></table></figure><p>因为我们要从中获取到数据，所以现在的请求方式是这样的:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+----------+        +----------+       +------------+</span><br><span class="line">|          |        |          |       |            |</span><br><span class="line">|  you     +------&gt; |  charles | +---&gt; |   server   |</span><br><span class="line">|          |        |          |       |            |</span><br><span class="line">+----------+        +----------+       +------------+</span><br></pre></td></tr></table></figure><p>其实我们抓包的过程又可以称之为 <a href="https://www.wikiwand.com/zh-hans/%E4%B8%AD%E9%97%B4%E4%BA%BA%E6%94%BB%E5%87%BB" target="_blank" rel="noopener"> 中间人攻击 </a>。我们截获了终端到服务器的通讯消息，获取其中的内容。</p><h2 id="操作"><a href="# 操作" class="headerlink" title="操作"></a> 操作 </h2><p>–</p><p> 我比较偏爱 Charles。下面我们一 Charles 为例，演示一下如何进行抓包：</p><h3 id="安装"><a href="# 安装" class="headerlink" title="安装"></a>安装 </h3><p> 安装不是很复杂，需要注意的是，如果 windows 下 charles 不能正常工作，首先检查关闭防火墙能不能正常工作，如果可以的话，找到防火墙中关于 charles 的规则，启用规则重新打开防火墙即可。</p><h3 id="打开 -Charles"><a href="# 打开 -Charles" class="headerlink" title="打开 Charles"></a>打开 Charles</h3><p>在 Charles 中 </p><p><img src="http://harchiko.qiniudn.com/Screen%20Shot%202018-01-07%20at%203.14.39%20AM.png" alt=""></p><p> 简单介绍一下面板的功能:</p><ol><li>上面区域是所有请求链接显示的地方。</li><li>下面区域点击会看到详细的请求信息。</li></ol><h3 id=" 设置代理 "><a href="# 设置代理 "class="headerlink"title=" 设置代理 "></a>设置代理 </h3><p><code>Proxy -&gt; Proxy Settings</code> 中， <img src="http://harchiko.qiniudn.com/Screen%20Shot%202018-01-07%20at%203.25.08%20AM.png"alt=""></p><p><code>port</code>可以手动指定，也可以使用动态端口（我个人比较倾向于动态端口，缺点是每次都要来看一下端口，然后在手机上重新设置，但是使用某个固定端口经常有抓不到包的情况）</p><p>移动端，我们需要跟电脑在同一局域网内，获取到本机的 IP 地址，与端口号，配置手机的代理。</p><p><img src="http://harchiko.qiniudn.com/361515267100_.pic_hd.jpg" alt=""></p><p>我个人的配置如下:</p><p><img src="http://harchiko.qiniudn.com/371515267187_.pic_hd.jpg"alt=""></p><h3 id="抓包"><a href="# 抓包" class="headerlink" title="抓包"></a>抓包 </h3><p> 配置完成后，Charles 会出现是否允许请求，点击允许即可。</p><p><img src="http://harchiko.qiniudn.com/Screen%20Shot%202018-01-07%20at%203.35.37%20AM.png" alt=""></p><p>可以看到 charles 已经可以查看到请求的信息了。</p><p><img src="http://harchiko.qiniudn.com/Screen%20Shot%202018-01-07%20at%203.37.24%20AM.png"alt=""></p><h3 id="https- 抓包"><a href="#https- 抓包" class="headerlink" title="https 抓包"></a>https 抓包 </h3><p> 可以看到，有一些 method 上面是 connect ，里面的内容我们还是看不到，这些是 https 请求（https 就是为了防止中间人攻击的）。我们需要在移动端安装证书来信任 charles 。</p><p><code>Help -&gt; SSL Proxying</code> 找到对应的选项进行安装 </p><p> 然后在 charles 对应的网址下，选择 <code>Enable SSL Proxying</code></p><p><img src="http://harchiko.qiniudn.com/Screen%20Shot%202018-01-07%20at%203.47.48%20AM.png" alt=""></p><p>再次请求，即可看到请求结果。</p><h3 id=" 没有 -ssl- 代理前 "><a href="# 没有 -ssl- 代理前 "class="headerlink"title=" 没有 ssl 代理前 "></a>没有 ssl 代理前</h3><p><img src="http://harchiko.qiniudn.com/Screen%20Shot%202018-01-07%20at%203.49.23%20AM.png"alt=""></p><h3 id="ssl- 代理后"><a href="#ssl- 代理后" class="headerlink" title="ssl 代理后"></a>ssl 代理后</h3><p><img src="http://harchiko.qiniudn.com/Screen%20Shot%202018-01-07%20at%203.49.48%20AM.png" alt=""></p>]]></content>
      
      
        <tags>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>通过 logbook 来提升编程技能</title>
      <link href="/2017/12/04/write_logs_use_logbooks/"/>
      <url>/2017/12/04/write_logs_use_logbooks/</url>
      <content type="html"><![CDATA[<blockquote><p>本文通过介绍了一种通过 logbook 的记录来提高自己编程技能的简便方法。</p></blockquote><a id="more"></a><p>这篇文章是我在看了 <a href="https://routley.io/tech/2017/11/23/logbook.html?utm_campaign=CodeTengu&amp;utm_medium=rss&amp;utm_source=CodeTengu_108" target="_blank" rel="noopener">Using a logbook to improve your programming</a> 的记录。</p><h2 id="记录原则"><a href="# 记录原则" class="headerlink" title="记录原则"></a>记录原则 </h2><p>logbook 记录有几个原则:</p><ol><li> 考虑你要解决的问题是什么？</li><li>描述你用来解决问题的办法。</li><li>描述你使用此方法的过程。</li><li>记录，并查看是否有更好的方案。</li></ol><h2 id="编程使用的优点"><a href="# 编程使用的优点" class="headerlink" title="编程使用的优点"></a>编程使用的优点 </h2><ol><li> 分解大问题为小问题。</li><li>很容易在分散精力之后重新回到工作状态。</li><li>可以从你的日志中快速学习。你可以查看你使用过的方法，然后了解哪些方法奏效，哪些无用。</li></ol><h2 id="快捷方法"><a href="# 快捷方法" class="headerlink" title="快捷方法"></a>快捷方法 </h2><p> 定义此方法到 <code>.zshrc</code> 中.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">lb</span></span>() &#123;</span><br><span class="line">    vim ~/logbook/$(date <span class="string">'+%Y-%m-%d'</span>).md</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>参考链接:</p><ul><li><a href="https://routley.io/tech/2017/11/23/logbook.html?utm_campaign=CodeTengu&amp;utm_medium=rss&amp;utm_source=CodeTengu_108" target="_blank" rel="noopener">https://routley.io/tech/2017/11/23/logbook.html?utm_campaign=CodeTengu&amp;utm_medium=rss&amp;utm_source=CodeTengu_108</a></li></ul>]]></content>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>使用 docker 进行 Minecraft 开服与备份</title>
      <link href="/2017/10/16/mincraft_in_docker/"/>
      <url>/2017/10/16/mincraft_in_docker/</url>
      <content type="html"><![CDATA[<blockquote><p>没有什么事情，是跟好友一起玩游戏更快乐的了。去年怂恿老夏入了一套正版的 Minecraft 之后，就一直考虑如何联机一起搞。如今我们两个虽然不在一个城市了，但并不妨碍一起继续玩游戏。</p></blockquote><a id="more"></a><h2 id="目标"><a href="# 目标" class="headerlink" title="目标"></a>目标 </h2><p> 从我决定开服起，我就给自己定下了以下目标:</p><ol><li>简单。</li><li>安全。</li></ol><p>所谓简单，我想要的是配置简单。 而安全，则是数据的安全。 我不希望那一天我的服务器发生灾难性事故，我的 Minecraft 存档毁于一旦。</p><h2 id="行动"><a href="# 行动" class="headerlink" title="行动"></a>行动 </h2><p> 毫无疑问，docker 是我的第一选择。</p><p>经过一番考虑，我选择了使用 dropbox 备份我的数据，在开启 Minecraft 的 docker 镜像之前，先将 dropbox 镜像建立起来。</p><h3 id="创建 -dropbox-container"><a href="# 创建 -dropbox-container" class="headerlink" title="创建 dropbox container"></a>创建 dropbox container</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --restart=always --name=dropbox -v /home/zcq_qiqi/Dbox/Dropbox:/dbox/Dropbox -v /home/zcq_qiqi</span><br><span class="line">/Dbox/.dropbox:/dbox/.dropbox janeczku/dropbox</span><br></pre></td></tr></table></figure><p>使用 <code>docker logs mc</code> 查看日志进行 dropbox 绑定。</p><p><img src="media/UsersdeveloperDesktopScreen-Shot-2017-10-16-at-10.14.54-AM-1.jpg" alt=""></p><p>进入 Container ，将一些无用的文件夹进行排除 </p><p><code>docker exec -t -i dropbox dropbox exclude add 1Password ithoughtsx Screenshots template Weekly\ Summary</code></p><p><strong> 注: 1Password ithoughtsx Screenshots template Weekly\ Summary 是排除的文件夹，请根据个人的文件夹进行排除 </strong></p><h3 id=" 创建 -Minecraft-Container"><a href="# 创建 -Minecraft-Container"class="headerlink"title=" 创建 Minecraft Container"></a> 创建 Minecraft Container</h3><p>创建 minecraft 文件夹 </p><p> 在宿主机上执行:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/Dbox/Dropbox</span><br><span class="line">mkdir minecraft</span><br></pre></td></tr></table></figure><p>启动 Container</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -v /home/zcq_qiqi/Dbox/Dropbox/minecraft/data:/data -e TYPE=FORGE -p 25565:25565 -e EULA=TRUE </span><br><span class="line">-e VERSION=1.12.1 --name mc itzg/minecraft-server</span><br></pre></td></tr></table></figure><p><strong>这里固定了版本在 1.12.1，不固定的话 Minecraft 上级之后会登录不上。</strong></p><h2 id=" 结束 "><a href="# 结束 "class="headerlink"title=" 结束 "></a>结束 </h2><p> 只建立好了服务器只是第一步，如果你不想你的服务器被熊孩子乱搞的话，最好加一个白名单。</p><p>在 whitelist.json 中添加如下格式的用户信息:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line"> &#123;</span><br><span class="line"> &quot;name&quot;: &quot;archieant&quot;,</span><br><span class="line"> &quot;uuid&quot;: &quot;7c20d813-631e-4e9b-a3f0-977dac8b284d&quot;</span><br><span class="line"> &#125;,</span><br><span class="line"> &#123;</span><br><span class="line"> &quot;name&quot;: &quot;meihuayu&quot;,</span><br><span class="line"> &quot;uuid&quot;: &quot;a01e6c11-194d-41ca-a334-d6edbe25afc1&quot;</span><br><span class="line"> &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>如果你想添加管理员权限, 在 ops.json 添加如下信息.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line"> &#123;</span><br><span class="line"> &quot;uuid&quot;: &quot;a01e6c11-194d-41ca-a334-d6edbe25afc1&quot;,</span><br><span class="line"> &quot;name&quot;: &quot;meihuayu&quot;,</span><br><span class="line"> &quot;level&quot;: 4,</span><br><span class="line"> &quot;bypassesPlayerLimit&quot;: false</span><br><span class="line"> &#125;,</span><br><span class="line"> &#123;</span><br><span class="line"> &quot;uuid&quot;: &quot;7c20d813-631e-4e9b-a3f0-977dac8b284d&quot;,</span><br><span class="line"> &quot;name&quot;: &quot;archieant&quot;,</span><br><span class="line"> &quot;level&quot;: 4,</span><br><span class="line"> &quot;bypassesPlayerLimit&quot;: false</span><br><span class="line"> &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>​</p>]]></content>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>本周我学到了【2】</title>
      <link href="/2017/10/16/this_week_i_learned_2/"/>
      <url>/2017/10/16/this_week_i_learned_2/</url>
      <content type="html"><![CDATA[<blockquote><p>本周我学到了第二期！这一期后面的 3 分钟演讲值得一看！</p></blockquote><a id="more"></a><p>本周我学到了以下内容:</p><h2 id="学习"><a href="# 学习" class="headerlink" title="学习"></a>学习 </h2><ol><li> 本周在公司电脑上安装了一台 centos 7，发现了 Centos 已经移除了 ipconfig 命令，取而代之的是 iproute。 原因是 ipconfig 已经十几年没有人维护了。原来的命令也有了一些改变， 比如 查看网址可以 ip a 了，可以看下这篇文章来熟悉下。 <a href="https://www.linux.com/learn/replacing-ifconfig-ip" target="_blank" rel="noopener">https://www.linux.com/learn/replacing-ifconfig-ip</a></li><li><a href="https://zhaochunqi.com/2017/10/16/mincraft_in_docker/" target="_blank" rel="noopener">使用 docker 进行 Minecraft 开服与备份 </a> 这是我自己的博客文章，分享了使用 dropbox 镜像和 Minecraft 镜像来进行 Minecraft 开服和备份的操作。</li><li><a href="https://daily.zhihu.com/story/9456555" target="_blank" rel="noopener"> 招聘时的「N 年编程经验」，实际是在要求什么？</a> 我们经常在 jd 中看到关于编程经验的要求，可曾想过，他们想要的究竟是什么？知乎的这篇文章或许会给你一些答案。</li><li><a href="https://www.daocloud.io/mirror#accelerator-doc" target="_blank" rel="noopener">dockcloud 加速 </a> 国内的 docker 镜像基本没有办法下载，使用 dockcloud 加速，效果明显。</li></ol><h2 id="生活"><a href="# 生活" class="headerlink" title="生活"></a> 生活 </h2><ol><li><a href="https://www.zhihu.com/question/36225746/answer/140211009?utm_source=com.ideashower.readitlater.pro&amp;utm_medium=social" target="_blank" rel="noopener"> 在家装里，最划算的投入是什么？</a> 最近在看一些家装，翻看了好多类似的文章，这篇的东西很对我的胃口。</li><li><a href="http://liqi.io/sharing86/" target="_blank" rel="noopener">优秀的思想值得传播，他们推荐了这 9 个演讲</a> 这几个文章我还没来得及看，但肯定是要看的了。</li></ol><p><img src="https://ws2.sinaimg.cn/large/006tNc79ly1flzvpaggyfj31kw0tqkjl.jpg" alt="https://ws2.sinaimg.cn/large/006tNc79ly1flzvpaggyfj31kw0tqkjl.jpg"></p><p>​</p>]]></content>
      
      <categories>
          
          <category> weekly </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>本周我学到了【1】</title>
      <link href="/2017/10/08/this_week_i_learned_1/"/>
      <url>/2017/10/08/this_week_i_learned_1/</url>
      <content type="html"><![CDATA[<blockquote><p>本周我学到了第一期！</p></blockquote><a id="more"></a><h2 id="学习"><a href="# 学习" class="headerlink" title="学习"></a>学习 </h2><p>• <a href="https://android.jlelse.eu/7-reasons-this-android-code-style-improves-your-productivity-65d196fa55f" target="_blank" rel="noopener">7 reasons this Android Code Style improves your productivity</a></p><blockquote><p> 对于 Android 开发来说很有用的代码规范，是对默认的 Android Studio 提供的代码规范的一种改进。</p><p>支持 kotlin，我最喜欢的是 xml 中的 id 放在首行 </p><p> 安装使用非常简单，无需什么额外的学习成本 </p></blockquote><p>• <a href="https://sspai.com/post/41022" target="_blank" rel="noopener"> 给你 48 小时，能做出什么样的游戏？——Ludum Dare 限时游戏制作竞赛 </a></p><blockquote><p> 少数派的这篇文章简直给我打开了新世界的大门。</p><p>我对着文中提到的 B 站的文章看了一个小时。</p></blockquote><p>• <a href="https://youtu.be/7kVeCqQCxlk" target="_blank" rel="noopener">YOUTUBE:CSS Grid Changes EVERYTHING - Amazing Presentation</a></p><blockquote><p>厌烦了 HTML 中一层又一层的 div 来实现网页效果？</p><p>不使用 JavaScript 如何 Responsive Design？</p><p>试试 CSS Grid 吧，觉得兼容性不够为时尚早？— 世界上本没有路，走的人多了，也变成了路。</p><p>演讲者还提写了篇博客来介绍： <a href="https://www.smashingmagazine.com/2017/06/building-production-ready-css-grid-layout/" target="_blank" rel="noopener">Building Production-Ready CSS Grid Layouts Today</a></p></blockquote><h2 id="生活"><a href="# 生活" class="headerlink" title="生活"></a>生活 </h2><p>• <a href="https://daily.zhihu.com/story/9544475" target="_blank" rel="noopener"> 鲜辣开胃，香而不腻的蒜泥白肉，是最送饭的一道凉菜 </a></p><blockquote><p> 这道菜简直太对我的胃口了，简单易做。</p></blockquote>]]></content>
      
      <categories>
          
          <category> weekly </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>一个 workflowy 的 Markdown 实时预览插件</title>
      <link href="/2017/03/02/workflowy-markdown-preivew-script/"/>
      <url>/2017/03/02/workflowy-markdown-preivew-script/</url>
      <content type="html"><![CDATA[<p>最近几个月已经成了 workflowy 的重度用户，然而在昨天（2017-03-01) 写文档的过程中发现没有 markdown 支持，写起来少了很多乐趣。</p><a id="more"></a><p>从网上找到了 <a href="https://greasyfork.org/zh-CN/scripts/27429-workflowy-commonmark-live-preview" target="_blank" rel="noopener">workflowy-commonmark-live-preview</a>这款插件，使用下来发现 <strong>markdown 预览渲染在下方，实际看起来很不方便</strong>。</p><p> 所以我就自己改了一个。</p><p>效果如下：</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1flzgnwla5cg312i0jeb29.gif" alt="http://harchiko.qiniudn.com/markdown-script-preview.gif"></p><p>下载链接： <a href="https://greasyfork.org/zh-CN/scripts/27784-workflowy-markdown-live-preview" target="_blank" rel="noopener">https://greasyfork.org/zh-CN/scripts/27784-workflowy-markdown-live-preview</a> 欢迎试用并提出宝贵意见。</p><p>困死了，去睡觉。</p>]]></content>
      
      
        <tags>
            
            <tag> workflowy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>微信推送从未如此简单 --Server 酱</title>
      <link href="/2016/12/30/simple_wechat_push/"/>
      <url>/2016/12/30/simple_wechat_push/</url>
      <content type="html"><![CDATA[<p>有一个非常简单的需求，每天查看一下以太坊的价格动向。</p><a id="more"></a><p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1flzgswqwrej30jz0zk40d.jpg" alt="http://harchiko.qiniudn.com/WechatIMG27.jpeg"></p><h2 id="方法"><a href="# 方法" class="headerlink" title="方法"></a>方法 </h2><p> 以太坊价格通过查询 YUNBI 的 API 知道: <a href="https://yunbi.com/api/v2/tickers/ethcny.json" target="_blank" rel="noopener">https://yunbi.com/api/v2/tickers/ethcny.json</a> 可以得到。</p><p>推送用到工具 Server 酱， Server 酱用起来实在是太方便了，一个 get 请求，信息就直接推送到微信上了。</p><p>直接向 <code>http://sc.ftqq.com/[SCKEY(登入后可见)].send</code> 发送 GET 请求即可:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">接受两个参数：</span><br><span class="line"></span><br><span class="line">text：消息标题，最长为 256，必填。</span><br><span class="line">desp：消息内容，最长 64Kb，可空，支持 MarkDown。</span><br></pre></td></tr></table></figure><h2 id="代码"><a href="# 代码" class="headerlink" title="代码"></a>代码 </h2><p> 使用 Python 来写:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">r = requests.get(<span class="string">'https://yunbi.com:443/api/v2/tickers/ethcny.json'</span>)</span><br><span class="line"></span><br><span class="line">json = r.json()</span><br><span class="line"></span><br><span class="line">ticker = json[<span class="string">'ticker'</span>]</span><br><span class="line">sell = ticker[<span class="string">'sell'</span>]</span><br><span class="line">buy = ticker[<span class="string">'buy'</span>]</span><br><span class="line">last = ticker[<span class="string">'last'</span>]</span><br><span class="line">vol = ticker[<span class="string">'vol'</span>]</span><br><span class="line">high = ticker[<span class="string">'high'</span>]</span><br><span class="line">low = ticker[<span class="string">'low'</span>]</span><br><span class="line"></span><br><span class="line">price =  <span class="string">u"* 最高:"</span>+high+<span class="string">u"\n* 最低:"</span>+low+<span class="string">u"\n* 卖价:"</span>+sell+<span class="string">u"\n* 买价:"</span>+buy+<span class="string">u"\n* 上次成交:"</span>+last+<span class="string">u"\n* 成交量:"</span>+vol</span><br><span class="line"></span><br><span class="line">payload = &#123;<span class="string">'text'</span>:<span class="string">u'以太坊最新价格'</span>, <span class="string">'desp'</span>: price&#125;</span><br><span class="line">requests.get(<span class="string">'http://sc.ftqq.com/[Your Own Token].send'</span>, params=payload)</span><br></pre></td></tr></table></figure><p>需要安装下 python requests 包 </p><p><code>pip install requests</code></p><p> 设置下 crontab 任务，这样每天就可以推送价格了。</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1flzgt07evyj30jz0zk75i.jpg" alt="http://harchiko.qiniudn.com/WechatIMG26.jpeg"></p>]]></content>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PHP 学习资料</title>
      <link href="/2016/12/14/php-learning-materials/"/>
      <url>/2016/12/14/php-learning-materials/</url>
      <content type="html"><![CDATA[<p>简单记录下 PHP 学习资料备忘。</p><a id="more"></a><h2 id="资料"><a href="# 资料" class="headerlink" title="资料"></a>资料 </h2><h3 id="视频"><a href="# 视频" class="headerlink" title="视频"></a> 视频 </h3><ul><li><a href="http://open.163.com/special/opencourse/buildingdynamicwebsites.html" target="_blank" rel="noopener"> 网易哈佛公开课 </a></li><li>Laracast/Laravel</li></ul><h3 id="文字 -amp- 书籍"><a href="# 文字 -amp- 书籍" class="headerlink" title="文字 &amp; 书籍"></a> 文字 &amp; 书籍 </h3><ul><li><a href="http://php.net/manual/zh/" target="_blank" rel="noopener">PHP 手册</a></li><li><a href="http://psysh.org/" target="_blank" rel="noopener">Psysh</a> 可以随时试验代码 </li><li><a href="https://packagist.org/explore/popular" target="_blank" rel="noopener">packagist 流行的包</a></li><li> 书籍 《 Modern PHP》</li></ul>]]></content>
      
      
        <tags>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Java Lambda 表达式（又名闭包 (Closure)/ 匿名函数 ) 笔记</title>
      <link href="/2016/11/15/java_lambda_expressions/"/>
      <url>/2016/11/15/java_lambda_expressions/</url>
      <content type="html"><![CDATA[<p>根据 <a href="https://jcp.org/en/jsr/detail?id=335" target="_blank" rel="noopener">JSR 335</a>, Java 终于在 Java 8 中引入了 Lambda 表达式。也称之为闭包或者匿名函数。</p><a id="more"></a><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1flzgw9sbtfj30jg08ct8r.jpg" alt="http://harchiko.qiniudn.com/Lambda%20Expression%20Java%208.png"></p><h2 id="JSR-335"><a href="#JSR-335" class="headerlink" title="JSR 335"></a>JSR 335</h2><p> 所谓的 JSR （Java Specification Requests） 全称叫做 Java 规范提案。简单来说就是向 Java 社区提交新的 API 或 服务 请求的提案。这些提案将作为 Java 社区进行 Java 语言开发的需求，引导着开发的方向。</p><p>JSR 335 的提案内容摘要如下：</p><blockquote><p>This JSR will extend the Java Programming Language Specification and the Java Virtual Machine Specification to support the following features:</p><ul><li>Lambda Expressions</li><li>SAM Conversion</li><li>Method References</li><li>Virtual Extension Methods</li></ul></blockquote><p>也就是如下几点：</p><ol><li>支持 lambda 表达式。</li><li>支持 SAM conversion 用来向前兼容。</li><li>方法引用 Method References</li><li>Virtual Extension Methods</li></ol><p>在 Java 8 中，以上均已经实现, 以上内容下文均有介绍。</p><h2 id="为什么需要 -Lambda- 表达式"><a href="# 为什么需要 -Lambda- 表达式" class="headerlink" title="为什么需要 Lambda 表达式?"></a>为什么需要 Lambda 表达式?</h2><p>Lambda 表达式，其实就是代码块。</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1flzgwbdd9ij308l06v0st.jpg" alt="http://harchiko.qiniudn.com/56cabf5a499ed708%202.jpg"></p><h3 id="原来怎么处理"><a href="# 原来怎么处理" class="headerlink" title="原来怎么处理"></a>原来怎么处理 </h3><p> 在具体了解 lambda 之前，我们先往后退一步，看看之前我们是如何处理这些代码块的！</p><h4 id="例子一"><a href="# 例子一" class="headerlink" title="例子一"></a>例子一 </h4><p> 当决定在单独的线程运行某程序时，你这样做的 </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Worker</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++)</span><br><span class="line">           doWork();</span><br><span class="line">     &#125;</span><br><span class="line">     ...</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p> 这样执行：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Worker w = <span class="keyword">new</span> Worker();</span><br><span class="line"><span class="keyword">new</span> Thread(w).start();</span><br></pre></td></tr></table></figure><p>Worker 中包含了你要执行的代码块。</p><h4 id="例子二"><a href="# 例子二" class="headerlink" title="例子二"></a>例子二 </h4><p> 如果你想实现根据字符串长度大小来排序，而不是默认的字母顺序，你可以自己来实现一个 Comparator 用来 Sort。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LengthComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(String first, String second)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Integer.compare(first.length(), second.length());</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br><span class="line">   </span><br><span class="line">Arrays.sort(strings, <span class="keyword">new</span> LengthComparator());</span><br></pre></td></tr></table></figure><h4 id="例子三"><a href="# 例子三" class="headerlink" title="例子三"></a>例子三 </h4><p> 另外一个例子，我选的是 Android 中的点击事件，同样是 Java:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">button.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">        Toast.makeText(MainActivity.<span class="keyword">this</span>, <span class="string">"Hello World!"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="上面代码有什么问题呢？"><a href="# 上面代码有什么问题呢？" class="headerlink" title="上面代码有什么问题呢？"></a>上面代码有什么问题呢？</h3><p><img src="https://ws3.sinaimg.cn/large/006tNc79ly1flzgwdq0rwj30hs0d4q30.jpg" alt="http://harchiko.qiniudn.com/c718cee7.jpg"></p><p>它们都太复杂了啊！</p><blockquote><p>上述例子都是在某个类中实现某个接口，然后传递到另外一个方法中作为参数，然后用来执行。</p></blockquote><p>但是本质上，他们要传递的就是接口中那一个方法的实现而已啊！有必要先创建类，再实例化，再传递给调用的位置吗？</p><blockquote><p>因为 Java 是纯面向对象的语言，像其他语言那样随随便便传个方法过来，那可不行，必须要这样。</p></blockquote><p>在其他语言中你可能可以，但是，在 Java 中，不可以。</p><p><img src="https://ws2.sinaimg.cn/large/006tNc79ly1flzgwf5406j307t06vwej.jpg" alt="http://harchiko.qiniudn.com/56cabf7011ab6750.jpg"></p><p>Java 设计人员为了 Java 的简洁跟连贯性，一直拒绝为 Java 添加这种功能。（这也是我喜欢 Java 而不喜欢 Python 的原因啊！！！)</p><p>经过多年的努力，开发人员终于找到了符合 Java 编程习惯的 Lambda 表达式！</p><h2 id="Lambda- 表达式语法 -Syntax"><a href="#Lambda- 表达式语法 -Syntax" class="headerlink" title="Lambda 表达式语法 (Syntax)"></a>Lambda 表达式语法(Syntax)</h2><p> 考虑下前面的例子：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer.compare(first.length(), second.length())</span><br></pre></td></tr></table></figure><p>first 和 second 都是 String 类型，Java 是强类型的语言，必须指定类型:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(String first, String second)</span><br><span class="line">     -&gt; Integer.compare(first.length(), second.length())</span><br></pre></td></tr></table></figure><p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1flzgwghv0jj30av0c6dg2.jpg" alt="http://harchiko.qiniudn.com/14365393725281065.jpg"></p><p>看到没有！第一个 Lambda 表达式诞生了！！输入、输出简洁明了！</p><blockquote><p>为什么叫 Lambda 呢，这个很多年以前，有位逻辑学家想要标准化的表示一些可以被计算的数学方程（实际上存在，但是很难被表示出来），他就用 ℷ 来表示。</p></blockquote><p>重新介绍一下 Java 中 Lambda 表达式的格式:</p><blockquote><p>(参数) -&gt; 表达式 </p></blockquote><h3 id="多返回值"><a href="# 多返回值" class="headerlink" title="多返回值"></a> 多返回值 </h3><p> 如果计算的结果并不由一个单一的表达式返回（换言之，返回值存在多种情况），使用“{}”，然后明确指定返回值。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(String first, String second) -&gt; &#123;</span><br><span class="line">     <span class="keyword">if</span> (first.length() &lt; second.length()) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">     <span class="keyword">else</span> <span class="keyword">if</span> (first.length() &gt; second.length()) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">     <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="无参数"><a href="# 无参数" class="headerlink" title="无参数"></a>无参数 </h3><p> 如果没有参数，则 “()”中就空着。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">() -&gt; &#123; <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) doWork(); &#125;</span><br></pre></td></tr></table></figure><h3 id="省略"><a href="# 省略" class="headerlink" title="省略"></a>省略 </h3><p> 如果参数的类型可以被推断出，则可以直接省略 </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Comparator&lt;String&gt; comp</span><br><span class="line">     = (first, second) <span class="comment">// Same as (String first, String second)</span></span><br><span class="line">        -&gt; Integer.compare(first.length(), second.length());</span><br></pre></td></tr></table></figure><p> 这里，first 和 second 可以被推断出是 String 类型，因为 是一个 String 类型的 Comparator。</p><p>如果单个参数可以被推断出，你连括号都可以省略：<br></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EventHandler&lt;ActionEvent&gt; listener = event -&gt;</span><br><span class="line">     System.out.println(<span class="string">"Thanks for clicking!"</span>);</span><br><span class="line">        <span class="comment">// Instead of (event) -&gt; or (ActionEvent event) -&gt;</span></span><br></pre></td></tr></table></figure><p></p><h3 id="修饰符"><a href="# 修饰符" class="headerlink" title="修饰符"></a>修饰符 </h3><p> 你可以像对待其他方法一样，annotation，或者 使用 final 修饰符 </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">final</span> String name) -&gt; ...</span><br><span class="line">    (<span class="meta">@NonNull</span> String name) -&gt; ...</span><br></pre></td></tr></table></figure><p><strong> 永远不要 </strong> 定义 result 的类型，lambda 表达式总是从上下文中推断出来的：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(String first, String second) -&gt; Integer.compare(first.length(), second.length())</span><br></pre></td></tr></table></figure><h3 id="注意"><a href="# 注意" class="headerlink" title="注意"></a>注意 </h3><p> 注意，在 lambda 表达式中，某些分支存在返回值，某些不存在返回值这样的情况是不允许的。<br>如 <code>(int x) -&gt; {if (x &gt;= 0) return 1; }</code>这样是非法的。</p><h2 id="函数式接口 -Functional-Interfaces-SAM"><a href="# 函数式接口 -Functional-Interfaces-SAM" class="headerlink" title="函数式接口 (Functional Interfaces/SAM)"></a> 函数式接口 (Functional Interfaces/SAM)</h2><blockquote><p> 要介绍 Java 中 lambda 表达式的实现，需要知道什么是 函数式接口。</p></blockquote><p>什么叫作函数式接口呢 (SAM)？</p><blockquote><p> 函数式接口指的是只定义了唯一的抽象方法的接口（除了隐含的 Object 对象的公共方法）， 因此最开始也就做 SAM 类型的接口（Single Abstract Method）。</p></blockquote><p>Lambda 表达式 <strong> 向前兼容 </strong> 这些接口。</p><h3 id="Comparable"><a href="#Comparable" class="headerlink" title="Comparable"></a>Comparable</h3><p>举个例子 Array.sort:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Arrays.sort(words,</span><br><span class="line">     (first, second) -&gt; Integer.compare(first.length(), second.length()));</span><br></pre></td></tr></table></figure><p>Array.sort() 方法收到一个实现了 Comparable<string>接口的实例。</string></p><p>其实可以把 Lambda 表达式想象成一个方法，而非一个对象，一个可以传入一个接口的方法。</p><h3 id="OnClickListener"><a href="#OnClickListener" class="headerlink" title="OnClickListener"></a>OnClickListener</h3><p>再举个例子 </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">button.setOnClickListener(event -&gt;</span><br><span class="line">     System.out.println(<span class="string">"Thanks for clicking!"</span>));</span><br></pre></td></tr></table></figure><p> 你看，是不是更易读了呢？</p><p>Lambda 表达式能够向前兼容这些 interfaces, 太棒了！ 那 Lambda 表达式还能干什么呢？</p><p>实际上，将函数式接口转变成 lambda 表达式是你在 Java 中 <strong> 唯一 </strong> 能做的事情。</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79ly1flzgwi9bdnj30er0ermyd.jpg" alt="http://harchiko.qiniudn.com/20150930185659_eMZyN.jpeg"></p><p>Why ？！！</p><p>在其他的语言中，你可以定义一些方便的方法类型，但在 Java 中，你甚至不能将一个 Lambda 表达式赋值给类型为 Object 的变量，因为 Object 变量不是一个 Functional Interface。</p><p>Java 的设计者们坚持使用熟悉的 interface 概念而不是为其引入新的 方法类型。</p><p>(这里我还要为设计者点赞！谨慎的设计，一方面降低了初学者的门槛，一方面方便了高级用户的使用。对比 python2 和 python3，升级的不兼容让很多人一直停留在 python2)</p><h2 id="Method-References"><a href="#Method-References" class="headerlink" title="Method References"></a>Method References</h2><p>能不能再简洁一点？有的时候我们所要做的事情不过是调用其他类中方法来处理事件。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">button.setOnClickListener(event -&gt; System.out.println(event));</span><br></pre></td></tr></table></figure><p>如果这样呢？</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">button.setOnAction(System.out::println);</span><br></pre></td></tr></table></figure><p>表达式 <code>System.out::println</code> 属于一个方法引用（method reference）， 相当于 lambda 表达式 <code>x -&gt; System.out.println(x)</code></p><p><img src="https://ws2.sinaimg.cn/large/006tNc79ly1flzgwjw3krj30jg0jgmxy.jpg" alt="http://harchiko.qiniudn.com/20151220232425_nWH23.jpeg"></p><p>再举个例子，如果你想对字符串不管大小写进行排序, 就可以这样写！</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Arrays.sort(strings, String::compareToIgnoreCase)</span><br></pre></td></tr></table></figure><p>如上所见 <code>::</code>操作符将方法名与实例或者类分隔开。总体来说，又如下的规则:</p><ul><li>object::instanceMethod</li><li>Class::staticMethod</li><li>Class::instanceMethod</li></ul><p>值得指出的是， <code>this</code>和 <code>super</code> 关键字可以在其中使用：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Greeter</span> </span>&#123;</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">greet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Hello, world!"</span>);</span><br><span class="line">     &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcurrentGreeter</span> <span class="keyword">extends</span> <span class="title">Greeter</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">greet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Thread t = <span class="keyword">new</span> Thread(<span class="keyword">super</span>::greet);</span><br><span class="line">    t.start();</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="构造方法引用 -Constructor-References"><a href="# 构造方法引用 -Constructor-References" class="headerlink" title="构造方法引用 Constructor References"></a>构造方法引用 Constructor References</h2><p>跟上一个差不多，毕竟 <strong> 构造方法 </strong> 也是方法啊！！不过方法名字为 new 。</p><p> 但是！这个构造方法引用有一个牛逼的地方！</p><p>你知道 Array 是不能使用范型的对吧！（什么，你不知道？看看这里 <a href="http://stackoverflow.com/questions/2927391/whats-the-reason-i-cant-create-generic-array-types-in-java" target="_blank" rel="noopener">http://stackoverflow.com/questions/2927391/whats-the-reason-i-cant-create-generic-array-types-in-java</a>), 你没有办法创建一个类型为 T 的 Array 。 new T[n] 将会被覆盖为 new Object[n]。</p><p>假设我们想要一个包含 buttons 的 Array。Stream interface 可以返回一个 Object array。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object[] buttons = stream.toArray();</span><br></pre></td></tr></table></figure><p>不不不，我们可不想要 Object。Stream 库使用 构造方法引用解决了这个问题:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Button[] buttons = stream.toArray(Button[]::<span class="keyword">new</span>);</span><br></pre></td></tr></table></figure><p><img src="https://ws2.sinaimg.cn/large/006tNc79ly1flzgwugxczj31kw0ngk5w.jpg" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-11-16%20at%204.30.23%20AM.png"></p><h2 id="变量作用域"><a href="# 变量作用域" class="headerlink" title="变量作用域"></a>变量作用域 </h2><p> 注意到我们在题目中写着 闭包（closure), 实际上，闭包的定义是: 引用了自由变量的函数。</p><p>在之前，如果需要在匿名类的内部引用外部变量，需要将外部变量定义为 final ，现在有了 lambda 表达式，你不必再这么做了。但同样需要保证外部的自由变量不能在 lambda 表达式中被改变。</p><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1flzgwwa5lvj31kw0ngk5w.jpg" alt="http://harchiko.qiniudn.com/56cabf5d7d6dc247.jpg!600x600.jpg"><br>这是什么意思呢？ 不需要定义为 final，也不能改？</p><p>其实理解起来很简单，Java 8 中，不需要定义为 final ，但你其实可以直接把他当作 final，不要试图修改它就行了。</p><p>即便你用内部类，现在也无需定义为 final 了。</p><p>参考 StackOverFlow 链接: <a href="http://stackoverflow.com/questions/4732544/why-are-only-final-variables-accessible-in-anonymous-class" target="_blank" rel="noopener">http://stackoverflow.com/questions/4732544/why-are-only-final-variables-accessible-in-anonymous-class</a></p><h2 id="Default-Methods"><a href="#Default-Methods" class="headerlink" title="Default Methods"></a>Default Methods</h2><p>由于历史原因，像是类似 Collection 这种接口，如果进行添加接口的话，那将会造成之前的代码出错。</p><p>Java 想了一个一劳永逸的方法解决这个问题， 使用 default 修饰符来提供默认的实现 </p><p> 比如 Collection 接口的源代码:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="string">"remove"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当没有 override remove 这个方法是，调用的时候返回 UnsupportedOperationException 错误。</p><h2 id="Static-Methods-in-Interfaces"><a href="#Static-Methods-in-Interfaces" class="headerlink" title="Static Methods in Interfaces"></a>Static Methods in Interfaces</h2><p>Java 8 中，你可以在接口中添加静态方法了。 看起来好像并不符合接口的定义了。</p><p>一般用来生成一个简单实现该 interface 的实例。</p><p>参考链接：</p><ol><li><a href="https://jcp.org/en/jsr/detail?id=335" target="_blank" rel="noopener">JSR 335: Lambda Expressions for the JavaTM Programming Language</a></li><li><a href="https://www.ibm.com/developerworks/cn/java/j-lo-jdk8newfeature/" target="_blank" rel="noopener">Java 8 新特性概述</a></li><li><a href="http://www.drdobbs.com/jvm/lambda-expressions-in-java-8/240166764?pgno=1" target="_blank" rel="noopener">Lambda Expressions in Java 8</a></li></ol><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1flzgx8edw8j31471kuhdt.jpg" alt="http://harchiko.qiniudn.com/44577950_p0.jpg"></p>]]></content>
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>如何动态选择 Android 需要启动的 Activity</title>
      <link href="/2016/10/18/dynamic_start_activity_on_android/"/>
      <url>/2016/10/18/dynamic_start_activity_on_android/</url>
      <content type="html"><![CDATA[<blockquote><p>Android 开发过程中经常遇到第一次启动时需要登录或者一段介绍什么的。但之后再次启动时则不在需要的情况，对于这种情况，如何设定启动的 Activity 呢?</p></blockquote><a id="more"></a><h2 id="场景"><a href="# 场景" class="headerlink" title="场景"></a>场景 </h2><p> 第一次登录需要跳转到登录界面，而后来登录过后则只需直接跳转到需要显示的界面即可。</p><h2 id="方法 1"><a href="# 方法 1" class="headerlink" title="方法 1"></a>方法 1</h2><p>设定一个无界面的跳转 Activity:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    Intent intent;</span><br><span class="line">    <span class="keyword">if</span> (condition) &#123;</span><br><span class="line">       intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, ClassA.class);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, ClassB.class);</span><br><span class="line">    &#125;</span><br><span class="line">    startActivity(intent);</span><br><span class="line">    finish();</span><br><span class="line">    <span class="comment">// note we never called setContentView()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意: 没有 <code>setContentView()</code>。否则你会看到一个跳转界面。</strong></p><h2 id="方法 2"><a href="# 方法 2" class="headerlink" title="方法 2"></a>方法 2</h2><p>动态设置布局:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!userIsLoggedIn) &#123;</span><br><span class="line">    setContentView(R.layout.signup);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    setContentView(R.layout.homescreen);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>反正我不推荐用这个。</p><p>参考链接:</p><ul><li><a href="http://stackoverflow.com/questions/4856539/dynamic-start-activity-in-android" target="_blank" rel="noopener">http://stackoverflow.com/questions/4856539/dynamic-start-activity-in-android</a></li></ul>]]></content>
      
      <categories>
          
          <category> android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> activity </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>修复他人 Android 代码遗留 Bug 的小技巧</title>
      <link href="/2016/09/24/fix_bugs_with_legacy/"/>
      <url>/2016/09/24/fix_bugs_with_legacy/</url>
      <content type="html"><![CDATA[<p>由于工作需求，近日接触到了他人的遗留代码，并要据此遗留代码进行 Bug 修复，总结一下在修复过程中使用到的一些小技巧。</p><a id="more"></a><p>谁不喜欢萌妹子呢！<br><img src="https://ws1.sinaimg.cn/large/006tKfTcly1flzgq5x5kij30hp0p0jx4.jpg" alt="http://harchiko.qiniudn.com/59097609_p0.jpg"></p><h2 id="寻找 -BUG- 对应的 -Activity"><a href="# 寻找 -BUG- 对应的 -Activity" class="headerlink" title="寻找 BUG 对应的 Activity"></a>寻找 BUG 对应的 Activity</h2><p>我会要求测试安装 <a href="http://www.coolapk.com/apk/com.willme.topactivity" target="_blank" rel="noopener">当前 Activity</a> 这个应用，并在产生 Bug 的地方截图，效果大概是这样:</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1flzgr1e7ntj31401z4kjl.jpg" alt="http://harchiko.qiniudn.com/Screenshot_1474651833.png"></p><p>很容易就找到对应的 Activity 了对不对？</p><h2 id="代码跳转"><a href="# 代码跳转" class="headerlink" title="代码跳转"></a>代码跳转 </h2><h3 id="文件跳转"><a href="# 文件跳转" class="headerlink" title="文件跳转"></a> 文件跳转 </h3><p> 这里，我将 跳转到响应文件修改为 <code>CMD + P</code> ，原因嘛，为了跟 Sublime 使用起来一致。</p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1flzgr3q53dj31401z4kjl.jpg" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-09-24%20at%201.33.59%20AM.png"></p><h3 id="方法跳转"><a href="# 方法跳转" class="headerlink" title="方法跳转"></a>方法跳转 </h3><p> 我使用 <code>CMD+R</code>搜索文件中的方法，快速定位到如 <code>onCreate()</code>之类的方法。</p><h3 id="跳到上一次代码编辑的地方"><a href="# 跳到上一次代码编辑的地方" class="headerlink" title="跳到上一次代码编辑的地方"></a>跳到上一次代码编辑的地方 </h3><p> 我使用插件 ideaVim, 然后使用 <code>CMD+[</code>, <code>CMD+]</code> 跳来跳去。</p><h3 id="跳到近期编辑过的文件"><a href="# 跳到近期编辑过的文件" class="headerlink" title="跳到近期编辑过的文件"></a>跳到近期编辑过的文件 </h3><p> 不多说，快捷键 <code>CMD + E</code></p><h2 id="分析布局"><a href="# 分析布局" class="headerlink" title="分析布局"></a>分析布局 </h2><p> 在调试过程中，某些类似 ListView 这种没有办法直接从 XML 中看出 问题的地方，使用 LayoutInspector 一看就明白了。</p><p>这个按钮躲在一个小角落，见图:</p><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1flzgr85nplj31401z4kjl.jpg" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-09-24%20at%201.47.22%20AM.png"></p><h2 id="事半功倍的日志库"><a href="# 事半功倍的日志库" class="headerlink" title="事半功倍的日志库"></a>事半功倍的日志库 </h2><p><a href="https://github.com/orhanobut/logger" target="_blank" rel="noopener">Logger</a> 这个对于我这样的懒人用起来太合适了</p><p> 普通日志长这样:<br><img src="https://ws4.sinaimg.cn/large/006tKfTcly1flzgrcex7xj31100akad0.jpg" alt="http://harchiko.qiniudn.com/current-log.png"></p><p>它的日志这样:</p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1flzgrhq0zvj30lq06s3zm.jpg" alt="http://harchiko.qiniudn.com/description.png"></p><h2 id="善用搜索"><a href="# 善用搜索" class="headerlink" title="善用搜索"></a>善用搜索 </h2><p> 使用 <code>CMD+SHIFT+F</code>能进行全局搜索，这对于查找某些使用字符串拼接的地方特别有效果。</p><p>暂时就这么多吧！</p>]]></content>
      
      <categories>
          
          <category> android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> android </tag>
            
            <tag> tips </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hi, RxJava</title>
      <link href="/2016/09/14/hi_rxjava/"/>
      <url>/2016/09/14/hi_rxjava/</url>
      <content type="html"><![CDATA[<p>本文是一篇简单的 RxJava 的介绍。RxJava 介绍是 : Reactive Extensions for the JVM.</p><a id="more"></a><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1flzgpyldsyj30qo0f0aav.jpg" alt="http://harchiko.qiniudn.com/rxjava-series-cover.jpg"></p><h2 id="Reactive"><a href="#Reactive" class="headerlink" title="Reactive"></a>Reactive</h2><p>Rx 是 ReactiveX 的缩写。 Reactive 在字典中的解释是:</p><p>“readily responsive to a stimulus” 对刺激易于反应 </p><p>RxJava 是 Rx 的 Java 实现。</p><h2 id="观察者模式"><a href="# 观察者模式" class="headerlink" title="观察者模式"></a> 观察者模式 </h2><p> 观察者模式是 RxJava 消息通知使用的模式。</p><p>如果你知道『薛定谔的猫』，下面可能有助于你来理解。</p><p>薛定谔 -&gt; Observer</p><p>猫 -&gt; Observable</p><p>当猫的状态发生改变时，通知薛定谔。『具体观察者模式请参考相关书籍』</p><p><strong>在 Android 中， 相关操作在子线程完成后，在 主线程 更新 UI。</strong></p><h2 id="Reactive-Programming"><a href="#Reactive-Programming" class="headerlink" title="Reactive Programming"></a>Reactive Programming</h2><p>Reactive programming is programming with asynchronous data streams.</p><p>关键词: 异步 / 数据流 </p><h3 id="异步能解决什么问题？"><a href="# 异步能解决什么问题？" class="headerlink" title="异步能解决什么问题？"></a> 异步能解决什么问题？</h3><p>举个例子：</p><ul><li>使用 Rx 请求网络数据，不用阻塞主线程。</li><li>使用 Rx 读写数据库，不用阻塞主线程。</li></ul><h3 id="你可能会问，为什么不阻塞主线程？"><a href="# 你可能会问，为什么不阻塞主线程？" class="headerlink" title="你可能会问，为什么不阻塞主线程？"></a>你可能会问，为什么不阻塞主线程？</h3><p>因为，如果有界面，会造成界面卡顿，即便没界面，程序卡在那里也不好。</p><p>况且 Android 中， 网络相关操作在多少个版本之前就不能在主线程调用了，调用直接告诉你不能在主线程，你网络请求多快都不行！</p><p>RxJava 中，很简单，主线程执行相关 UI 操作，费事线程放到其他线程来做。</p><p><strong>你可以忘掉 AsyncTasks 了 </strong></p><h3 id="你可能还会问，我就想在主线程用 Rxjava，可以吗？"><a href="# 你可能还会问，我就想在主线程用 Rxjava，可以吗？" class="headerlink" title="你可能还会问，我就想在主线程用 Rxjava，可以吗？"></a> 你可能还会问，我就想在主线程用 Rxjava，可以吗？</h3><p>当然可以，没有异步操作的话就行，比如 你发射一个 array , 然后对这个 array 进行简单操作。</p><p>这种操作就相当于 for 循环了。</p><h3 id="数据流"><a href="# 数据流" class="headerlink" title="数据流"></a>数据流 </h3><p>Rx 涉及到一个 『流』 的概念。</p><p> 万物皆可为流，事物在某个维度上的运动就可以成为流。</p><p>譬如：</p><ul><li>高速公路上的车流。</li><li>人随着时间的推移渐渐由婴儿到成年。『长大真的好烦啊』</li></ul><p>在 Rx 中， 流以时间为维度。</p><p><strong>数据流 </strong> 就像一条河：它可以被观测，被过滤，被操作，或者为新的消费者与另外一条流合并为一条新的流。『这句话我摘抄的』</p><h3 id="联合起来"><a href="# 联合起来" class="headerlink" title="联合起来"></a>联合起来 </h3><ul><li> 网络请求 </li></ul><p> 异步 + 数据流 =&gt; 网络请求 (数据传回之后，执行后续动作『观察者模式』) -&gt; Json -&gt; Objects -&gt; 处理</p><ul><li> 多次点击事件 </li></ul><p> 异步 + 数据流 =&gt; 点击多次 (点击之后的动作也是观察者模式) -&gt; 获取间隔短的点击 -&gt; 合并点击事件 -&gt; 过滤出 多次点击事件</p><p> 见下图:</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1flzgpzdh5uj30qo0f0aav.jpg" alt="http://harchiko.qiniudn.com/32YBZv.png"></p><h2 id="怎么用"><a href="# 怎么用" class="headerlink" title="怎么用"></a>怎么用 </h2><p> 以下是我学习 RxJava 时所看的一些资料，按照我认为重要程度及学习路线简单划分了一下:</p><ol><li>看一下 RxJava 解决了 Android 开发中的什么痛点：<a href="http://www.andreamaglie.com/rxjava-android-where-to-start/" target="_blank" rel="noopener">http://www.andreamaglie.com/rxjava-android-where-to-start/</a></li><li>学习下基本的 操作 <a href="https://gist.github.com/staltz/868e7e9bc2a7b8c1f754" target="_blank" rel="noopener">https://gist.github.com/staltz/868e7e9bc2a7b8c1f754</a></li><li> 重点看一下这个 <a href="http://yarikx.github.io/NotRxJava/" target="_blank" rel="noopener">http://yarikx.github.io/NotRxJava/</a></li><li>看 wiki <a href="https://github.com/ReactiveX/RxJava/wiki" target="_blank" rel="noopener">https://github.com/ReactiveX/RxJava/wiki</a></li></ol><p>借用『Yaroslav Heriatovych』的那句话，『Once you start using it in your project – you will use it everywhere.』</p><hr><p>可爱的萌妹子放到最后：</p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1flzgq36g8lj30zk0p5qf5.jpg" alt="http://harchiko.qiniudn.com/58950333_p0.jpg"></p>]]></content>
      
      <categories>
          
          <category> android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>我用的很爽的工作流</title>
      <link href="/2016/08/31/workflow_for_network/"/>
      <url>/2016/08/31/workflow_for_network/</url>
      <content type="html"><![CDATA[<p>分享一下个人用的很爽的一些工作流，包含 翻墙、下载、同步等。</p><a id="more"></a><p>图片镇楼:<br><img src="https://ws1.sinaimg.cn/large/006tKfTcly1flzgne5xjuj30nr0vxn99.jpg" alt="http://harchiko.qiniudn.com/54686763_p0.jpg"></p><h2 id="翻墙 -amp- 域名解析"><a href="# 翻墙 -amp- 域名解析" class="headerlink" title="翻墙 &amp; 域名解析"></a>翻墙 &amp; 域名解析 </h2><p> 搬瓦工 最低价格的 vps，足够用，还可以迁移服务器。</p><p>这里，我把搬瓦工的 ip 地址配置在我子域名的 A 记录上（需要自己域名，可使用 DNSPOD 解析），主要有几个好处:</p><ul><li>登录 vps 可以使用域名地址 如: <code>ssh root@linux.zhaochunqi.com</code></li><li>作为翻墙服务时，由于每个地区节点的网速有所不同，有时候需要迁移，迁移过后，只需要修改相应的 A 记录，其他地方可以不用动。</li></ul><h2 id="SSH- 无密码登录"><a href="#SSH- 无密码登录" class="headerlink" title="SSH 无密码登录"></a>SSH 无密码登录 </h2><p> 作为一个懒人，甚至我连 <code>ssh root@linux.zhaochunqi.com</code> 都觉得很累，很麻烦, 更不要说每次还要输入密码了。</p><p>分几步，有些步骤可能之前配置 <code>git</code>之类的你有做过，可跳过 </p><ol><li> 生成 ssh-key . 查看是否已经存在 <code>cat ~/.ssh/id_rsa.pub</code>, 不存在可以使用 <code>ssh-keygen -f ~/.ssh/id_rsa -t rsa -N &#39;&#39;</code>来生成。</li><li>安装 ssh-copy-id <code>brew install ssh-copy-id</code></li><li>使用 ssh-copy-id 命令 <code>ssh-copy-id -i ~/.ssh/id_rsa.pub [用你自己的地址替换，如 root@linux.zhaochunqi.com]</code>，输入密码，这样你的 vps 可信任的 key 中就有你了，下次登录 <code>ssh root@linux.zhaochunqi.com</code>，不用输密码了。</li><li>alias, 把 alias 命令添加到 <code>.bashr</code>或 <code>.zshrc</code> 中 alias vps=”ssh <a href="mailto:root@linux.zhaochunqi.com" target="_blank" rel="noopener">root@linux.zhaochunqi.com</a>“。</li></ol><p>我们来登录下 vps，terminal 中输入 <code>vps</code>即可:<br><img src="https://ws4.sinaimg.cn/large/006tKfTcly1flzgnfo1k8g30ms0jiaag.gif" alt="http://harchiko.qiniudn.com/vps-my-work-flow.gif"></p><h2 id="下载国外资源"><a href="# 下载国外资源" class="headerlink" title="下载国外资源"></a>下载国外资源 </h2><p> 国内有些资源即便翻着墙也很难下载，反观国外，基本分分钟就能下载好，如何利用下这个呢？</p><p>使用 <code>BitTorrent Sync</code> , 免费版就足够用，创建一个文件夹用来同步，如 <code>vps</code>, 本地也创建一个同步文件夹，因为 VPS 空间有限，注意把缓存已删除文件取消勾选。</p><p>举个例子：</p><p>你下载 <code>Android Studio</code>，翻墙下载速度很慢，</p><ol><li>打开 Terminal，</li><li>输入 vps，</li><li>进入你的 vps 同步文件夹，</li><li>wget 链接地址，2s 下完，</li><li>等待 BTsync 同步到你本机 </li></ol><p> 你可能会有疑问（并没有），意义在哪里呢？</p><ul><li>速度快 </li><li> 你同步可以断点续传啊！！</li><li>稳定 </li></ul><p> 顺便说一下下载 <code>youtube</code>视频：</p><p>VPS 上安装 <code>youtube-dl</code>, 使用 <code>youtube-dl 链接地址 </code> 就可以下载了，需要提醒的是，youtube-dl 支持的网站不知道多到哪里去了！ 自己去 <code>google</code> 一下吧。</p>]]></content>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> tools </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Android 如何根据浏览器 URL 启动应用</title>
      <link href="/2016/08/22/android_start_activity_from_browser/"/>
      <url>/2016/08/22/android_start_activity_from_browser/</url>
      <content type="html"><![CDATA[<p>因为正在完成的应用需要用到 <code>OAuth2</code> 来进行身份认证，需要跳转到浏览器，然后再跳转回来，接收浏览器返回的信息。这里面用到了 <code>Implicit Intent</code><br><a id="more"></a></p><p>艾米莉亚镇楼:</p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1flzgom73goj30np0xcawn.jpg" alt="http://harchiko.qiniudn.com/58541110_p0.jpg"></p><h2 id="假设"><a href="# 假设" class="headerlink" title="假设"></a>假设 </h2><p> 假设我们要解析的网址是: <code>https://zhaochunqi.inoreader</code></p><p>很明显，打不开，这是我乱编的。</p><h2 id="定义"><a href="# 定义" class="headerlink" title="定义"></a>定义 </h2><p> 在 <code>AndroidManifest</code>中定义 <code>intentfilter</code></p><p>在需要回调 Activity 中定义 </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.VIEW"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.BROWSABLE"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android.intent.category.DEFAULT"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">data</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:host</span>=<span class="string">"zhaochunqi.inoreader"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:scheme</span>=<span class="string">"https"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:pathPattern</span>=<span class="string">"/*"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br></pre></td></tr></table></figure><p> 下面逐行解释:</p><p><code>&lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;</code></p><blockquote><p>通知 Android 此 Activity 可以处理 ACTION_VIEW 类型的 Intent.</p></blockquote><p><code>&lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;</code></p><blockquote><p>从浏览器中唤醒的应用必须包含此声明 </p></blockquote><p><code>&lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;</code></p><blockquote><p> 所有的 implicit Intent 必须包含此声明，否则将无法被感知，也就无法接受到 implicit Intent.</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">data</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:host</span>=<span class="string">"zhaochunqi.inoreader"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:scheme</span>=<span class="string">"https"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:pathPattern</span>=<span class="string">"/*"</span>/&gt;</span></span><br></pre></td></tr></table></figure><p><code>scheme</code>这个必须有，定义 <code>uri</code><br><code>host</code> 定义 <code>uri</code> 的主机部分 <br><code>pathPattern</code> 匹配，这个可有可无，没有也毫无影响。</p><p>看看成果:</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1flzgosz8soj30np0xcawn.jpg" alt="http://harchiko.qiniudn.com/2016-08-22intent.png"></p><p>Looks Great!</p>]]></content>
      
      <categories>
          
          <category> android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Android 本地变量存储 (API Key 等)</title>
      <link href="/2016/08/22/android_local_properties/"/>
      <url>/2016/08/22/android_local_properties/</url>
      <content type="html"><![CDATA[<p>处于方便替换和隐藏信息的原因，需要讲一些诸如 API KEY 之类的本地变量单独存储。<br><a id="more"></a></p><h2 id="定义"><a href="# 定义" class="headerlink" title="定义"></a>定义 </h2><p> 在<code>gradle.properties</code>中定义所需要存储的变量 </p><p> 如: <code>ApiKey=&quot;xxxxxxxxxxxxxxxxxxx&quot;</code></p><h2 id="配置"><a href="# 配置" class="headerlink" title="配置"></a>配置 </h2><p> 在 build.gradle(app) 中将变量保存到 BuildConfig 中 添加（放到 buildTypes 之外）:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">buildTypes.<span class="keyword">each</span> &#123;</span><br><span class="line">    it.buildConfigField <span class="string">'String'</span>, <span class="string">'API_KEY'</span>, ApiKey</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用"><a href="# 使用" class="headerlink" title="使用"></a>使用 </h2><p> 这样，就可以在源码中使用 <code>BuildConfig.API_KEY</code> 来调用此变量了。</p>]]></content>
      
      <categories>
          
          <category> android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>\&quot;&gt; /dev/null 2&gt;&amp;1\&quot; 什么意思？</title>
      <link href="/2016/06/26/what-does-this-mean/"/>
      <url>/2016/06/26/what-does-this-mean/</url>
      <content type="html"><![CDATA[<p> 很长一段时间以来，我一直无法理解这个命令，我能大概猜测出 <code>&gt;/dev/null</code> 意思是将输出隐藏，但还是不能理解 <code>2&gt;&amp;1</code> 的意思。</p><a id="more"></a><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1flzgmyiqahj31f81akt9x.jpg" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-06-26%20at%2012.37.26%20AM.png"></p><p> 举例来说:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -f origin master &gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure><p> 这是一个简单的 <code>git push</code> 脚本, 用于 Travis 自动构建过程中隐藏信息。</p><p><code>&gt;</code> is for redirect</p><p><code>/dev/null</code> is a black hole where any data sent, will be discarded</p><p><code>2</code> is the file descriptor for Standard Error</p><p><code>&gt;</code> is for redirect</p><p><code>&amp;</code> is the symbol for file descriptor (without it, the following 1 would be considered a filename)</p><p><code>1</code> is the file descriptor for Standard Out</p><p>Therefore &gt;/dev/null 2&gt;&amp;1 is redirect the output of your program to /dev/null. Include both the Standard Error and Standard Out.</p><p> 所以， <code>/dev/null 2&gt;&amp;1</code> 将所有的输出重定向到 /dev/null 中，标准错误和输出都不会显示。</p><p> 那么， <code>&gt; /dev/null</code> 是什么意思呢就不难猜出吧？</p><blockquote><p><code>&gt; /dev/null</code> 即标准输出不显示，标准错误正常显示。</p></blockquote><p> 参考文章:</p><ol><li><a href="http://www.xaprb.com/blog/2006/06/06/what-does-devnull-21-mean/" target="_blank" rel="noopener">http://www.xaprb.com/blog/2006/06/06/what-does-devnull-21-mean/</a></li><li><a href="http://unix.stackexchange.com/questions/163352/what-does-dev-null-21-mean-in-this-article-of-crontab-basics" target="_blank" rel="noopener">http://unix.stackexchange.com/questions/163352/what-does-dev-null-21-mean-in-this-article-of-crontab-basics</a></li></ol>]]></content>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>牙齿正畸二三事</title>
      <link href="/2016/06/23/the_doctors/"/>
      <url>/2016/06/23/the_doctors/</url>
      <content type="html"><![CDATA[<p>在知乎上看了这篇: <a href="http://daily.zhihu.com/story/8472239" target="_blank" rel="noopener">http://daily.zhihu.com/story/8472239</a>文章，想到了自己正畸的事情，决定记录一下 </p><a id="more"></a><p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1flzgoxgrt9j30ds08adg8.jpg" alt="http://harchiko.qiniudn.com/192851_f496.jpg"></p><h3 id="洗牙"><a href="# 洗牙" class="headerlink" title="洗牙"></a> 洗牙 </h3><p> 正畸之前，医生说要先去洗了牙，然后再去医院。我就去了校医院规规矩矩洗了牙，后来想到自己脚上有个疣，反正来了，顺便去看看吧，然后就把疣给切掉了，打电话给医院，护士接的，我说不能过去了，麻烦找下主治医生，护士说了句好的，不能来了没事，就挂掉了电话。</p><p>切了疣之后，我就不怎么能自由行动了。大概多了一个月后，4 月 20 日雅安地震时，我跑去了医院。主治医生说，还以为你不来了……</p><p>我心里想着，差点因为护士误事，有些事情还是要找到自己的医生亲自说清楚，毕竟除了你自己，没人对你的事情当事儿。</p><h3 id="拔牙"><a href="# 拔牙" class="headerlink" title="拔牙"></a>拔牙 </h3><p> 牙齿很多，需要拔牙才能继续进行治疗，于是早上早早排队，拔牙，挂了普通号，一气呵成，两颗牙就完了，医生嘱咐了几句事情，也没拿药，过了几天好了。</p><p>因为总共要拔四颗，还需要再拔两颗，我的正畸医师 Y 医生（下称 Y 医生）帮我把托槽取下，我拿着大早上挂的专家号就去拔牙了（ 挂专家号纯属挂号人员自作主张给我挂的，比普通号贵几倍，我其实觉得普通号就好了），然后就是一场噩梦：</p><p>专家后面跟着两个实习生，签了手术知情书之后，实习生帮我打麻药时跟另外一个实习生说这是她第一次打麻药，另外一个实习生拔牙的时候说这是她第一次给人拔牙。我 TM 都快崩溃了，姑且信你们一次，实习生手法不行，也不熟练，拔起来特别遭罪，拔着拔着，专家对着拔牙的实习生说你拔哪个呢，那两个托槽不是取下来了吗？我又崩溃……</p><p>拔完一个专家让我走，我说你两个都给我拔了吧，专家不肯，我心想着上次普通号医生利索的就给我拔了，你这为啥要搞两次？再三要求下，第二颗也拔了。</p><p>拔完之后我想把牙齿要回来，没什么，我看到实习生准备好了瓶子准备收藏，就是不想给这两个实习生，我有怨念，结果其中一个实习生过来跟我商量，能不能给她一个保存，我不懂得怎么拒绝人，就给了她，但打心里，我是不舒服的，你都差点给我拔错牙。<br>后来专家又给我开了一堆中成药，加起来又是上百块，取了药之后，回去的路上我就丢到了垃圾桶。</p><p>自此，对专家这个词有了抵触的感觉。</p><h3 id="打种植钉"><a href="# 打种植钉" class="headerlink" title="打种植钉"></a>打种植钉 </h3><p> 因为一直不知因为什么原因，没有打种植钉，在某天，跟 Y 医生约好了打种植钉，因为上次拔牙的原因，我对这个真是想躲，你想啊，一个钉子钉在牙上面，能不怕吗？</p><p>反正早晚都是要做的，风萧萧兮易水寒，壮士一去兮不复还…..</p><p>打种植钉是 Y 医生跟一位男医生一起的，Y 医生打完第一颗之后，只是觉得有点疼，但我觉得，疼难道不是应该的吗？本着不给医生添麻烦的态度，我啥话没说，默默忍着。然后开始打第二颗，第二颗男医生给我打的，直到第二颗打好，我都没觉得第二颗疼，于是问了医生，难道不应该疼吗？医生说那块骨头上没有痛觉神经，不会痛的。<br>我赶快跟医生说我第一颗非常痛的事实，然后钉子取出来重新打，再男医生帮助下重新打了 2、3 次之后，终于钉子不再痛了。我要松一口气时，医生想拍一下记录下来，因为 Y 医生平时对我很冷淡，但那天 Y 医生跟我说了很多话，本着跟医生搞好关系，做一个遵纪守法的好患者的思想，我赶忙说可以，然后我又忍着疼痛，让他们拍摄了这次打种植钉的视频。</p><p>然而后来 Y 医生对我态度并没有好一些，倒是男医生在近 2 年之后，也就 2016 年 4 月份时看了下我的牙认出了我（感激涕零）。</p><h3 id="托槽掉了"><a href="# 托槽掉了" class="headerlink" title="托槽掉了"></a>托槽掉了 </h3><p> 因为使用电动牙刷的原因，托槽掉了，Y 医生在帮我做完之后，给我重新粘托槽时不断跟我说我浪费了她的时间，耽误了她好长时间，我挺委屈的，但之后就再也没怎么用过电动牙刷，生怕再添麻烦。</p><h3 id="更换 Y 医生"><a href="# 更换 Y 医生" class="headerlink" title="更换 Y 医生"></a>更换 Y 医生 </h3><p> 因为跟女朋友的原因，跑到了南京，之后便开始了每个月回成都复诊的旅程。由于要请假坐动车，我跟 Y 医生说最好是周一或者周五，Y 医生每次都当作没听到一样，给我安排个周二，周三，我再坚持一下，Y 医生带着不悦给我调换，但偶尔也不愿意挑换就让我周二或周三过去。</p><p>医生忙的很，没办法安排到这样的时间我也很理解。毕竟，这是我自己的事情。给人添麻烦我也不是很好意思。</p><p>然而我每次看牙的时候，Y 医生呢很不负责任（其实我开始不知道那是不是负责任，只觉得既然我什么都不懂，那就听医生的吧)，每次花费 12 小时的高铁过去，医生花费 15 分钟帮我紧了一下。</p><p>后来有一次，我因为有一次 Y 医生没时间，把我委托给另外一个医生 H（下称为 H）来做。我才知道，原来医生不全都是那样的，还有这么用心跟负责任的。我心里想着，要是我的医生这么负责任就好了。</p><p>再后来因为时间的问题（高铁要提前订票，不然订不到），跟 Y 医生没约好，Y 医生呢，也很不耐烦。我纠结了一整天，跟女朋友商量了半天，虽然不想让医生觉得自己是个很难搞的患者，但是最后还是给主治医生打了电话。说明了事件的情况，顺便，还跟主治医生提到想换个帮我治疗医生的要求。我说： 上回帮我治疗的那个医生叫“欢欢”的就很好，我不知道她具体叫什么名字，能帮我安排给她吗？</p><p>主治说要了解下情况后面给我答复，后来，我得偿所愿，我就转给了这位 H 医生。</p><p>H 医生非常之负责任，她会记得我每次要很远赶过来，会帮我安排周一或周五的日子，她帮我治疗时会非常照顾我的感受，就像是本来就应该那样似的。H 医生还知道我离的比较远针对这些提出了一些解决的方法，主动帮我解决问题。</p><p>Y 医生呢，后来离开了医院，去了 <code>Hopkins</code>(全球顶尖的医学院) 深造去了，正好我复诊，看到了她与患者告别，那时我已经转到 H 医生那里，看着她的患者跟她关系那么好，我其实心里挺酸的，因为我没有那种感觉，在我印象中，她跟我交流时间几乎没有，也不会问我情况，我咨询问题她也爱理不理。<br>然而，她去了 <code>Hopkins</code>……</p><p> 希望 Y 只是对我不负责任罢!</p><p>直到现在 H 医生还在给我治疗，每次去成都都跟朋友说： 医生跟医生就是不一样啊！</p><h3 id="外传"><a href="# 外传" class="headerlink" title="外传"></a>外传 </h3><p> 我女朋友也是医生，影像科，有的时候她冲我抱怨科里的一些医生乱开检查，明明是拍胸片就行了，却让患者全身都拍一顿，反正，这都是收入。</p><p>我爸生病，女朋友第一时间跟我说，让我联系下有没有医院认识的医生，因为如果没有的话，很多医生开药的原则是： 有贵的就开贵的……<br>她作为医生，对医生这个群体，并不信任。</p><p>我很尊敬医生这个行业，我的朋友，同学，很多都是做医生的，医生这个行业在国内不好做，患者难缠，工资水平又低。</p><p>但我真心希望，医生能够肩负起自己的责任，医生这个群体出了问题，岂是一两个蛀虫的问题？</p><p>也希望患者们能够理解医生，作为同等学历中赚钱更低的医生这个行业，他们不是服务行业 (女朋友看了文章之后说她们是服务行业)，给予起码的尊重吧。</p><p> 最后，祝各位身体健康。</p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>Android About Page 生成</title>
      <link href="/2016/06/13/android_about_page_lib/"/>
      <url>/2016/06/13/android_about_page_lib/</url>
      <content type="html"><![CDATA[<p>在写 Android 程序时经常需要写 About Page 来介绍公司状况，以及联系方式等，这个库能让你在 <strong>2 分钟</strong> 之内完成 About Page 的编写。</p><a id="more"></a><p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1flzgurhyulj30r30gogp1.jpg" alt="http://harchiko.qiniudn.com/android_about_page_cover.png"></p><h2 id="安装"><a href="# 安装" class="headerlink" title="安装"></a>安装 </h2><p>Available on Jcenter, Maven and JitPack</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">'com.github.medyo:android-about-page:1.0.8'</span></span><br></pre></td></tr></table></figure><h2 id="用法"><a href="# 用法" class="headerlink" title="用法"></a> 用法 </h2><h3 id="1-Add-Description"><a href="#1-Add-Description" class="headerlink" title="1. Add Description"></a>1. Add Description</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setDescription(String)</span><br></pre></td></tr></table></figure><h3 id="2-Add-Image"><a href="#2-Add-Image" class="headerlink" title="2. Add Image"></a>2. Add Image</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setImage(Int)</span><br></pre></td></tr></table></figure><h3 id="3-Add-predefined-Social-network"><a href="#3-Add-predefined-Social-network" class="headerlink" title="3. Add predefined Social network"></a>3. Add predefined Social network</h3><p>The library has already some predefined social networks like :</p><ul><li>Facebook</li><li>Twitter</li><li>Instagram</li><li>Youtube</li><li>PlayStore</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">addFacebook(String PageID)</span><br><span class="line">addTwitter(String AccountID)</span><br><span class="line">addYoutube(String AccountID)</span><br><span class="line">addPlayStore(String PackageName)</span><br><span class="line">addInstagram(String AccountID)</span><br><span class="line">addGitHub(String AccountID)</span><br></pre></td></tr></table></figure><h3 id="4-Add-Custom-Element"><a href="#4-Add-Custom-Element" class="headerlink" title="4. Add Custom Element"></a>4. Add Custom Element</h3><p>For example <code>app version</code> :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Element versionElement = <span class="keyword">new</span> Element();</span><br><span class="line">versionElement.setTitle(<span class="string">"Version 6.2"</span>);</span><br><span class="line">addItem(versionElement)</span><br></pre></td></tr></table></figure><h3 id="5-Available-attributes-for-Element-Class"><a href="#5-Available-attributes-for-Element-Class" class="headerlink" title="5. Available attributes for Element Class"></a>5. Available attributes for Element Class</h3><table><thead><tr><th>Function</th><th style="text-align:center">Description</th></tr></thead><tbody><tr><td>setTitle(String)</td><td style="text-align:center">Set title of the element</td></tr><tr><td>setColor(Int)</td><td style="text-align:center">Set color of the element</td></tr><tr><td>setIcon(Int)</td><td style="text-align:center">Set icon of the element</td></tr><tr><td>setValue(String)</td><td style="text-align:center">Set Element value like Facebook ID</td></tr><tr><td>setTag(String)</td><td style="text-align:center">Set a unique tag value to the element</td></tr><tr><td>setIntent(Intent)</td><td style="text-align:center">Set an intent to be called on <code>onClickListener</code></td></tr><tr><td>setGravity(Gravity)</td><td style="text-align:center">Set a Gravity for the element</td></tr><tr><td>setOnClickListener(View.OnClickListener)</td><td style="text-align:center">If <code>intent</code> isn’t suitable for you need, implement your custom behaviour by overriding the click listener</td></tr></tbody></table><h2 id="Sample-Project"><a href="#Sample-Project" class="headerlink" title="Sample Project"></a>Sample Project</h2><p><a href="https://github.com/medyo/android-about-page/tree/master/app" target="_blank" rel="noopener">medyo/android-about-page/app/</a></p><hr><p> 以上说明来自 github</p><h2 id="配置 -image- 大小属性"><a href="# 配置 -image- 大小属性" class="headerlink" title="配置 image 大小属性"></a>配置 image 大小属性 </h2><p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1flzguwzojyj31ew0o2dqi.jpg" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-06-13%20at%2010.40.04%20AM.png"></p><p> 可以看到在库文件中 <code>style.xml</code> 中定义了各元素的属性，在自己的项目中添加 style 属性即可。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"about_image"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:layout_width"</span>&gt;</span>match_parent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:layout_height"</span>&gt;</span>match_parent<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:adjustViewBounds"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:scaleType"</span>&gt;</span>centerInside<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:layout_weight"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:gravity"</span>&gt;</span>center_horizontal<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:padding"</span>&gt;</span>100dp<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>顺便，关于 android 图片缩小且不失比例的方法见链接: <a href="http://stackoverflow.com/questions/8232608/fit-image-into-imageview-keep-aspect-ratio-and-then-resize-imageview-to-image-d" target="_blank" rel="noopener">http://stackoverflow.com/questions/8232608/fit-image-into-imageview-keep-aspect-ratio-and-then-resize-imageview-to-image-d</a></p><h2 id="配置 Description"><a href="# 配置 Description" class="headerlink" title="配置 Description"></a>配置 Description</h2><p>同理，配置 Description 等在 ｀String.xml｀ 中定义好即可。</p>]]></content>
      
      <categories>
          
          <category> android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> android </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>使用 lantern 畅游互联网</title>
      <link href="/2016/05/30/install_lantern_on_raspberry_pi/"/>
      <url>/2016/05/30/install_lantern_on_raspberry_pi/</url>
      <content type="html"><![CDATA[<p>就在昨天，一直使用的 shadowsocks 的 VPS 到期了，临时试用 lantern 来应急，结果发现 lantern 竟然比我一直在用的 shadowsocks 速度还快。</p><a id="more"></a><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1flzgmws3xlj31bu14oq6x.jpg" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-05-30%20at%202.54.45%20AM.png"></p><h2 id="lantern"><a href="#lantern" class="headerlink" title="lantern"></a>lantern</h2><blockquote><p>Lantern, a new software programme which allows internet users to circumvent government-imposed censorship, is seeing rapid growth in China as more people are using it to bypass the Great Firewall of China to access websites like Facebook, YouTube and Twitter.</p></blockquote><p>简言之，专为中国不能上网的宝宝设计！就是为我设计的！</p><h2 id="下载"><a href="# 下载" class="headerlink" title="下载"></a>下载 </h2><p> 下载地址: <a href="https://getlantern.org/" target="_blank" rel="noopener">https://getlantern.org/</a></p><p>呃…网站好像访问不了？</p><p>哦，那就对了，贴心的我给你准备了下载链接！不用谢！</p><p>Mac 客户端: <a href="https://mega.nz/#!gBthnBCI!7mhorsXKWbZgsJvp4BYoEn6ulEj8ZSke1pFczKW4Tf0" target="_blank" rel="noopener">https://mega.nz/#!gBthnBCI!7mhorsXKWbZgsJvp4BYoEn6ulEj8ZSke1pFczKW4Tf0</a></p><p>Android 客户端: <a href="https://mega.nz/#!FM0XCR4Q!nvNyQaZU3o76eAg_OzJMgzimZf8XokjCkglbAdOcZ9g" target="_blank" rel="noopener">https://mega.nz/#!FM0XCR4Q!nvNyQaZU3o76eAg_OzJMgzimZf8XokjCkglbAdOcZ9g</a></p><p>Windows 客户端: 呃，我手头没有 windows 设备，暂时没下下来。</p><p>除了 ios ， 各种客户端都有。</p><h2 id="For-Raspberry-Pi"><a href="#For-Raspberry-Pi" class="headerlink" title="For Raspberry Pi"></a>For Raspberry Pi</h2><p>如果只是简简单单的下载使用，也就没有这篇文章了。下面介绍下如何在 pi 上安装，并用 pi 作为翻墙代理。</p><p>直接使用网上别人打包好的树莓派版本的包: 下载地址: <a href="https://mega.nz/#!IZdE2Yxa!HU7PBAuRQdUomS5MIt0VvFgB2K3Upv-bdrd4o0UHY98" target="_blank" rel="noopener">https://mega.nz/#!IZdE2Yxa!HU7PBAuRQdUomS5MIt0VvFgB2K3Upv-bdrd4o0UHY98</a> 下载 lantern*.deb 放到你的树莓派中。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dpkg -i lantern_2.2.4-1_armhf.deb</span><br><span class="line">sudo systemctl start lantern</span><br><span class="line">sudo systemctl <span class="built_in">enable</span> lantern</span><br></pre></td></tr></table></figure><p>设定完毕后运行 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -x https://127.0.0.1:8787 https://www.google.com/</span><br></pre></td></tr></table></figure><p> 查看是否正常设置 </p><h2 id="Chrome- 设定"><a href="#Chrome- 设定" class="headerlink" title="Chrome 设定"></a>Chrome 设定</h2><p>lantern 就是有一点不好，如果上的是国内网站的话，他跑的比谁都慢！</p><p> 设定下 </p><ol><li>chrome 安装 SwitchySharp</li><li> 设定代理地址，刚刚你树莓派的 ip，端口 8787</li><li>在 AutoProxy 那里设定 online rules: <a href="https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt" target="_blank" rel="noopener">https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt</a></li><li>设定，当符合 online rules 时，使用代理。</li><li>保存，并切换到 Autoproxy</li></ol><p>好了，保存 </p><h2 id="题外"><a href="# 题外" class="headerlink" title="题外"></a> 题外 </h2><p>lantern 在本地运行在 8787 端口，这意味着你可以用它来代理你的 Dropbox ， 使用 Proxifier 来代理你的一切流量。</p><p> 好了，暂且就到这里，去睡觉了！</p>]]></content>
      
      <categories>
          
          <category> raspberry </category>
          
      </categories>
      
      
        <tags>
            
            <tag> raspberry </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>在树莓派中安装 docker</title>
      <link href="/2016/05/29/run_docker_on_raspberry_pi/"/>
      <url>/2016/05/29/run_docker_on_raspberry_pi/</url>
      <content type="html"><![CDATA[<p> 一直以为树莓派中没有办法安装 docker , 今天在一位博主的博客中看到有在树莓派中使用。</p><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 docker</span></span><br><span class="line">wget https://github.com/vimagick/rpi-bin/\</span><br><span class="line">raw/master/deb/docker_1.10.3-1_armhf.deb  </span><br><span class="line">dpkg -i docker_1.10.3-1_armhf.deb</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># 安装 docker-compose</span></span><br><span class="line">wget https://github.com/vimagick/rpi-bin/\</span><br><span class="line">raw/master/deb/docker-compose_1.7.1-1_armhf.deb</span><br><span class="line">dpkg -i docker-compose_1.7.1-1_armhf.deb</span><br></pre></td></tr></table></figure><p> 参考连接: <a href="https://blog.easypi.info/deploying-shadowsocks-with-docker/" target="_blank" rel="noopener">https://blog.easypi.info/deploying-shadowsocks-with-docker/</a></p>]]></content>
      
      <categories>
          
          <category> raspberry </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Git 同时推送到两个不同的 remote</title>
      <link href="/2016/05/08/git_push_to_two_remotes/"/>
      <url>/2016/05/08/git_push_to_two_remotes/</url>
      <content type="html"><![CDATA[<p>近期遇到需要将 git 推送到不同的 git 在线服务商的问题，所以查找了下资料.</p><a id="more"></a><p>在最新版本的 git 中，可以这么做:</p><h3 id="配置"><a href="# 配置" class="headerlink" title="配置"></a>配置 </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote <span class="built_in">set</span>-url --add --push origin git://original/repo.git</span><br><span class="line">git remote <span class="built_in">set</span>-url --add --push origin git://another/repo.git</span><br></pre></td></tr></table></figure><h3 id="效果图"><a href="# 效果图" class="headerlink" title="效果图"></a> 效果图 </h3><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1flzgmrcsl0j31be0i0why.jpg" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-05-08%20at%208.48.19%20PM.png"></p><h3 id="参考链接"><a href="# 参考链接" class="headerlink" title="参考链接"></a> 参考链接</h3><p><a href="http://stackoverflow.com/questions/14290113/git-pushing-code-to-two-remotes" target="_blank" rel="noopener">http://stackoverflow.com/questions/14290113/git-pushing-code-to-two-remotes</a></p>]]></content>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>如何在多设备中同步</title>
      <link href="/2016/05/08/sync_between_mutiple_devices/"/>
      <url>/2016/05/08/sync_between_mutiple_devices/</url>
      <content type="html"><![CDATA[<p>我有一个很奇怪的需求，在不同的 device 中同步 PDF 的阅读标注。第一时间，我就想到了神器 Bittorrent Sync。</p><a id="more"></a><p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1flzgnzoc6vj30740743yi.jpg" alt="http://harchiko.qiniudn.com/BTSync.png"></p><p>btsync 是 bittorrent 旗下的一款同步软件，其特点是不需要有一个中央同步服务器即可进行同步。你可以想象成网盘，也可以想象成它是分布式存储。</p><h3 id="安装"><a href="# 安装" class="headerlink" title="安装"></a>安装 </h3><p>Android、iOS、Windows、OSX 下安装基本都是点点鼠标就可以了。</p><p> 说一下树莓派上安装 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/.btsync &amp;&amp; <span class="built_in">cd</span> ~/.btsync</span><br><span class="line">wget https://download-cdn.getsync.com/stable/linux-arm/BitTorrent-Sync_arm.tar.gz</span><br><span class="line">btsync</span><br></pre></td></tr></table></figure><p> 命令行输出如下:</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1flzgo1yddej31i0074jtg.jpg" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-05-08%20at%2011.00.22%20AM.png"></p><p>通过 VNC 连进去，进入 127.0.0.1:8888 按照说明进行配置。</p><p>添加需要同步的文件夹，然后在其他客户端上进行配置（扫码或者直接打开链接), 主意，如果你像我一样需要在各个设备上同步进度，请选择 Read &amp; Write 权限。</p><h3 id="配上全家福的图"><a href="# 配上全家福的图" class="headerlink" title="配上全家福的图:"></a>配上全家福的图:</h3><p>OSX：</p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1flzgo3u3z4g312i0jeb29.gif" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-05-08%20at%2011.06.45%20AM.png"></p><p>S7 edge:</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1flzgo5hb5lj31401z4wg9.jpg" alt="http://harchiko.qiniudn.com/252222861.jpg"></p><p>Raspberry Pi:</p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1flzgoa6cmyj31kw18vwmu.jpg" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-05-08%20at%2011.11.20%20AM.png"></p><p>NOOK HD +:</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1flzgobpt1gj30zk1hcmy3.jpg" alt="http://harchiko.qiniudn.com/Screenshot_2016-05-08-11-12-58.png"></p><h3 id="结论"><a href="# 结论" class="headerlink" title="结论"></a>结论 </h3><p> 经局域网测试，修改之后 PDF 的标注会很快同步到其他设备中。能满足我的要求。</p>]]></content>
      
      <categories>
          
          <category> raspberry </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> sync </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>15 分钟开发一个 Chrome App 【二】</title>
      <link href="/2016/04/24/create-chrome-web-app-in-15-minutes-2/"/>
      <url>/2016/04/24/create-chrome-web-app-in-15-minutes-2/</url>
      <content type="html"><![CDATA[<p>本文将之前的简单 APP 优化了一小步.</p><a id="more"></a><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1flzgryh0tpj303k03k3yd.jpg" alt="http://harchiko.qiniudn.com/wechat128.png"></p><blockquote><p>因为 Mac 下微信实在是难用，还不如直接使用网页版的，找了一圈 Chrome App Store，竟然找不到一个简单的跳转微信的 APP，心想着也不会太难，就自己动起了手。</p></blockquote><h3 id="TL-DR"><a href="#TL-DR" class="headerlink" title="TL;DR"></a>TL;DR</h3><p>你可以在这里直接下载 <a href="https://github.com/zhaochunqi/wechat_chrome_app/releases/tag/v0.2" target="_blank" rel="noopener">https://github.com/zhaochunqi/wechat_chrome_app/releases/tag/v0.2</a></p><h3 id="优化"><a href="# 优化" class="headerlink" title="优化"></a>优化 </h3><p> 之前的版本实在是太简单了，虽然能满足自己的要求，但还是希望有一点改变。</p><ol><li>能够弹出新窗口。</li><li>能够使用一个合适微信大小的窗口，并且不能随意的 resize。</li></ol><h3 id="修改"><a href="# 修改" class="headerlink" title="修改"></a>修改 </h3><ol><li> 弹出新窗口，添加 container:panel</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"WeChat"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">"WeChat Bookmark"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.2"</span>,</span><br><span class="line">  <span class="attr">"manifest_version"</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">"app"</span>: &#123;</span><br><span class="line">    <span class="attr">"urls"</span>: [</span><br><span class="line">      <span class="string">"http://blog.zhaochunqi.com"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"launch"</span>: &#123;</span><br><span class="line">      <span class="attr">"web_url"</span>: <span class="string">"http://web.wechat.com"</span>,</span><br><span class="line">      <span class="attr">"container"</span>: <span class="string">"panel"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"icons"</span>: &#123;</span><br><span class="line">    <span class="attr">"128"</span>: <span class="string">"wechat128.png"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>更改窗口大小，如何确定怎么更改窗口大小更合适呢？</li></ol><p>简单，更改下窗口大小，chrome 中审查下元素:</p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1flzgs18n92j30me0h8dkz.jpg" alt="http://harchiko.qiniudn.com/%E6%88%AA%E5%9B%BE%202016-04-24%2021%E6%97%B651%E5%88%8611%E7%A7%92.jpg"></p><p>确定大小后:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"WeChat"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">"WeChat Bookmark"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.2"</span>,</span><br><span class="line">  <span class="attr">"manifest_version"</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">"app"</span>: &#123;</span><br><span class="line">    <span class="attr">"urls"</span>: [</span><br><span class="line">      <span class="string">"http://blog.zhaochunqi.com"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"launch"</span>: &#123;</span><br><span class="line">      <span class="attr">"web_url"</span>: <span class="string">"http://web.wechat.com"</span>,</span><br><span class="line">      <span class="attr">"container"</span>: <span class="string">"panel"</span>,</span><br><span class="line">      <span class="attr">"height"</span>: <span class="number">700</span>,</span><br><span class="line">      <span class="attr">"width"</span>: <span class="number">860</span>,</span><br><span class="line">      <span class="attr">"minHeight"</span>: <span class="number">700</span>,</span><br><span class="line">      <span class="attr">"minWidth"</span>: <span class="number">860</span>,</span><br><span class="line">      <span class="attr">"maxHeight"</span>: <span class="number">700</span>,</span><br><span class="line">      <span class="attr">"maxWidth"</span>: <span class="number">860</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"icons"</span>: &#123;</span><br><span class="line">    <span class="attr">"128"</span>: <span class="string">"wechat128.png"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>参考连接：<a href="http://stackoverflow.com/questions/22479716/fixed-window-size-for-chrome-web-app" target="_blank" rel="noopener">http://stackoverflow.com/questions/22479716/fixed-window-size-for-chrome-web-app</a></p></blockquote><p>来看下效果:</p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1flzgsksar1j31kw1ej4qp.jpg" alt="http://harchiko.qiniudn.com/sfdasdfasdfasdfasdfasdf.jpg"></p><p>只能说： 完美 ~</p><p>美中不足的是好像那个地址栏有点多余, 然而查阅资料，为了安全考虑正常方法已经无法隐藏地址栏了，链接: <a href="http://stackoverflow.com/questions/15230137/hide-bar-address-in-popup-chrome" target="_blank" rel="noopener">http://stackoverflow.com/questions/15230137/hide-bar-address-in-popup-chrome</a></p><h3 id="打个包"><a href="# 打个包" class="headerlink" title="打个包"></a>打个包 </h3><p> 打包其实很简单，打开插件页，点击打包即可 </p><p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1flzgsp6ggkj319c0f8tb2.jpg" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-04-24%20at%2010.01.36%20PM.png"></p><p> 第一次的话 private key 是不需要填写的，它会帮你生成一个，注意保存，如果不需要上传到 Chrome App Store 我估计也没啥问题。</p><p>源码在这里: <a href="https://github.com/zhaochunqi/wechat_chrome_app" target="_blank" rel="noopener">https://github.com/zhaochunqi/wechat_chrome_app</a></p>]]></content>
      
      <categories>
          
          <category> develper </category>
          
      </categories>
      
      
        <tags>
            
            <tag> chrome </tag>
            
            <tag> developer </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>15 分钟开发一个 Chrome App【一】</title>
      <link href="/2016/04/24/create-chrome-web-app-in-15-minutes/"/>
      <url>/2016/04/24/create-chrome-web-app-in-15-minutes/</url>
      <content type="html"><![CDATA[<blockquote><p>本文介绍了如何在很短的时间内开发一个 Chrome APP.</p></blockquote><a id="more"></a><p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1flzgtn2qw6j30oa0tkq6r.jpg" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-04-24%20at%2012.53.40%20PM.png"></p><h2 id="准备图标"><a href="# 准备图标" class="headerlink" title="准备图标"></a>准备图标 </h2><p> 网上搜索一个图标，这里使用微信的图标 </p><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1flzgtpbujxj303k03k3yd.jpg" alt="http://harchiko.qiniudn.com/wechat128.png"></p><h2 id="创建 -manifest-json- 文件"><a href="# 创建 -manifest-json- 文件" class="headerlink" title="创建 manifest.json 文件"></a> 创建 manifest.json 文件 </h2><p> 创建一个文件夹，在文件夹中添加 <code>manifiest.json</code>。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"name"</span>: <span class="string">"WeChat"</span>,</span><br><span class="line"><span class="attr">"description"</span>: <span class="string">"Just A Wechat Web App"</span>,</span><br><span class="line"><span class="attr">"version"</span>: <span class="string">"0.1"</span>,</span><br><span class="line"><span class="attr">"manifest_version"</span>: <span class="number">2</span>,</span><br><span class="line"><span class="attr">"app"</span>: &#123;</span><br><span class="line"><span class="attr">"urls"</span>: [<span class="string">"http://blog.zhaochunqi.com"</span>],</span><br><span class="line"><span class="attr">"launch"</span>: &#123;</span><br><span class="line"><span class="attr">"web_url"</span>: <span class="string">"http://web.wechat.com"</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">"icons"</span>: &#123;</span><br><span class="line"><span class="attr">"128"</span>: <span class="string">"wechat128.png"</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>注意：</strong> manifest_version 需要是 2。</p></blockquote><h3 id="测试"><a href="# 测试" class="headerlink" title="测试"></a>测试 </h3><p> 打开 Chrome 的扩展界面，勾选 <code>Developer Mode</code>, 点击 <code>Load unpacked extention</code>, 找到文件夹：</p><p><img src="https://ws3.sinaimg.cn/large/006tNc79ly1flzgtvkf2fj317s09m0u6.jpg" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-04-24%20at%201.03.21%20PM.png"></p><p>打开 Chrome App Launcher，你的应用已在其中:</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1flzgu1nzbqj30ly0rqadn.jpg" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-04-24%20at%201.03.57%20PM.png"></p><p>点击后跳转到 微信界面。</p><p>Easy, hah?</p><p>源码在这里: <a href="https://github.com/zhaochunqi/wechat_chrome_app" target="_blank" rel="noopener">https://github.com/zhaochunqi/wechat_chrome_app</a></p>]]></content>
      
      <categories>
          
          <category> developer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> chrome </tag>
            
            <tag> developer </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>从零开始将树莓派打造成家用下载机【二】 BT 下载篇</title>
      <link href="/2016/04/22/raspberry-pi-as-nas-server2/"/>
      <url>/2016/04/22/raspberry-pi-as-nas-server2/</url>
      <content type="html"><![CDATA[<p>本篇介绍一下如何使用树莓派进行下载。<br><a id="more"></a></p><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1flzguzeapoj30j40a176t.jpg" alt="http://harchiko.qiniudn.com/Pi_3_Model_B.png"></p><h2 id="准备工作 - 换源"><a href="# 准备工作 - 换源" class="headerlink" title="准备工作 换源"></a>准备工作 换源 </h2><p> 出于速度考虑，将系统默认的源修改为 中科大源 </p><ol><li> 备份 <code>cp /etc/apt/sources.list /etc/apt/sources.list.bak</code></li><li><p>修改文本 <code>/etc/apt/sources.list</code> :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deb http://mirrors.ustc.edu.cn/raspbian/raspbian/ jessie main contrib non-free rpi</span><br></pre></td></tr></table></figure></li><li><p>更新 <code>sudo apt-get update</code></p></li></ol><h2 id="树莓派上安装 -Deluge- 客户端"><a href="# 树莓派上安装 -Deluge- 客户端" class="headerlink" title="树莓派上安装 Deluge 客户端"></a>树莓派上安装 Deluge 客户端 </h2><p> 命令行输入如下命令安装 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install deluged</span><br><span class="line"></span><br><span class="line">sudo apt-get install deluge-console</span><br></pre></td></tr></table></figure><p> 启动 deluge, 并杀掉进程（创建配置文件)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">deluged</span><br><span class="line"></span><br><span class="line">sudo pkill deluged</span><br></pre></td></tr></table></figure><p>备份配置文件 <br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp ~/.config/deluge/auth ~/.config/deluge/auth.old</span><br><span class="line"></span><br><span class="line">vi ~/.config/deluge/auth</span><br></pre></td></tr></table></figure><p></p><p> 按如下格式添加配置:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user:password:level</span><br></pre></td></tr></table></figure><p>上面的用户名、密码、level 级别（具体这个选项我也不知道什么等级对应什么功能,10 全功能），方便起见使用:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pi:raspberry:10</span><br></pre></td></tr></table></figure><p>保存之后重新启动 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">deluged</span><br><span class="line"></span><br><span class="line">deluge-console</span><br></pre></td></tr></table></figure><p> 进入交互式界面 </p><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1flzgv256b9j30ag06haae.jpg" alt="http://harchiko.qiniudn.com/376x233x2013-03-24_163942.jpg.pagespeed.gp+jp+jw+pj+js+rj+rp+rw+ri+cp+md.ic.68wn4b8TgH.jpg"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">config -s allow_remote True</span><br><span class="line"></span><br><span class="line">config allow_remote</span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure><p> 以上命令开启了远程链接 </p><p> 现在，重启 deluge 使配置生效 </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pkill deluged</span><br><span class="line"></span><br><span class="line">deluged</span><br></pre></td></tr></table></figure><p> 到这里，实际上树莓派上的工作已经做完了，现在进行电脑上的操作 </p><h2 id="电脑安装 -Deluge- 客户端"><a href="# 电脑安装 -Deluge- 客户端" class="headerlink" title="电脑安装 Deluge 客户端"></a> 电脑安装 Deluge 客户端 </h2><ol><li><p> 下载 Deluge: <a href="http://dev.deluge-torrent.org/wiki/Download" target="_blank" rel="noopener">http://dev.deluge-torrent.org/wiki/Download</a></p></li><li><p>安装好之后，打开 Preferences-&gt;Interface，取消勾选 Classic Mode 下的 Enable。</p><p><img src="http://harchiko.qiniudn.com/537x271x2013-03-24_173041.jpg.pagespeed.gp+jp+jw+pj+js+rj+rp+rw+ri+cp+md.ic.HQH6hFYrAP.jpg" alt="http://harchiko.qiniudn.com/537x271x2013-03-24_173041.jpg.pagespeed.gp+jp+jw+pj+js+rj+rp+rw+ri+cp+md.ic.HQH6hFYrAP.jpg"></p></li><li><p>重启之后添加 Host（还记得第一天绑定的域名嘛, 也可以填写 ip),port,Username,Password.</p><p>如下图:</p><p><img src="http://harchiko.qiniudn.com/358x183x2013-03-24_164526.jpg.pagespeed.gp+jp+jw+pj+js+rj+rp+rw+ri+cp+md.ic.B59WSsSlJk.jpg" alt="http://harchiko.qiniudn.com/358x183x2013-03-24_164526.jpg.pagespeed.gp+jp+jw+pj+js+rj+rp+rw+ri+cp+md.ic.B59WSsSlJk.jpg"></p><p><img src="http://harchiko.qiniudn.com/401x359x2013-03-24_173602.jpg.pagespeed.gp+jp+jw+pj+js+rj+rp+rw+ri+cp+md.ic.K7h7np4726.jpg" alt="http://harchiko.qiniudn.com/401x359x2013-03-24_173602.jpg.pagespeed.gp+jp+jw+pj+js+rj+rp+rw+ri+cp+md.ic.K7h7np4726.jpg"></p><p>点击连接进入主界面:<br><img src="http://harchiko.qiniudn.com/650x235x2013-03-24_173917.jpg.pagespeed.gp+jp+jw+pj+js+rj+rp+rw+ri+cp+md.ic.VMsLC5uovk.jpg" alt="http://harchiko.qiniudn.com/650x235x2013-03-24_173917.jpg.pagespeed.gp+jp+jw+pj+js+rj+rp+rw+ri+cp+md.ic.VMsLC5uovk.jpg"></p></li></ol><h3 id="配置"><a href="# 配置" class="headerlink" title="配置"></a>配置 </h3><h4 id="下载配置："><a href="# 下载配置：" class="headerlink" title="下载配置："></a> 下载配置：</h4><p>在 Downloads 目录下:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /home/pi/Downloads/downloading</span><br><span class="line">mkdir /home/pi/Downloads/completed</span><br><span class="line">mkdir -p /home/pi/Downloads/torrents/watch</span><br><span class="line">mkdir -p /home/pi/Downloads/torrents/torrent-backup</span><br></pre></td></tr></table></figure><p>按照图中修改即可 </p><p><img src="https://ws1.sinaimg.cn/large/006tNc79ly1flzgv9v9aij30rq0w6aey.jpg" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-04-23%20at%201.06.13%20AM.png"></p><h4 id="网络配置"><a href="# 网络配置" class="headerlink" title="网络配置"></a> 网络配置 </h4><p> 按图示修改即可。</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1flzgvivknmj30ry0w6q8k.jpg" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-04-23%20at%2012.05.33%20AM.png"></p><p>这下，你可以远程添加种子到树莓派下载了 </p><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1flzgvzk684j31kw0zk7wi.jpg" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-0aa4-23%20at%2012.08.42%20AM.jpg"></p><h2 id="One-More-thing"><a href="#One-More-thing" class="headerlink" title="One More thing"></a>One More thing</h2><p> 设置定时任务，免得影响正常上网:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure><p>在后面添加内容 <br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 周一到周五</span><br><span class="line">0 1 * * 1,2,3,4,5 deluged</span><br><span class="line">0 18 * * 1,2,3,4,5 pkill deluged </span><br><span class="line"></span><br><span class="line"># 周六周日</span><br><span class="line">0 2 * * 0,6 deluged </span><br><span class="line">0 8 * * 0,6 sudo pkill deluged</span><br></pre></td></tr></table></figure><p></p><p> 周一到周五，每天凌晨 1 点开启，晚上 6 点结束；<br>周六周日，凌晨两点开启，早上 8 点结束；</p><p>至此，下载已经告一段落。</p><p>参考链接: 1. <a href="http://www.howtogeek.com/142044/how-to-turn-a-raspberry-pi-into-an-always-on-bittorrent-box/" target="_blank" rel="noopener">http://www.howtogeek.com/142044/how-to-turn-a-raspberry-pi-into-an-always-on-bittorrent-box/</a></p>]]></content>
      
      <categories>
          
          <category> raspberry </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> pi </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>从零开始将树莓派打造成家用下载机【一】 网络配置篇</title>
      <link href="/2016/04/17/raspberry-pi-as-nas-server/"/>
      <url>/2016/04/17/raspberry-pi-as-nas-server/</url>
      <content type="html"><![CDATA[<p>本篇讲介绍一下树莓派基本的网络配置，使其能够在公网正常访问。<br><a id="more"></a></p><p><img src="https://ws2.sinaimg.cn/large/006tNc79ly1flzgubmuv0j30j40a176t.jpg" alt="http://harchiko.qiniudn.com/Pi_3_Model_B.png"></p><h3 id="烧录 micro-sd 卡"><a href="# 烧录 micro-sd 卡" class="headerlink" title="烧录 micro sd 卡"></a>烧录 micro sd 卡 </h3><p> 具体操作可查看官方 <a href="https://www.raspberrypi.org/documentation/installation/installing-images/README.md" target="_blank" rel="noopener">https://www.raspberrypi.org/documentation/installation/installing-images/README.md</a>，比较简单，不详述。</p><h3 id="配置 IP 地址"><a href="# 配置 IP 地址" class="headerlink" title="配置 IP 地址"></a> 配置 IP 地址 </h3><p> 烧录好之后插上 SD 卡，接好网线启动树莓派，看到树莓派灯正常亮系统应该就算启动完成了。</p><ol><li>进入路由器后台, 打开 DHCP 服务，查看树莓派的 ip 地址，将其修改为固定 ip 地址后重启路由器 (我的为 192.168.0.169)。</li><li> 使用 <code>ssh pi@192.168.0.169</code>登录树莓派（Mac/Linux 下直接使用 Terminal, Windows 下可使用 Xshell）</li></ol><h3 id="配置公网访问"><a href="# 配置公网访问" class="headerlink" title="配置公网访问"></a>配置公网访问 </h3><h3 id="路由器"><a href="# 路由器" class="headerlink" title="路由器"></a> 路由器 </h3><ul><li>DMZ 主机配置<br> 在路由器中，配置中找到 DMZ 主机选项，将其设置为树莓派的 ip。</li></ul><h3 id="SSH 配置"><a href="#SSH 配置" class="headerlink" title="SSH 配置"></a>SSH 配置 </h3><h4 id="密码修改"><a href="# 密码修改" class="headerlink" title="密码修改"></a> 密码修改 </h4><pre><code> 使用命令 `passwd pi` 修改 pi 的密码。建议密码修改强度足够强，因为这台主机会暴露在公网。</code></pre><h4 id="SSH 端口修改"><a href="#SSH 端口修改" class="headerlink" title="SSH 端口修改"></a>SSH 端口修改 </h4><pre><code> 出于同样的安全考虑，修改 ssh 端口</code></pre><ul><li>修改配置文件 <code>vi /etc/ssh/sshd_config</code> 将 ssh 端口修改为 xxxx(你希望的端口), 这里我设定的是 1213。</li><li>重启 SSH 服务，<code>sudo service ssh restart</code></li></ul><h4 id="查看本地 IP 是否能从公网访问"><a href="# 查看本地 IP 是否能从公网访问" class="headerlink" title="查看本地 IP 是否能从公网访问"></a>查看本地 IP 是否能从公网访问 </h4><blockquote><p> 在国内，因为 ipv4 地址不够用或者一些其他原因，你所使用的 ip 可能是电信分配的局域网的 ip，这时候你就需要找电信客服说一下你需要公网 ip 让他们帮你改回来。</p></blockquote><p>这里通过 telnet 服务看一下是否当前分配的是公网 ip</p><ol><li><strong>查看本机的公网 ip</strong><br>使用命令 <code>curl ifconfig.me</code>, 或者直接在百度中搜索 ip。</li><li><strong>本地查看 SSH 服务端口号是否更改过来 </strong><code>telnet 192.168.0.169 1213</code><br>(<code>#xxxx</code> 指的是端口号)</li><li><strong>通过公网查看 </strong> 通过第一步查看到的 ip 来从公网访问<code>telnet xxx.xxx.xxx 1213</code><br>(这里使用公网 ip）如果能够正常运行的话则证明此树莓派已经运行在公网。</li></ol><p> 这样 ssh 登录命令变为 <code>ssh pi@xxx.xxx.xxx -p 1213</code> （指定端口）</p><h4 id="将本地 ip 与域名绑定"><a href="# 将本地 ip 与域名绑定" class="headerlink" title="将本地 ip 与域名绑定"></a>将本地 ip 与域名绑定 </h4><p> 因为家庭宽带的 ip 是不固定的，如果使用 ip 进行连接的话每次都要先获取到机器的当前 ip 才能进行 ssh 登录，这里我们将 ip 地址绑定到二级域名上。</p><p>按照此 repo: <a href="https://github.com/zhaochunqi/change_my_ip_on_dnspod" target="_blank" rel="noopener">https://github.com/zhaochunqi/change_my_ip_on_dnspod</a> 中 README 进行相应配置。</p><ol><li>clone 这个 repo， 在 Dnspod 中获取到 APIKEY，以及响应的二级域名需要的参数。</li><li>修改库中的 change_my_ip_on_dnspod.sh <code>Shell</code>脚本。</li><li>使用命令 <code>chmod +x change_my_ip_on_dnspod.sh</code> 添加脚本的可执行权限。</li><li>运行 ./change_my_ip_on_dnspod.sh 查看返回值, 得到如下图的结果即为成功。<img src="https://ws2.sinaimg.cn/large/006tNc79ly1flzgunyzkbj31kw07owgt.jpg" alt="http://harchiko.qiniudn.com/Screen%20Shot%202016-04-18%20at%2012.13.26%20AM.png"></li><li>登录树莓派系统 <code>crontab -e</code>在末尾添加 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># every 20 mins</span></span><br><span class="line">*/20 * * * * ./path/to/change_ip_4_pi.sh</span><br></pre></td></tr></table></figure></li></ol><p><code>path/to/change_ip_4_pi.sh</code> 替换为你的真实地址。</p><p> 至此，你能从你刚刚绑定的二级域名直接访问到你的树莓派:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh pi@haha.mydomain.com -p 1213</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> raspberry </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> pi </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Gist-Vim 介绍</title>
      <link href="/2016/04/12/vim-plugin-gist-vim/"/>
      <url>/2016/04/12/vim-plugin-gist-vim/</url>
      <content type="html"><![CDATA[<h2 id="Gist-Vim- 介绍"><a href="#Gist-Vim- 介绍" class="headerlink" title="Gist-Vim 介绍"></a>Gist-Vim 介绍 </h2><blockquote><p>Gist-Vim 是一款能够访问、保存 gist 的 Vim 插件。</p></blockquote><a id="more"></a><h3 id="说一下重点："><a href="# 说一下重点：" class="headerlink" title="说一下重点："></a> 说一下重点：</h3><ul><li>使用之前要先设置 <code>git config --global github.user Username</code> 注意是 github.user.</li><li>在 .vimrc 中设置 <code>let g:gist_clip_command = &#39;pbcopy&#39;</code>以便可以直接粘贴上传的 Gist 地址。</li><li>使用 Vundle 安装时要安装两个包 </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Bundle &apos;mattn/webapi-vim&apos;</span><br><span class="line">Bundle &apos;mattn/gist-vim&apos;</span><br></pre></td></tr></table></figure><h3 id="常用的几个命令"><a href="# 常用的几个命令" class="headerlink" title="常用的几个命令"></a> 常用的几个命令 </h3><ul><li><code>:Gist -l zhaochunqi</code> zhaochunqi 的全部 gist</li><li><code>:Gist -a</code> 匿名 gist</li><li> 可以进入 V 模式选择后提交 Gist，可以使用 -s 选项添加描述说明。</li></ul><hr><h3 id="Gist-vim"><a href="#Gist-vim" class="headerlink" title="Gist.vim"></a>Gist.vim</h3><p>This is a vimscript for creating gists (<a href="http://gist.github.com)" target="_blank" rel="noopener">http://gist.github.com)</a>.</p><p>For the latest version please see <a href="https://github.com/mattn/gist-vim" target="_blank" rel="noopener">https://github.com/mattn/gist-vim</a>.</p><h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage:"></a>Usage:</h2><ul><li><p>Post current buffer to gist, using default privacy option.</p><pre><code>:Gist</code></pre></li><li><p>Post selected text to gist, using default privacy option.<br>This applies to all permutations listed below (except multi).</p><pre><code>:&apos;&lt;,&apos;&gt;Gist</code></pre></li><li><p>Create a private gist.</p><pre><code>:Gist -p</code></pre></li><li><p>Create a public gist.<br>(Only relevant if you’ve set gists to be private by default.)</p><pre><code>:Gist -P</code></pre></li></ul><blockquote><p>This is only relevant if you’ve set gists to be private by default;<br>if you get an empty gist list, try “:Gist –abandon”.</p></blockquote><ul><li><p>Create a gist anonymously.</p><pre><code>:Gist -a</code></pre></li><li><p>Create a gist with all open buffers.</p><pre><code>:Gist -m</code></pre></li><li><p>Edit the gist (you need to have opened the gist buffer first).<br>You can update the gist with the “:w” command within the gist buffer.</p><pre><code>:Gist -e</code></pre></li><li><p>Edit the gist with name ‘foo.js’ (you need to have opened the gist buffer<br>first).</p><pre><code>:Gist -e foo.js</code></pre></li><li><p>Post/Edit with the description “ (you need to have opened the gist buffer<br>first). &gt;</p><pre><code>:Gist -s something:Gist -e -s something</code></pre></li><li><p>Delete the gist (you need to have opened the gist buffer first).<br>Password authentication is needed.</p><pre><code>:Gist -d</code></pre></li><li><p>Fork the gist (you need to have opened the gist buffer first).<br>Password authentication is needed.</p><pre><code>:Gist -f</code></pre></li><li><p>Star the gist (you need to have opened the gist buffer first).<br>Password authentication is needed.</p><pre><code>:Gist +1</code></pre></li><li><p>Unstar the gist (you need to have opened the gist buffer first).<br>Password authentication is needed.</p><pre><code>:Gist -1</code></pre></li><li><p>Get gist XXXXX.</p><pre><code>:Gist XXXXX</code></pre></li><li><p>Get gist XXXXX and add to clipboard.</p><pre><code>:Gist -c XXXXX</code></pre></li><li><p>List your public gists.</p><pre><code>:Gist -l</code></pre></li><li><p>List gists from user “mattn”.</p><pre><code>:Gist -l mattn</code></pre></li><li><p>List everyone’s gists.</p><pre><code>:Gist -la</code></pre></li><li><p>List gists from your starred gists.</p><pre><code>:Gist -ls</code></pre></li><li><p>Open the gist on browser after you post or update it.</p><pre><code>:Gist -b</code></pre></li></ul><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips:"></a>Tips:</h2><p>If you set g:gist_clip_command, gist.vim will copy the gist code with option<br>‘-c’.</p><ul><li><p>Mac:</p><pre><code>let g:gist_clip_command = &apos;pbcopy&apos;</code></pre></li><li><p>Linux:</p><pre><code>let g:gist_clip_command = &apos;xclip -selection clipboard&apos;</code></pre></li><li><p>Others (cygwin?):</p><pre><code>let g:gist_clip_command = &apos;putclip&apos;</code></pre></li></ul><p>If you want to detect filetype from the filename:</p><pre><code>let g:gist_detect_filetype = 1</code></pre><p>If you want to open browser after the post:</p><pre><code>let g:gist_open_browser_after_post = 1</code></pre><p>If you want to change the browser:</p><pre><code>let g:gist_browser_command = &apos;w3m %URL%&apos;</code></pre><p>or:</p><pre><code>let g:gist_browser_command = &apos;opera %URL% &amp;&apos;</code></pre><p>On windows, this should work with your user settings.</p><p>If you want to show your private gists with “:Gist -l”:</p><pre><code>let g:gist_show_privates = 1</code></pre><p>If you want your gist to be private by default:</p><pre><code>let g:gist_post_private = 1</code></pre><p>If you want your gist to be anonymous by default:</p><pre><code>let g:gist_post_anonymous = 1</code></pre><p>If you want to manipulate multiple files in a gist:</p><pre><code>let g:gist_get_multiplefile = 1</code></pre><p>If you want to use on GitHub Enterprise:</p><pre><code>let g:gist_api_url = &apos;http://your-github-enterprise-domain/api/v3&apos;</code></pre><p>You need to either set global git config:</p><pre><code>$ git config --global github.user Username</code></pre><h2 id="License"><a href="#License" class="headerlink" title="License:"></a>License:</h2><pre><code>Copyright 2010 by Yasuhiro Matsumotomodification, are permitted provided that the following conditions are met:1. Redistributions of source code must retain the above copyright notice,   this list of conditions and the following disclaimer.2. Redistributions in binary form must reproduce the above copyright notice,   this list of conditions and the following disclaimer in the documentation   and/or other materials provided with the distribution.THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS``AS IS&apos;&apos; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOTLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESSFOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THEREGENTS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS ORSERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISEDOF THE POSSIBILITY OF SUCH DAMAGE.</code></pre><h2 id="Install"><a href="#Install" class="headerlink" title="Install:"></a>Install:</h2><p>Copy it to your plugin directory.<br>gist.vim will create a curl cookie-jar file in your runtimepath.</p><ul><li>rtp:<ul><li>autoload/gist.vim</li><li>plugin/gist.vim</li></ul></li></ul><p>If you want to uninstall gist.vim, remember to also remove <code>~/.gist-vim</code>.</p><p>You need to install webapi-vim also:</p><p><a href="http://www.vim.org/scripts/script.php?script_id=4019" target="_blank" rel="noopener">http://www.vim.org/scripts/script.php?script_id=4019</a></p><p>If you want to use latest one:</p><p><a href="https://github.com/mattn/webapi-vim" target="_blank" rel="noopener">https://github.com/mattn/webapi-vim</a></p><h3 id="Install-with-Vundle"><a href="#Install-with-Vundle" class="headerlink" title="Install with Vundle"></a>Install with <a href="https://github.com/gmarik/vundle" target="_blank" rel="noopener">Vundle</a></h3><p>Add the following lines to your <code>.vimrc</code>.</p><pre><code>Bundle &apos;mattn/webapi-vim&apos;Bundle &apos;mattn/gist-vim&apos;</code></pre><p>Now restart Vim and run <code>:BundleInstall</code>.</p><h3 id="Install-with-NeoBundle"><a href="#Install-with-NeoBundle" class="headerlink" title="Install with NeoBundle"></a>Install with <a href="https://github.com/Shougo/neobundle.vim" target="_blank" rel="noopener">NeoBundle</a></h3><p>Add the following line to your <code>.vimrc</code>.</p><pre><code>NeoBundle &apos;mattn/gist-vim&apos;, {&apos;depends&apos;: &apos;mattn/webapi-vim&apos;}</code></pre><h2 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements:"></a>Requirements:</h2><ul><li>curl command (<a href="http://curl.haxx.se/" target="_blank" rel="noopener">http://curl.haxx.se/</a>)</li><li>webapi-vim (<a href="https://github.com/mattn/webapi-vim" target="_blank" rel="noopener">https://github.com/mattn/webapi-vim</a>)</li><li>and if you want to use your git profile, the git command-line client.</li></ul><h2 id="Setup"><a href="#Setup" class="headerlink" title="Setup:"></a>Setup:</h2><p>This plugin supports both basic and two-factor authentication using GitHub<br>API v3. The plugin stores its credentials in <code>~/.gist-vim</code>.</p><p>First, you need to set your GitHub username in git’s global configuration:</p><pre><code>$ git config --global github.user &lt;username&gt;</code></pre><p>Then gist-vim will ask for your password in order to create an access<br>token. If you have two-factor authentication enabled, gist-vim will also<br>prompt you to enter the two-factor key you receive.</p><p>Whichever type of authentication you use, your GitHub password will not be<br>stored, only a OAuth access token produced specifically for gist-vim. The<br>token is stored in <code>~/.gist-vim</code>. If you stop using the plugin, you can<br>easily remove this file. To revoke the associated GitHub token, go to the<br>list of <a href="https://github.com/settings/applications" target="_blank" rel="noopener">“Authorized applications” on GitHub’s “Account Settings”<br>page</a>.</p><p><strong>Note:</strong> the username is optional if you only send anonymous gists.</p>]]></content>
      
      
        <tags>
            
            <tag> vim </tag>
            
            <tag> plugin </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Content Provider 指南</title>
      <link href="/2016/04/10/android_content_provider/"/>
      <url>/2016/04/10/android_content_provider/</url>
      <content type="html"><![CDATA[<h2 id="介绍"><a href="# 介绍" class="headerlink" title="介绍"></a>介绍 </h2><p> 以下摘自开发文档 </p><blockquote><p>Content providers are one of the primary building blocks of Android applications, providing content to applications. They encapsulate data and provide it to applications through the single ContentResolver interface. A content provider is only required if you need to share data between multiple applications. For example, the contacts data is used by multiple applications and must be stored in a content provider. <strong>If you don’t need to share data amongst multiple applications you can use a database directly via SQLiteDatabase.</strong></p></blockquote><a id="more"></a><h2 id="使用场景"><a href="# 使用场景" class="headerlink" title="使用场景"></a> 使用场景 </h2><p> 假设现在你需要开发一个应用，拍摄个人名片，然后将名片上的联系人信息储存，或许你之后会丢失名片，但是你的联系人已经保存下来了。</p><p>但是保存联系人本身需要操作联系人的数据库，如何确保我们使用的数据库跟手机上默认的联系人数据存储一致呢？</p><p>这个时候，你就需要使用 ContentProvider，它能够作为一个中间人来处理数据与数据库之间的联系。</p><h3 id="你可能在想，为什么我需要一个中间人来做这件事情呢？我不能直接访问数据库来做这件事情吗？"><a href="# 你可能在想，为什么我需要一个中间人来做这件事情呢？我不能直接访问数据库来做这件事情吗？" class="headerlink" title="你可能在想，为什么我需要一个中间人来做这件事情呢？我不能直接访问数据库来做这件事情吗？"></a>你可能在想，为什么我需要一个中间人来做这件事情呢？我不能直接访问数据库来做这件事情吗？</h3><p>这样做有几个好处:</p><ol><li>修改相关的数据方便。</li><li>能够利用 Android 的各种相关 Class 类，如 Cursor Adapter。</li><li>能够让更多的应用能够 Access，而且相应的安全性也会提高（ContentProvider 用到的什么方法呢？要研究一下）。</li></ol><p>所以上面那个问题怎么解决呢？</p><p>使用自己的数据库？不，这行不通，因为系统的数据库无法访问你自己创建的数据库，答案就是使用 contentprovider,ContentProvider 的处理对你来说完全是 BlackBox.</p><h3 id="怎么用？"><a href="# 怎么用？" class="headerlink" title="怎么用？"></a>怎么用？</h3><p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1flzgnyfqqmj30kg0aamy3.jpg" alt="detail"><br>如上</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ContentResolver contentResolver = getContentResolver();</span><br><span class="line">Cursor cursor = contentResolver.query(UserDictionary.Words.CONTENT_URI, <span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> android </tag>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>如何写好 README 文档</title>
      <link href="/2016/03/28/how-to-write-a-readme/"/>
      <url>/2016/03/28/how-to-write-a-readme/</url>
      <content type="html"><![CDATA[<hr><p>这是一个教你怎么写 <code>README</code> 的教程 </p><p><img src="https://img.shields.io/badge/lauguage-Chinese-green.svg" alt=""></p><a id="more"></a><h2 id=" 引言 "><a href="# 引言 "class="headerlink"title=" 引言 "></a> 引言 </h2><p> 作为一个懒人，在有限的环境中，尽量的将一些重复性的活动能够自动化那是坠吼滴。</p><h2 id=" 标题 "><a href="# 标题 "class="headerlink"title=" 标题 "></a>标题 </h2><ol><li><p> 一图胜千言 </p><p> 使用: <a href="http://shields.io"target="_blank"rel="noopener">shields.io</a> 标明项目的一些重要属性如：</p><ul><li>测试是否通过 </li><li> 代码覆盖率 </li><li> 使用的语言是什么 </li></ul></li><li><p> 分割线 </p></li><li><p> 一句话介绍 </p></li></ol><h2 id=" 目录 "><a href="# 目录 "class="headerlink"title=" 目录 "></a> 目录 </h2><p> 简单的使用相对路径将下面的目录结构写一下，一般放在最后写。</p><h2 id=" 内容 "><a href="# 内容 "class="headerlink"title=" 内容 "></a>内容 </h2><p> 没啥好说的。</p><h2 id="License"><a href="#License"class="headerlink"title="License"></a>License</h2><p>证书 关于开源很多人有误解以为放在 github 上的开放 repo 就可以随便用了，其实不然，留意证书的类型，尊重作者的版权和辛勤劳动是很重要的。具体推荐看 <a href="http://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html"target="_blank"rel="noopener">http://www.ruanyifeng.com/blog/2011/05/how_to_choose_free_software_licenses.html</a>了解。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">The MIT License (MIT)</span><br><span class="line"></span><br><span class="line">Copyright (c) 2016 Alex Zhao</span><br><span class="line"></span><br><span class="line">Permission is hereby granted, free of charge, to any person obtaining a copy</span><br><span class="line">of this software and associated documentation files (the &quot;Software&quot;), to deal</span><br><span class="line">in the Software without restriction, including without limitation the rights</span><br><span class="line">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span><br><span class="line">copies of the Software, and to permit persons to whom the Software is</span><br><span class="line">furnished to do so, subject to the following conditions:</span><br><span class="line"></span><br><span class="line">The above copyright notice and this permission notice shall be included in all</span><br><span class="line">copies or substantial portions of the Software.</span><br><span class="line"></span><br><span class="line">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span><br><span class="line">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span><br><span class="line">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span><br><span class="line">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span><br><span class="line">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span><br><span class="line">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span><br><span class="line">SOFTWARE.</span><br></pre></td></tr></table></figure>]]></content>
      
      
        <tags>
            
            <tag> github </tag>
            
            <tag> readme </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>.bash_profile vs .bashrc</title>
      <link href="/2015/12/18/bash-config-files/"/>
      <url>/2015/12/18/bash-config-files/</url>
      <content type="html"><![CDATA[<p>Bash 的配置文件位置包括 <code>.bash_profile</code> 和 <code>.bashrc</code>，那这两个配置文件有什么区别呢？</p><a id="more"></a><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1flzgpe3ep2j30nm0j3do9.jpg" alt=""></p><p>根据 <a href="http://linux.die.net/man/1/bash"target="_blank"rel="noopener">http://linux.die.net/man/1/bash</a> 的描述，<code>.bash_profile</code> is executed for login shells, while <code>.bashrc</code> is executed for interactive non-login shells.</p><h2 id=" 什么是 -login- 和 -non-login-shell"><a href="# 什么是 -login- 和 -non-login-shell"class="headerlink"title=" 什么是 login 和 non-login shell ?"></a>什么是 login 和 non-login shell ?</h2><p>当通过 console<strong>登录 </strong> 时（不管是通过物理机器还是远程 ssh），<code>.bash_profile</code>在初始化命令弹出之前就已经执行。</p><p>但是，当你 <strong> 已经登录进机器 </strong>，不管是通过 Gnome 还是 KDE 的 xterm，那么<code>.bashrc</code> 在窗口弹出之前执行。而且，<code>.bashrc</code>在使用 <code>/bin/bash</code> 在 Terminal 调用时同样会执行。</p><h2 id=" 为什么是两个不同的文件？"><a href="# 为什么是两个不同的文件？"class="headerlink"title=" 为什么是两个不同的文件？"></a>为什么是两个不同的文件？</h2><p><code>.bash_profile</code>会在每次登录之前打印一长串的诊断信息，如果你只想在启动时看到，使用 <code>.bash_profile</code>, 如果放在<code>.bashrc</code> 中，你会在每一次新启动一个 Terminal 时候看到一次。</p><h2 id="Mac-OS-X-–- 一个例外 "><a href="#Mac-OS-X-–- 一个例外 "class="headerlink"title="Mac OS X – 一个例外 "></a>Mac OS X – 一个例外 </h2><p> 每一次新启动一个 terminal 窗口时，调用 <code>.bash_profile</code> 而不是 <code>.bashrc</code>, 其它 GUI 终端模拟器也可能这样做，但是多数不是这样做的。</p><h2 id=" 建议 "><a href="# 建议 "class="headerlink"title=" 建议 "></a> 建议 </h2><p> 多数情况下，分开管理不是很方便，<strong>当你想要设定一个环境变量的时候，你想要两个都生效 </strong>, 你可以通过在<code>.bash_profile</code> 中执行命令 <code>source .bashrc</code>，然后在<code>.bashrc</code> 中写入 PATH 或者其他的设定。</p><p>添加如下命令到 <code>.bash_profile</code> 中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [-f ~/.bashrc]; <span class="keyword">then</span></span><br><span class="line">   <span class="built_in">source</span> ~/.bashrc</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>这样当你登录到 console 时，<code>.bashrc</code>会被调用。</p><h2 id=" 参考链接 "><a href="# 参考链接 "class="headerlink"title=" 参考链接 "></a>参考链接</h2><p><a href="http://www.joshstaiger.org/archives/2005/07/bash_profile_vs.html"target="_blank"rel="noopener">http://www.joshstaiger.org/archives/2005/07/bash_profile_vs.html</a></p>]]></content>
      
      
        <tags>
            
            <tag> mac </tag>
            
            <tag> linux </tag>
            
            <tag> bash </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Mac 下开机启动 Aria2</title>
      <link href="/2015/12/13/aria2-auto-start/"/>
      <url>/2015/12/13/aria2-auto-start/</url>
      <content type="html"><![CDATA[<p>前几天看了少数派的文章 <a href="http://sspai.com/32167" target="_blank" rel="noopener">http://sspai.com/32167</a> 配置了 Aria2，效果不错，决定将其开机启动。</p><a id="more"></a><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1flzgp5o1cpj30m80r5e21.jpg" alt=""></p><p>##Aria2 配置 </p><p> 首先贴一下我的 config 文件:</p><blockquote><p>~/.aria2/aria2.conf</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">## &apos;#&apos; 开头为注释内容, 选项都有相应的注释说明, 根据需要修改 ##</span><br><span class="line">## 被注释的选项填写的是默认值, 建议在需要修改时再取消注释  ##</span><br><span class="line"></span><br><span class="line">## 文件保存相关 ##</span><br><span class="line"></span><br><span class="line"># 文件的保存路径 (可使用绝对路径或相对路径), 默认: 当前启动位置</span><br><span class="line">dir=/Users/alex/Downloads</span><br><span class="line"># 启用磁盘缓存, 0 为禁用缓存, 需 1.16 以上版本, 默认:16M</span><br><span class="line">#disk-cache=32M</span><br><span class="line"># 文件预分配方式, 能有效降低磁盘碎片, 默认:prealloc</span><br><span class="line"># 预分配所需时间: none &lt; falloc ? trunc &lt; prealloc</span><br><span class="line"># falloc 和 trunc 则需要文件系统和内核支持</span><br><span class="line"># NTFS 建议使用 falloc, EXT3/4 建议 trunc, MAC 下需要注释此项</span><br><span class="line"># file-allocation=none</span><br><span class="line"># 断点续传</span><br><span class="line">continue=true</span><br><span class="line"></span><br><span class="line">## 下载连接相关 ##</span><br><span class="line"></span><br><span class="line"># 最大同时下载任务数, 运行时可修改, 默认:5</span><br><span class="line">max-concurrent-downloads=5</span><br><span class="line"># 同一服务器连接数, 添加时可指定, 默认:1</span><br><span class="line">max-connection-per-server=5</span><br><span class="line"># 最小文件分片大小, 添加时可指定, 取值范围 1M -1024M, 默认:20M</span><br><span class="line"># 假定 size=10M, 文件为 20MiB 则使用两个来源下载; 文件为 15MiB 则使用一个来源下载</span><br><span class="line">min-split-size=10M</span><br><span class="line"># 单个任务最大线程数, 添加时可指定, 默认:5</span><br><span class="line">split=5</span><br><span class="line"># 整体下载速度限制, 运行时可修改, 默认:0</span><br><span class="line">#max-overall-download-limit=0</span><br><span class="line"># 单个任务下载速度限制, 默认:0</span><br><span class="line">#max-download-limit=0</span><br><span class="line"># 整体上传速度限制, 运行时可修改, 默认:0</span><br><span class="line">#max-overall-upload-limit=0</span><br><span class="line"># 单个任务上传速度限制, 默认:0</span><br><span class="line">#max-upload-limit=0</span><br><span class="line"># 禁用 IPv6, 默认:false</span><br><span class="line">disable-ipv6=true</span><br><span class="line"></span><br><span class="line">## 进度保存相关 ##</span><br><span class="line"></span><br><span class="line"># 从会话文件中读取下载任务</span><br><span class="line">input-file=/usr/local/Cellar/aria2/aria2.session</span><br><span class="line"># 在 Aria2 退出时保存 ` 错误 / 未完成 ` 的下载任务到会话文件</span><br><span class="line">save-session=/usr/local/Cellar/aria2/aria2.session</span><br><span class="line"># 定时保存会话, 0 为退出时才保存, 需 1.16.1 以上版本, 默认:0</span><br><span class="line">#save-session-interval=60</span><br><span class="line"></span><br><span class="line">## RPC 相关设置 ##</span><br><span class="line"></span><br><span class="line"># 启用 RPC, 默认:false</span><br><span class="line">enable-rpc=true</span><br><span class="line"># 允许所有来源, 默认:false</span><br><span class="line">rpc-allow-origin-all=true</span><br><span class="line"># 允许非外部访问, 默认:false</span><br><span class="line">rpc-listen-all=true</span><br><span class="line"># 事件轮询方式, 取值:[epoll, kqueue, port, poll, select], 不同系统默认值不同</span><br><span class="line">#event-poll=select</span><br><span class="line"># RPC 监听端口, 端口被占用时可以修改, 默认:6800</span><br><span class="line">#rpc-listen-port=6800</span><br><span class="line"># 设置的 RPC 授权令牌, v1.18.4 新增功能, 取代 --rpc-user 和 --rpc-passwd 选项</span><br><span class="line">#rpc-secret=&lt;TOKEN&gt;</span><br><span class="line"># 设置的 RPC 访问用户名, 此选项新版已废弃, 建议改用 --rpc-secret 选项</span><br><span class="line">#rpc-user=&lt;USER&gt;</span><br><span class="line"># 设置的 RPC 访问密码, 此选项新版已废弃, 建议改用 --rpc-secret 选项</span><br><span class="line">#rpc-passwd=&lt;PASSWD&gt;</span><br><span class="line"></span><br><span class="line">## BT/PT 下载相关 ##</span><br><span class="line"></span><br><span class="line"># 当下载的是一个种子(以.torrent 结尾) 时, 自动开始 BT 任务, 默认:true</span><br><span class="line">#follow-torrent=true</span><br><span class="line"># BT 监听端口, 当端口被屏蔽时使用, 默认:6881-6999</span><br><span class="line">listen-port=51413</span><br><span class="line"># 单个种子最大连接数, 默认:55</span><br><span class="line">#bt-max-peers=55</span><br><span class="line"># 打开 DHT 功能, PT 需要禁用, 默认:true</span><br><span class="line">enable-dht=false</span><br><span class="line"># 打开 IPv6 DHT 功能, PT 需要禁用 </span><br><span class="line">#enable-dht6=false</span><br><span class="line"># DHT 网络监听端口, 默认:6881-6999</span><br><span class="line">#dht-listen-port=6881-6999</span><br><span class="line"># 本地节点查找, PT 需要禁用, 默认:false</span><br><span class="line">#bt-enable-lpd=false</span><br><span class="line"># 种子交换, PT 需要禁用, 默认:true</span><br><span class="line">enable-peer-exchange=false</span><br><span class="line"># 每个种子限速, 对少种的 PT 很有用, 默认:50K</span><br><span class="line">#bt-request-peer-speed-limit=50K</span><br><span class="line"># 客户端伪装, PT 需要</span><br><span class="line">peer-id-prefix=-TR2770-</span><br><span class="line">user-agent=Transmission/2.77</span><br><span class="line"># 当种子的分享率达到这个数时, 自动停止做种, 0 为一直做种, 默认:1.0</span><br><span class="line">seed-ratio=0</span><br><span class="line"># 强制保存会话, 即使任务已经完成, 默认:false</span><br><span class="line"># 较新的版本开启后会在任务完成后依然保留.aria2 文件</span><br><span class="line">#force-save=false</span><br><span class="line"># BT 校验相关, 默认:true</span><br><span class="line">#bt-hash-check-seed=true</span><br><span class="line"># 继续之前的 BT 任务时, 无需再次校验, 默认:false</span><br><span class="line">bt-seed-unverified=true</span><br><span class="line"># 保存磁力链接元数据为种子文件(.torrent 文件), 默认:false</span><br><span class="line">bt-save-metadata=true</span><br></pre></td></tr></table></figure><p> 主要是更改了下载文档路径 <code>dir=/Users/alex/Downloads</code></p><h2 id=" 添加到启动项 "><a href="# 添加到启动项 "class="headerlink"title=" 添加到启动项 "></a>添加到启动项 </h2><p> 创建文件 <code>aria2.plist</code></p><p><strong>修改 array 中的 aria2 命令为你的 aria2 命令路径, 可使用 <code>which aria2c</code> 命令查看 </strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0"encoding="utf-8"?&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE plist PUBLIC"-//Apple//DTD PLIST 1.0//EN"</span></span><br><span class="line"><span class="meta">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">"1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>KeepAlive<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">true</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>RunAtLoad<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">true</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>Label<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>aria2<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>ProgramArguments<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">string</span>&gt;</span>/usr/local/bin/aria2c<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>WorkingDirectory<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>/Users/alex/Downloads<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p> 可以添加参数到 <code>&lt;array&gt;</code> 中, 添加到第一行命令之后。</p></blockquote><p>将文件复制到 <code>~/Library/LaunchAgents</code> 下 </p><p> 进入文件夹，并 <strong> 修改文件权限为 644</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 644 aria2.plist</span><br></pre></td></tr></table></figure><p>执行以下命令 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">launchctl load aria2.plist</span><br><span class="line">launchctl start aria2</span><br></pre></td></tr></table></figure><p> 大功告成</p>]]></content>
      
      
        <tags>
            
            <tag> mac </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>使用 Travis-CI 生成发布 Hexo 博客</title>
      <link href="/2015/11/27/travis-ci-deploy-hexo/"/>
      <url>/2015/11/27/travis-ci-deploy-hexo/</url>
      <content type="html"><![CDATA[<p>本篇文章将指导你如何使用 Travis-CI 自动部署 hexo 生成的静态博客到 github 上。</p><a id="more"></a><h2 id="背景介绍"><a href="# 背景介绍" class="headerlink" title="背景介绍"></a>背景介绍 </h2><p> 在最新的 github 中，如果想要你的 github repo 可以作为博客，需要命名为类似 <code>zhaochunqi.github.io</code>这样的。<br>在这里，我在此 repo 下建立了两个完全不同的分支，source 和 master 分支。</p><p>source 分支放置 hexo 的一些源文件，master 分支放置静态博客资源。</p><p><strong>我们需要做的就是获取到 source 分支的改动，自动 deploy 到 master 分支 </strong></p><p> 所以步骤就是： 获取改动 -&gt;deploy</p><h2 id="travis-CI"><a href="#travis-CI" class="headerlink" title="travis-CI"></a>travis-CI</h2><p>travis-CI(<a href="https://travis-ci.org/" target="_blank" rel="noopener">https://travis-ci.org/</a>)是集成测试工具，目前只支持 github。</p><p>在 travis-CI 中对 <code>zhaochunqi.github.io</code> 开启自动构建，配置如下：<br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1flzgpgu6f8j31kw0l777q.jpg" alt=""><br>（建议开启 Build only if .travis.yml is prezent.)</p><h2 id=" 配置 -travis-yml"><a href="# 配置 -travis-yml"class="headerlink"title=" 配置 .travis.yml"></a>配置 <code>.travis.yml</code></h2><h3 id=" 获取 github 权限 "><a href="# 获取 github 权限 "class="headerlink"title=" 获取 github 权限 "></a>获取 <code>github</code> 权限 </h3><p> 两种方法</p><pre><code>1. SSH2. github token</code></pre><p>这里采用的是 github token 的方法，（SSH 配置较为复杂）</p><p>点击头像 -&gt;settings-&gt; Personal access tokens 新建一个 token,<strong>会获取到一串字符 </strong>，记录下下面需要用到。<br><img src="https://ws3.sinaimg.cn/large/006tKfTcly1flzgpjrh31j31kw0lgtd6.jpg" alt=""></p><h3 id=" 将 token 配置到 travis-CI"><a href="# 将 token 配置到 travis-CI"class="headerlink"title=" 将 token 配置到 travis-CI"></a> 将 token 配置到 travis-CI</h3><h4 id=" 安装 Travis-CI 命令行工具 "><a href="# 安装 Travis-CI 命令行工具 "class="headerlink"title=" 安装 Travis-CI 命令行工具 "></a>安装 Travis-CI 命令行工具 </h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem install travis</span><br></pre></td></tr></table></figure><h3 id=" 登陆 -Travis-CI"><a href="# 登陆 -Travis-CI"class="headerlink"title=" 登陆 Travis CI"></a> 登陆 Travis CI</h3><p>需要输入 Github 账号和密码 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">travis login --auto</span><br></pre></td></tr></table></figure><p> 加密环境变量（token）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">travis encrypt GH_OWNER=super_secret</span><br></pre></td></tr></table></figure><p>此命令会写入加密后的环境变量到.travis.yml 中.</p><p>这样，使用 <code>https://${GH_OAUTH_TOKEN}@github.com/${GH_OWNER}/${GH_PROJECT_NAME}</code> 即可进行正常的 push 和 pull 了。</p><p>最后贴一下我的配置 [29 Nov 2016 更新了 cache，加快构建速度]</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">sudo:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">node_js:</span> </span><br><span class="line"><span class="bullet">   -</span> <span class="string">"4.4.4"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Travis-CI Caching</span></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line"><span class="attr">  directories:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">node_modules</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line"><span class="attr">  global:</span></span><br><span class="line"><span class="attr">    - GH_OWNER:</span> <span class="string">zhaochunqi</span></span><br><span class="line"><span class="attr">    - GH_PROJECT_NAME:</span> <span class="string">zhaochunqi.github.io</span></span><br><span class="line">    </span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line"><span class="attr">  only:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">source</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># Build Lifecycle</span></span><br><span class="line"><span class="attr">install:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">git</span> <span class="string">clone</span> <span class="bullet">-b</span> <span class="string">master</span> <span class="attr">https://$&#123;GH_OAUTH_TOKEN&#125;@github.com/$&#123;GH_OWNER&#125;/$&#123;GH_PROJECT_NAME&#125;</span> <span class="string">public</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">hexo</span> <span class="string">g</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">git</span> <span class="string">config</span> <span class="bullet">--global</span> <span class="string">user.name</span> <span class="string">"zhaochunqi"</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">git</span> <span class="string">config</span> <span class="bullet">--global</span> <span class="string">user.email</span> <span class="string">git@zhaochunqi.com</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">cd</span> <span class="string">public</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">git</span> <span class="string">add</span> <span class="bullet">--all</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">git</span> <span class="string">commit</span> <span class="bullet">-m</span> <span class="string">"$(curl -s http://whatthecommit.com/ | awk '/&lt;p&gt;/ &#123;sub("</span><span class="string">&lt;p&gt;",</span> <span class="string">""</span><span class="string">);</span> <span class="string">print</span> <span class="string">&#125;')"</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">git</span> <span class="string">remote</span> <span class="string">set-url</span> <span class="bullet">--add</span> <span class="bullet">--push</span> <span class="string">origin</span> <span class="attr">https://$&#123;GH_OAUTH_TOKEN&#125;@github.com/$&#123;GH_OWNER&#125;/$&#123;GH_PROJECT_NAME&#125;</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">git</span> <span class="string">remote</span> <span class="string">set-url</span> <span class="bullet">--add</span> <span class="bullet">--push</span> <span class="string">origin</span> <span class="attr">https://$&#123;coding_account&#125;:$&#123;coding_passwd&#125;@git.coding.net/harchiko/harchiko.git</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">git</span> <span class="string">push</span> <span class="bullet">-f</span> <span class="string">origin</span> <span class="string">master</span> <span class="string">&gt; /dev/null 2&gt;&amp;1</span></span><br></pre></td></tr></table></figure><p> 这里面除了 global 这里其他都不难懂，看一下 travis 的生命周期就全明白了。</p>]]></content>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> git </tag>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>常用的终端命令</title>
      <link href="/2015/11/26/useful-terminal-commands/"/>
      <url>/2015/11/26/useful-terminal-commands/</url>
      <content type="html"><![CDATA[<p>介绍一些常用的 Linux 命令，这些命令能够在终端下极大的方便我们的操作。</p><a id="more"></a><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1flzgro1a8uj31h80qgn4m.jpg" alt=""></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo !!</span><br></pre></td></tr></table></figure><p>使用 sudo 权限执行上一条命令。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m SimpleHTTPServer</span><br></pre></td></tr></table></figure><p>Serve current directory tree at http://$HOSTNAME:8000/</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^foo^bar</span><br></pre></td></tr></table></figure><p>替换字符后重新执行上面的命令 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctrl-x e</span><br></pre></td></tr></table></figure><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1flzgru0ynig30w80jr103.gif"alt=""><br> 迅速的在终端激活文本编辑器用来写命令。 具体用法是按住 Ctrl+x 然后再按 e，系统会自动调用默认的编辑器。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;space&gt;<span class="built_in">command</span></span><br></pre></td></tr></table></figure><p>在命令之前添加空格，命令不会记录在 bash 记录中。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl ifconfig.me</span><br></pre></td></tr></table></figure><p>获取你的外网 IP</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctrl<span class="_">-l</span></span><br></pre></td></tr></table></figure><p>清除终端的信息。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="built_in">cd</span> /tmp &amp;&amp; ls)</span><br></pre></td></tr></table></figure><p>进入一个目录，执行命令后回到原目录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/issue</span><br></pre></td></tr></table></figure><p>查看安装的 Linux 发行版</p>]]></content>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> terminal </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>添加一个随机的 Git 提交说明</title>
      <link href="/2015/11/26/random-git-commit/"/>
      <url>/2015/11/26/random-git-commit/</url>
      <content type="html"><![CDATA[<p><strong> 代码 </strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">"<span class="variable">$(curl -s http://whatthecommit.com/ | awk'/&lt;p&gt;/ &#123;sub("&lt;p&gt;", "")</span>; print &#125;')"</span></span><br></pre></td></tr></table></figure><a id="more"></a><p> 适用于不是很重要的项目中的提交说明，工作中慎用。</p><p><img src="https://ws3.sinaimg.cn/large/006tKfTcly1flzgn1lz0oj31kw0bmjuh.jpg"alt=""></p>]]></content>
      
      <categories>
          
          <category> snippets </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> snippets </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>扩充 Mac 原生字典库</title>
      <link href="/2015/11/25/extends-mac-dict-apps/"/>
      <url>/2015/11/25/extends-mac-dict-apps/</url>
      <content type="html"><![CDATA[<p>DictUnifer 是一款在 Mac 下能够转换字典格式的软件。把第三方的词库转换成「Mac 词典」支持的格式。</p><a id="more"></a><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1flzgn32mbnj30ki090jsm.jpg" alt=""></p><p>使用方法也是非常简便：拖动 stardic 的字典文件上去即可 </p><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1flzgn7667gg30c90duali.gif"alt=""></p><p> 另外，字典下载地址： <a href="http://abloz.com/huzheng/stardict-dic/" target="_blank" rel="noopener">http://abloz.com/huzheng/stardict-dic/</a></p>]]></content>
      
      <categories>
          
          <category> soft </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mac </tag>
            
            <tag> soft </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>纪录片 - 陈冠希</title>
      <link href="/2015/11/24/vice-edc/"/>
      <url>/2015/11/24/vice-edc/</url>
      <content type="html"><![CDATA[<h2 id="《还记得我吗》–陈冠希"><a href="#《还记得我吗》–陈冠希" class="headerlink" title="《还记得我吗》–陈冠希"></a>《还记得我吗》–陈冠希 </h2><p> 陈冠希是谁? 这世界上有几亿人看过他的照片；陈冠希在做什么？媒体上的他声名狼藉；VICE 拍陈冠希？听起来很刺激，也合情合理 —— 他身上具备一切精彩故事的必要元素，他就是 VICE 要讲的故事。</p><a id="more"></a><p>分享一下 Vice 拍摄的陈冠希的记录片：</p><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1flzgu5wil8j30az0drq45.jpg" alt=""></p><p>第一篇：</p><iframe height="498"width="510"src="http://player.youku.com/embed/XMTM5OTgzMDM4NA=="frameborder="0"allowfullscreen></iframe><p>第二篇：</p><iframe height="498"width="510"src="http://player.youku.com/embed/XMTQwMDc2NzIxMg=="frameborder="0"allowfullscreen></iframe><p>第三篇：</p><iframe height="498"width="510"src="http://player.youku.com/embed/XMTQwMTY1NzkyMA=="frameborder="0" allowfullscreen></iframe><p>记忆很深的一句话，有人问我，如果能够再来，你觉得你有什么需要改变的？ 我什么都不改变。</p>]]></content>
      
      
        <tags>
            
            <tag> life </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>YAML 简介</title>
      <link href="/2015/11/24/yaml/"/>
      <url>/2015/11/24/yaml/</url>
      <content type="html"><![CDATA[<h2 id="YAML 简介"><a href="#YAML 简介" class="headerlink" title="YAML 简介"></a>YAML 简介 </h2><p><code>YAML</code> <strong>[YAML Ain’t Markup Language]</strong></p><p> 和 GNU 一样，YAML 是一个递归着说“不”的名字。不同的是，GNU 对 UNIX 说不，YAML 说不的对象是 XML。</p><a id="more"></a><p><img src="https://ws4.sinaimg.cn/large/006tKfTcly1flzgmthwijj30cs0go76w.jpg" alt="image"></p><h2 id="语法"><a href="# 语法" class="headerlink" title="语法"></a>语法 </h2><p><code>Structure</code> 通过 <strong> 空格 </strong> 来展示。<code>Sequence</code>里的项用”-“来代表，<code>Map</code>里的键值对用”:”分隔.<br>这几乎就是所有的语法了.</p><blockquote><p>注意是空格不是 <code>TAB</code>, <code>Makefile</code> 刚好相反。</p></blockquote><h2 id="举例"><a href="# 举例" class="headerlink" title="举例"></a>举例 </h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">John</span> <span class="string">Smith</span></span><br><span class="line"><span class="attr">age:</span> <span class="number">37</span></span><br><span class="line"><span class="attr">spouse:</span></span><br><span class="line"><span class="attr">    name:</span> <span class="string">Jane</span> <span class="string">Smith</span></span><br><span class="line"><span class="attr">    age:</span> <span class="number">25</span></span><br><span class="line"><span class="attr">children:</span></span><br><span class="line"><span class="attr">    -   name:</span> <span class="string">Jimmy</span> <span class="string">Smith</span></span><br><span class="line"><span class="attr">        age:</span> <span class="number">15</span></span><br><span class="line"><span class="attr">    -   name:</span> <span class="string">Jenny</span> <span class="string">Smith</span></span><br><span class="line"><span class="attr">        age:</span> <span class="number">12</span></span><br></pre></td></tr></table></figure><p>John 今年 37 岁，有一个幸福的四口之家。两个孩子 Jimmy 和 Jenny 活泼可爱。妻子 Jane 年轻美貌。<br> 可见 YAML 的可读性是不错。</p><p>顺便推荐下在线 yaml 解析器：<a href="http://yaml-online-parser.appspot.com/" target="_blank" rel="noopener">http://yaml-online-parser.appspot.com/</a></p><p>参考链接： <a href="http://www.ibm.com/developerworks/cn/xml/x-cn-yamlintro/" target="_blank" rel="noopener">http://www.ibm.com/developerworks/cn/xml/x-cn-yamlintro/</a></p>]]></content>
      
      
        <tags>
            
            <tag> dev </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Dota2 国服设定</title>
      <link href="/2015/11/24/dota2-steam-settings/"/>
      <url>/2015/11/24/dota2-steam-settings/</url>
      <content type="html"><![CDATA[<h2 id="Dota2- 国服设定"><a href="#Dota2- 国服设定" class="headerlink" title="Dota2 国服设定"></a>Dota2 国服设定 </h2><p>Dota2 在完美代理后单独出了一个国服的客户端，但是需要同时注册 Steam 帐号和国服帐号，可见国服的 Dota2 也是绑定在 Steam 上的，既然如此，倒不如直接使用 steam 客户端省事。</p><a id="more"></a><p><img src="https://ws1.sinaimg.cn/large/006tNc79gy1flzgw7i744j31kw0zk7wi.jpg" alt="image"></p><p> 具体来说，使用 steam 登录国服添加的选项仅仅需要在启动项中添加 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-perfectworld</span><br></pre></td></tr></table></figure><p> 即可。</p><p>处于特殊性，如果你的 steam 客户端是英文版，但你想使你的 dota2 为中文界面，使用如下命令：<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-language schinese</span><br></pre></td></tr></table></figure><p></p>]]></content>
      
      
        <tags>
            
            <tag> dota2 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Faker.js</title>
      <link href="/2015/08/24/faker-js/"/>
      <url>/2015/08/24/faker-js/</url>
      <content type="html"><![CDATA[<p>Faker.js 能够生成名字、地址、电话号码等信息的库。<br><a id="more"></a></p><p> 项目地址： <a href="https://github.com/Marak/faker.js" target="_blank" rel="noopener">https://github.com/Marak/faker.js</a></p><p> 使用方法比较简单：</p><ul><li> 浏览器中 </li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src = <span class="string">"faker.js"</span> type = <span class="string">"text/javascript"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">var</span> randomName = faker.name.findName(); <span class="comment">// Caitlyn Kerluke</span></span><br><span class="line">  <span class="keyword">var</span> randomEmail = faker.internet.email(); <span class="comment">// Rusty@arne.info</span></span><br><span class="line">  <span class="keyword">var</span> randomCard = faker.helpers.createCard(); <span class="comment">// random contact card containing many properties</span></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ar faker = <span class="built_in">require</span>(<span class="string">'faker'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> randomName = faker.name.findName(); <span class="comment">// Rowan Nikolaus</span></span><br><span class="line"><span class="keyword">var</span> randomEmail = faker.internet.email(); <span class="comment">// Kassandra.Haley@erich.biz</span></span><br><span class="line"><span class="keyword">var</span> randomCard = faker.helpers.createCard(); <span class="comment">// random contact card containing many properties</span></span><br></pre></td></tr></table></figure><p>Faker 的 API 中包含了大量的方法，并且，有针对本地化的语言生成可以使用 <code>faker.locale = &#39;zh_CN&#39;</code>。</p>]]></content>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>使用 supervisor 来管理 linux 程序</title>
      <link href="/2015/03/04/use-supervisor-to-manager-your-task/"/>
      <url>/2015/03/04/use-supervisor-to-manager-your-task/</url>
      <content type="html"><![CDATA[<h2 id="supervisor 简介"><a href="#supervisor 简介" class="headerlink" title="supervisor 简介"></a><code>supervisor</code>简介 </h2><p>supervisor 是使用 python 语言编写的可以监控和控制系统类 unix 进程的程序，类似于 ruby 的 god 。</p><a id="more"></a><h2 id="安装"><a href="# 安装" class="headerlink" title="安装"></a> 安装 </h2><p><code>supervisor</code> 是 python 编写，安装十分简便，只需：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$: easy_install supervisor</span><br></pre></td></tr></table></figure><h2 id="使用"><a href="# 使用" class="headerlink" title="使用"></a>使用 </h2><p>supervisor 可以使用配置文件来启动，指定参数 -c , 默认位置使用<br>-help 查看。</p><p> 建立 <code>supervisord.conf</code> 配置文件。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[program:cow]</span><br><span class="line">command = nohup  /home/harchiko/cow/cow &amp;</span><br><span class="line">autostart = true</span><br><span class="line">autorestart = true</span><br><span class="line">[supervisord]</span><br></pre></td></tr></table></figure><p>这是用来监控 <code>cow</code> 的文件。</p><p>如果提示 </p><p><code>Error: could not find config file supervisord.</code></p><p> 那是因为缺少 <code>[supervisord]</code> 模块，如上述配置文件中添加即可。</p><h2 id="启动"><a href="# 启动" class="headerlink" title="启动"></a>启动 </h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">supervisord -c supervisord.conf</span><br></pre></td></tr></table></figure><p> 如是启动即可。</p><p>注意，如果想要自动重启务必加上 <code>autorestart = true</code></p><p>另外，supervisor 还有交互式命令 supervisorcli , 输入 help 查看即可了解如何操作。</p>]]></content>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> linux </tag>
            
            <tag> supervisor </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>加速开发环境的搭建</title>
      <link href="/2015/02/15/speed-your-working-space/"/>
      <url>/2015/02/15/speed-your-working-space/</url>
      <content type="html"><![CDATA[<p>在国内，一些服务或者被墙，或者访问速度过慢，对开发者而言，这是最痛苦的，下面，介绍几种减轻痛苦的良方以飨读者。</p><a id="more"></a><h1 id="Linux- 篇"><a href="#Linux- 篇" class="headerlink" title="Linux 篇"></a>Linux 篇 </h1><p>linux 下更改源：<a href="http://mirrors.ustc.edu.cn/" title="中科大源" target="_blank" rel="noopener">http://mirrors.ustc.edu.cn/</a>，选择自己的 Linux 版本，然后选择对应的源配置，具体使用见<a href="https://lug.ustc.edu.cn/wiki/mirrors/help" title="配置帮助" target="_blank" rel="noopener">https://lug.ustc.edu.cn/wiki/mirrors/help</a></p><h1 id="HomeBrew- 篇"><a href="#HomeBrew- 篇" class="headerlink" title="HomeBrew 篇"></a>HomeBrew 篇</h1><p>github 时不时的网络中断，brew update 经常不成功，更改 git 地址为中科大 git 源的地址：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span></span><br><span class="line">git remote <span class="built_in">set</span>-url origin http://mirrors.ustc.edu.cn/homebrew.git</span><br><span class="line">brew update</span><br></pre></td></tr></table></figure><h1 id="Node- 篇"><a href="#Node- 篇" class="headerlink" title="Node 篇"></a>Node 篇</h1><h2 id="NVM"><a href="#NVM" class="headerlink" title="NVM"></a>NVM</h2><p>clone nvm 到本地，假设目录位于 <code>～</code><br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/creationix/nvm.git</span><br></pre></td></tr></table></figure><p></p><p> 更改 nvm 镜像地址，在.bashrc 中添加 <br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># nvm</span><br><span class="line">export NVM_NODEJS_ORG_MIRROR=http://dist.u.qiniudn.com</span><br><span class="line">source ~/nvm/nvm.sh</span><br></pre></td></tr></table></figure><p></p><p><code>source .bashrc</code> 后运行 nvm</p><h2 id="NPM"><a href="#NPM" class="headerlink" title="NPM"></a>NPM</h2><p> 通过 <code>--registry</code> 更改参数：<br><code>$ npm --registry=https://registry.npm.taobao.org install koa</code></p><h1 id="Pypi- 篇"><a href="#Pypi- 篇" class="headerlink" title="Pypi 篇"></a>Pypi 篇 </h1><p> 通过 <code>-i</code> 更改参数:</p><p>如:<code>$ pip install web.py -i http://pypi.mirrors.ustc.edu.cn/simple</code></p><p><strong>注意后面有 <code>/simple</code></strong></p><p> 要配制成默认的话，需要创建或修改配置文件（linux 的文件在 <code>~/.pip/pip.conf</code>，windows 在<code>%HOMEPATH%\pip\pip.ini</code>），修改内容为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[global]</span><br><span class="line"></span><br><span class="line">index-url = http://pypi.mirrors.ustc.edu.cn/simple</span><br></pre></td></tr></table></figure><blockquote><p> 注意，由于更改的都是非官方源，但由于选择的这些企业或学校都是属于比较靠谱的，基本不存在突然不可用的可能，如果有问题，改回来即可。</p></blockquote>]]></content>
      
      
        <tags>
            
            <tag> mac </tag>
            
            <tag> python </tag>
            
            <tag> linux </tag>
            
            <tag> nodejs </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hexo toc 无法显示</title>
      <link href="/2015/02/11/hexo-toc-problem/"/>
      <url>/2015/02/11/hexo-toc-problem/</url>
      <content type="html"><![CDATA[<h2 id="问题"><a href="# 问题" class="headerlink" title="问题"></a>问题 </h2><p> 使用 Hexo 渲染的时候发现有的问题有 TOC，有的文章没有 TOC。经过一番探索研究，找到了问题所在。</p><a id="more"></a><h2 id="排查"><a href="# 排查" class="headerlink" title="排查"></a>排查 </h2><ul><li> 换了 Chrome 浏览器之后发现问题依旧。排除浏览器的原因。</li></ul><ul><li><code>hexo clean</code> <code>hexo g</code>之后发现问题依旧，排除旧模板的原因。</li></ul><ul><li>更改_config 模板配置文件 TOC 模块之后问题依旧，排除模板配置原因。</li></ul><ul><li>打开 Firebug，查看 JS 代码之后发现 H2 如果标题没有的话会被设定 <code>display:none</code><br><img src="https://ws3.sinaimg.cn/large/006tNc79gy1flzgtizw3oj31400o6gqx.jpg" alt=""></li></ul><p> 至此！谜题就此揭开!</p><h2 id=" 解决办法 "><a href="# 解决办法 "class="headerlink"title=" 解决办法 "></a>解决办法 </h2><p> 写的时候添加个二级标题。也就是<code>##</code></p>]]></content>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>shadowsocks 使用指南</title>
      <link href="/2015/02/10/shadowsocks-user-manual/"/>
      <url>/2015/02/10/shadowsocks-user-manual/</url>
      <content type="html"><![CDATA[<h2 id="关于"><a href="# 关于" class="headerlink" title="关于"></a>关于 </h2><p><strong>ShadowSocks</strong> 在上一篇的<a href="http://blog.zhaochunqi.com/Auto-Proxy/" title="Shadowsocks 透明代理的实现">Shadowsocks 透明代理的实现</a> 中提到过，本文将重点讲解一下 shadowsocks 的使用方法。</p><p>原文链接：<a href="http://blog.zhaochunqi.com/shadowsocks-user-manual/">http://blog.zhaochunqi.com/shadowsocks-user-manual/</a></p><p>作者：<a href="http://blog.zhaochunqi.com" title="http://blog.zhaochunqi.com">zhaochunqi</a></p><a id="more"></a><h2 id="ShadowSocks- 介绍"><a href="#ShadowSocks- 介绍" class="headerlink" title="ShadowSocks 介绍"></a>ShadowSocks 介绍 </h2><ul><li> 代理 / 翻强工具。</li><li>使用稳定。</li></ul><h2 id="下载"><a href="# 下载" class="headerlink" title="下载"></a>下载 </h2><p> 下载：<a href="https://github.com/shadowsocks/shadowsocks/wiki/Ports-and-Clients#windows" target="_blank" rel="noopener">https://github.com/shadowsocks/shadowsocks/wiki/Ports-and-Clients#windows</a>在这里选择对应版本的 shadowsocks 客户端下载。</p><p>介于目前国内访问环境的恶劣，直接提供下地址：</p><p>windows 客户端（2015-02-10）: <a href="http://harchiko.qiniudn.com/shadowsocks-user-manual/Shadowsocks-win-2.1.6.zip" target="_blank" rel="noopener">http://harchiko.qiniudn.com/shadowsocks-user-manual/Shadowsocks-win-2.1.6.zip</a></p><p>Mac 客户端（2015-02-10）: <a href="http://harchiko.qiniudn.com/shadowsocks-user-manual/ShadowsocksX-2.6.2.dmg" target="_blank" rel="noopener">http://harchiko.qiniudn.com/shadowsocks-user-manual/ShadowsocksX-2.6.2.dmg</a></p><p><strong>注意：</strong>最好先尝试下能否从官方下载。不行的话可以从我这里下载。</p><h2 id="使用"><a href="# 使用" class="headerlink" title="使用"></a>使用 </h2><p>Shadowsocks 的配置很简单：</p><p><img src="http://harchiko.qiniudn.com/shadowsocks-user-manual/shadowsocks.png" alt=""></p><p> 填写好服务器 ip，服务器端口，密码，加密方式后即可。代理端口默认即可。</p><p>打开 IE，开启 Google 试试吧!</p><p>针对 Firefox 和 Chrome 有对应的插件配置，注意使用 SOCKS5 代理即可。</p>]]></content>
      
      
        <tags>
            
            <tag> mac </tag>
            
            <tag> shadowsocks </tag>
            
            <tag> vpn </tag>
            
            <tag> windows </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Parallels 下 Vagrant 使用指南</title>
      <link href="/2015/02/05/introduce-vagrant/"/>
      <url>/2015/02/05/introduce-vagrant/</url>
      <content type="html"><![CDATA[<p>环境：OSX yosemite/Parallels Desktop 10</p><h2 id="Vagrant- 介绍"><a href="#Vagrant- 介绍" class="headerlink" title="Vagrant 介绍"></a>Vagrant 介绍 </h2><p>Vagrant 是一个基于 Ruby 的工具，用于创建和部署虚拟化开发环境。它 使用 Oracle 的开源 VirtualBox 虚拟化系统，使用 Chef 创建自动化虚拟环境。</p><a id="more"></a><h2 id="安装 -Vagrant"><a href="# 安装 -Vagrant" class="headerlink" title="安装 Vagrant"></a> 安装 Vagrant</h2><p>从这里 <a href="http://www.vagrantup.com/downloads" title="vagrant 下载" target="_blank" rel="noopener">http://www.vagrantup.com/downloads</a> 下载对应版本的 vagrant 安装。</p><h2 id="安装 -Vagrant- 插件"><a href="# 安装 -Vagrant- 插件" class="headerlink" title="安装 Vagrant 插件"></a>安装 Vagrant 插件 </h2><p> 打开 Terminal，安装 vagrant 插件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vagrant plugin install vagrant-parallels</span><br></pre></td></tr></table></figure><h2 id="使用 -Vagrant"><a href="# 使用 -Vagrant" class="headerlink" title="使用 Vagrant"></a>使用 Vagrant</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir new_vagrant_project</span><br><span class="line">$ <span class="built_in">cd</span> new_vagrant_project</span><br><span class="line">$ vagrant init parallels/centos-6.5</span><br><span class="line">$ vagrant up --provider=parallels</span><br></pre></td></tr></table></figure><p>这样就成功的安装了 centos-6.5</p><h2 id="修改默认的 -Provider- 可选"><a href="# 修改默认的 -Provider- 可选" class="headerlink" title="修改默认的 Provider (可选)"></a>修改默认的 Provider (可选)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> VAGRANT_DEFAULT_PROVIDER=parallels</span><br></pre></td></tr></table></figure><p>可添加到.bashrc 或者 .zshrc(如果你使用 zsh)</p><h2 id="使用 SSH 连接"><a href="# 使用 SSH 连接" class="headerlink" title="使用 SSH 连接"></a>使用 SSH 连接 </h2><p> 进入 vagrant 所在目录：<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vagrant ssh</span><br></pre></td></tr></table></figure><p></p><h2 id="box- 选择"><a href="#box- 选择" class="headerlink" title="box 选择"></a>box 选择 </h2><p> 如果你想要其他的发行版：如 ubuntu 等，在这个网页中查找是否有你所需要的：<br><a href="https://vagrantcloud.com/boxes/search?provider=parallels" title="box" target="_blank" rel="noopener">https://vagrantcloud.com/boxes/search?provider=parallels</a></p><h2 id="vagrant-manager（可选 - 推荐）"><a href="#vagrant-manager（可选 - 推荐）" class="headerlink" title="vagrant manager（可选 / 推荐）"></a>vagrant manager（可选 / 推荐）</h2><p>Vagrant Manager 是在通知栏的可以管理 Vagrant 的工具。（Mac 版本 /Windows 版本都有）</p><p>具体表现如图：<br><img src="http://harchiko.qiniudn.com/introduce-vagrant/vagrant_manager.gif" alt="vagrant manager"></p><p>下载见：<a href="https://github.com/lanayotech/vagrant-manager" title="vagrant manager" target="_blank" rel="noopener">https://github.com/lanayotech/vagrant-manager</a></p><h3 id="Happy-Coding"><a href="#Happy-Coding" class="headerlink" title="Happy Coding ~"></a>Happy Coding ~</h3>]]></content>
      
      <categories>
          
          <category> soft </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mac </tag>
            
            <tag> vagrant </tag>
            
            <tag> parallels </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>美剧订阅神器 showrss</title>
      <link href="/2015/02/04/tools-for-us-TV-series/"/>
      <url>/2015/02/04/tools-for-us-TV-series/</url>
      <content type="html"><![CDATA[<p>今日同事推荐了个看美剧的神器的网站 <a href="http://showrss.info/" target="_blank" rel="noopener">showrss</a>,</p><a id="more"></a><h2 id="界面"><a href="# 界面" class="headerlink" title="界面"></a>界面 </h2><p> 这个网站的样子大概是这个样子的:<br><img src="https://ws2.sinaimg.cn/large/006tKfTcly1flzgpt2aj1j30rf0d1750.jpg" alt="showrss"></p><h3 id="使用 RSS 订阅"><a href="# 使用 RSS 订阅" class="headerlink" title="使用 RSS 订阅"></a>使用 RSS 订阅 </h3><h4 id="你还可以使用 RSS 订阅"><a href="# 你还可以使用 RSS 订阅" class="headerlink" title="你还可以使用 RSS 订阅"></a> 你还可以使用 RSS 订阅 </h4><p> 注册进去后，可以订阅各种美剧如：Grey’s Anatomy, The Big Bang theory 等，</p><h4 id="在界面中点击你喜欢的美剧名称即可订阅"><a href="# 在界面中点击你喜欢的美剧名称即可订阅" class="headerlink" title="在界面中点击你喜欢的美剧名称即可订阅:"></a>在界面中点击你喜欢的美剧名称即可订阅:</h4><p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1flzgpudq1tj30qr0anwff.jpg" alt="pickseries"></p><h4 id="如果你想知道下一集是什么的话，网站还提供计划表"><a href="# 如果你想知道下一集是什么的话，网站还提供计划表" class="headerlink" title="如果你想知道下一集是什么的话，网站还提供计划表:"></a>如果你想知道下一集是什么的话，网站还提供计划表:</h4><p><img src="https://ws1.sinaimg.cn/large/006tKfTcly1flzgpvnci6j30rs06wwet.jpg" alt="schedule"></p><h4 id="你还可以使用 RSS 订阅 -1"><a href="# 你还可以使用 RSS 订阅 -1" class="headerlink" title="你还可以使用 RSS 订阅"></a>你还可以使用 RSS 订阅 </h4><p><img src="https://ws2.sinaimg.cn/large/006tKfTcly1flzgpx61awj30tt07rt9b.jpg" alt="rss"></p><h4 id="在这里面，你可以进行："><a href="# 在这里面，你可以进行：" class="headerlink" title="在这里面，你可以进行："></a> 在这里面，你可以进行：</h4><ul><li>单集 RSS 订阅 </li><li> 个人剧集订阅 </li><li> 剧集时间表订阅 (提供 rss 和 iCalendar 格式)</li><li> 网站信息订阅（这个不重要)</li></ul>]]></content>
      
      
        <tags>
            
            <tag> series </tag>
            
            <tag> tv </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>基于 Shadowsocks 透明代理的实现</title>
      <link href="/2015/02/04/Auto-Proxy/"/>
      <url>/2015/02/04/Auto-Proxy/</url>
      <content type="html"><![CDATA[<p><strong>本文只是提供了一个透明代理实现的思路，具体代码等待后续补充。</strong></p><a id="more"></a><p>程序员们最在意的，可能就是网络跟设备配置了。</p><p>做一个透明代理，能够做到：</p><pre><code>自动翻墙，本地无需配置。</code></pre><h2 id="网络拓扑图"><a href="# 网络拓扑图" class="headerlink" title="网络拓扑图"></a>网络拓扑图 </h2><p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1flzgup0srqj30j906oq33.jpg" alt="透明代理网络拓扑图"></p><h2 id="需求"><a href="# 需求" class="headerlink" title="需求"></a> 需求 </h2><ol><li> 一台外网 VPS（能被中国大陆访问到，能够访问到 Facebook 等网站）</li><li>一台本地 Linux 服务器 (此处可以用智能路由器代替)。</li></ol><h2 id="方案设想"><a href="# 方案设想" class="headerlink" title="方案设想"></a> 方案设想 </h2><ol><li> 本地的 Linux 服务器作为网关， 处理本地流量和需要代理的流量。</li><li>本地服务器将需要代理的流量转发给 Shadowsocks 并通过 Shadowsocks 来实现代理功能。</li><li>流量转发到 Cow 中，然后通过 Cow 来判断需要自动翻墙的网址。</li></ol><h2 id="具体方案"><a href="# 具体方案" class="headerlink" title="具体方案"></a>具体方案 </h2><ol><li> 在 VPS 中安装 Shadowsocks，并在本地客户端测试是否成功。</li><li>在本地 Linux 服务器中部署 Cow，通过 Cow 来进行 ShadowSocks 代理。</li><li>使用 iptables 将流量转发到 Cow 本地监控的端口。</li></ol>]]></content>
      
      
        <tags>
            
            <tag> proxy </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hexo 更改默认 Google 字体</title>
      <link href="/2015/01/27/change-google-font-to-360/"/>
      <url>/2015/01/27/change-google-font-to-360/</url>
      <content type="html"><![CDATA[<p> 因为一些国内的客观原因，google 的访问速度一直很慢，通过 firebug 看了下 google 相关的服务加载速度超过了 1s 种，而且经常加载不成功。</p><a id="more"></a><p> 更改方法：</p><p>terminal 中查找 themes 里对应 googlefont 的数据。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -ir googlefont themes/</span><br></pre></td></tr></table></figure><p> 找到对应的地方替换为 360 的字体源：</p><p>360 前端 CDN 网站：<a href="http://libs.useso.com/" title="360 前端 CDN" target="_blank" rel="noopener">http://libs.useso.com/</a></p><p><strong> 本人对 360 不黑不粉，请纠结 360 的让道 </strong></p>]]></content>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>xpath 简明教程</title>
      <link href="/2015/01/23/how-to-use-xpath/"/>
      <url>/2015/01/23/how-to-use-xpath/</url>
      <content type="html"><![CDATA[<h2 id="什么是 xpath"><a href="# 什么是 xpath" class="headerlink" title="什么是 xpath?"></a>什么是 xpath?</h2><blockquote><p>XPath 是一门在 XML 文档中查找信息的语言。XPath 可用来在 XML 文档中对元素和属性进行遍历。</p></blockquote><a id="more"></a><h2 id="XPath- 术语"><a href="#XPath- 术语" class="headerlink" title="XPath 术语"></a>XPath 术语 </h2><table><thead><tr><th> 术语 </th><th> 描述 </th></tr></thead><tbody><tr><td> 节点 (node)</td><td> 在 XPath 中，有七种类型的节点：元素、属性、文本、命名空间、处理指令、注释以及文档（根）节点。XML 文档是被作为节点树来对待的。树的根被称为文档节点或者根节点。</td></tr><tr><td>基本值（或称原子值，Atomic value）</td><td>无父无子的节点 </td></tr><tr><td> 项目（Item）</td><td>基本值或节点 </td></tr><tr><td> 节点关系 </td><td> 父、子、同胞等 </td></tr></tbody></table><h2 id="XPath- 用法"><a href="#XPath- 用法" class="headerlink" title="XPath 用法"></a>XPath 用法</h2><p> 选取节点 </p><blockquote><p> 下面列举了最有用的节点表达式 </p></blockquote><table><thead><tr><th> 表达式 </th><th> 描述 </th></tr></thead><tbody><tr><td>nodename</td><td> 选取此节点的所有子节点。</td></tr><tr><td>/</td><td>从根节点选取。</td></tr><tr><td>//</td><td>从匹配选择的当前节点选择文档中的节点，而不考虑它们的位置。</td></tr><tr><td>.</td><td>选取当前节点。</td></tr><tr><td>..</td><td>选取当前节点的父节点。</td></tr><tr><td>@</td><td>选取属性。</td></tr></tbody></table><p><strong>text() 选取节点内元素 </strong></p><p> 下面以一段 xml 代码为例：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">bookstore</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">book</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span> <span class="attr">lang</span>=<span class="string">"eng"</span>&gt;</span>Harry Potter<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">price</span>&gt;</span>29.99<span class="tag">&lt;/<span class="name">price</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">book</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">book</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span> <span class="attr">lang</span>=<span class="string">"eng"</span>&gt;</span>Learning XML<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">price</span>&gt;</span>39.95<span class="tag">&lt;/<span class="name">price</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">book</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">bookstore</span>&gt;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>路径表达式 </th><th> 结果 </th></tr></thead><tbody><tr><td>bookstore</td><td> 选取 bookstore 元素的所有子节点。</td></tr><tr><td>/bookstore</td><td>选取根元素 bookstore。注释：假如路径起始于正斜杠 (/)，则此路径始终代表到某元素的绝对路径！</td></tr><tr><td>bookstore/book</td><td> 选取属于 bookstore 的子元素的所有 book 元素。</td></tr><tr><td>//book</td><td>选取所有 book 子元素，而不管它们在文档中的位置。</td></tr><tr><td>bookstore//book</td><td>选择属于 bookstore 元素的后代的所有 book 元素，而不管它们位于 bookstore 之下的什么位置。</td></tr><tr><td>//@lang</td><td>选取名为 lang 的所有属性。</td></tr></tbody></table><h2 id="谓语"><a href="# 谓语" class="headerlink" title="谓语"></a>谓语 </h2><p> 谓语用来查找某个特定的节点或者包含某个指定的值的节点。<br>谓语被嵌在方括号中。</p><table><thead><tr><th>路径表达式 </th><th> 结果 </th></tr></thead><tbody><tr><td>/bookstore/book<a href="http://www.oschina.net/" title="开源中国" target="_blank" rel="noopener">1</a></td><td> 选取属于 bookstore 子元素的第一个 book 元素。</td></tr><tr><td>/bookstore/book[last()]</td><td>选取属于 bookstore 子元素的最后一个 book 元素。</td></tr><tr><td>/bookstore/book[last()-1]</td><td>选取属于 bookstore 子元素的倒数第二个 book 元素。</td></tr><tr><td>/bookstore/book[position()&lt;3]</td><td>选取最前面的两个属于 bookstore 元素的子元素的 book 元素。</td></tr><tr><td>//title[@lang]</td><td>选取所有拥有名为 lang 的属性的 title 元素。</td></tr><tr><td>//title[@lang=’eng’]</td><td>选取所有 title 元素，且这些元素拥有值为 eng 的 lang 属性。</td></tr><tr><td>/bookstore/book[price&gt;35.00]</td><td>选取 bookstore 元素的所有 book 元素，且其中的 price 元素的值须大于 35.00。</td></tr><tr><td>/bookstore/book[price&gt;35.00]/title</td><td>选取 bookstore 元素中的 book 元素的所有 title 元素，且其中的 price 元素的值须大于 35.00。</td></tr></tbody></table><h2 id="实战"><a href="# 实战" class="headerlink" title="实战"></a>实战 </h2><p> 以 <a href="http://www.oschina.net/" title="开源中国" target="_blank" rel="noopener">开源中国 </a> 为例，我们来试试 XPath 能做什么？</p><ol><li><p>假设我们想要获取图示部分的内容：<br><img src="http://harchiko.qiniudn.com/how-to-use-xpath/oschina.png" alt="开源中国" title="开源中国"></p></li><li><p>打开 Firebug，定位到这一部分：<br><img src="http://harchiko.qiniudn.com/how-to-use-xpath/oschina-firebug.png" alt="Firebug" title="firebug"><br>xpath 写为: <code>id(&#39;ProjectNews&#39;)/ul/li/a</code></p></li><li><p>使用插件 xpath checker 查看到获取到的信息 <br><img src="http://harchiko.qiniudn.com/how-to-use-xpath/xpath.png" alt="xpath" title="xpath"></p></li></ol><p> 获取到了。</p><h2 id="美女"><a href="# 美女" class="headerlink" title="美女"></a>美女 </h2><p> 比如： 下载花瓣中这个画板的图片 <a href="http://huaban.com/boards/293742/" target="_blank" rel="noopener">http://huaban.com/boards/293742/</a></p><p> 图片如图：<br><img src="http://harchiko.qiniudn.com/how-to-use-xpath/huaban.png" alt="花瓣美女"></p><p>要下载这里面每一个美女的图片，重复我们之前的步骤：</p><p>为了找到图片的 URL，打开 firebug，找到图片对应的 xpath 路径，经过一番尝试：<code>//div/div/div/div/a/img[1][@width=&quot;236&quot;]</code>可以顺利找到所有的图片。</p><p><img src="http://harchiko.qiniudn.com/how-to-use-xpath/huaban_xpath_01.png" alt="xpath"></p><p>通过 <code>//div/div/div/div/a/img[1][@width=&quot;236&quot;]/@src</code> 即可顺利找到所有图片的 URL。</p><p><img src="http://harchiko.qiniudn.com/how-to-use-xpath/huaban_xpath_02.png" alt="xpath"></p><p>这样所有的 xpath 都获取到了。</p><p>这样就获取到了这些地址，但这些地址并不是原图大小的，对比原图与这个地址，发现后面 236 更改为 658 即可获取到大图地址。</p>]]></content>
      
      
        <tags>
            
            <tag> xpath </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>如何确定 python 运行所在的文件位置</title>
      <link href="/2015/01/23/python-runs-directory/"/>
      <url>/2015/01/23/python-runs-directory/</url>
      <content type="html"><![CDATA[<p>如何确定 python 脚本的位置？<br>python 脚本有个 <code>__file__</code> 属性，能够确定脚本所在的位置。但由于运行文件夹的不同，<code>__file__</code>的相对路径也不同。</p><a id="more"></a><h2 id="如何确定当前脚本的绝对路径"><a href="# 如何确定当前脚本的绝对路径" class="headerlink" title="如何确定当前脚本的绝对路径"></a>如何确定当前脚本的绝对路径 </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">print</span> os.path.realpath(__file__)</span><br></pre></td></tr></table></figure><h2 id="如何确定当前脚本所在的文件夹"><a href="# 如何确定当前脚本所在的文件夹" class="headerlink" title="如何确定当前脚本所在的文件夹"></a> 如何确定当前脚本所在的文件夹 </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">print</span> os.path.dirname(os.path.realpath(__file__))</span><br></pre></td></tr></table></figure><h2 id="如何确定当前脚本所在的文件夹的父文件夹"><a href="# 如何确定当前脚本所在的文件夹的父文件夹" class="headerlink" title="如何确定当前脚本所在的文件夹的父文件夹"></a> 如何确定当前脚本所在的文件夹的父文件夹 </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">print</span> os.path.dirname(os.path.dirname(os.path.realpath(__file__)))</span><br></pre></td></tr></table></figure><h2 id="一种编程方式"><a href="# 一种编程方式" class="headerlink" title="一种编程方式"></a> 一种编程方式 </h2><p> 在编写程序的时候，想要使用一些绝对路径相关的变量，会单独定义一个脚本如 <code>pathinfo.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">src_dir</span><span class="params">()</span>:</span></span><br><span class="line"><span class="keyword">return</span> os.path.dirname(os.path.realpath(__file__))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">code_dir</span><span class="params">()</span>:</span></span><br><span class="line"><span class="keyword">return</span> os.path.dirname(src_dir())</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log_dir</span><span class="params">()</span>:</span></span><br><span class="line"><span class="keyword">return</span> code_dir()+<span class="string">'/log'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">conf_dir</span><span class="params">()</span>:</span></span><br><span class="line"><span class="keyword">return</span> code_dir()+<span class="string">'/conf'</span></span><br></pre></td></tr></table></figure><p>这样，使用的时候 <code>import pathinfo</code> 即可</p>]]></content>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>如何在 Ubuntu 中安装 hexo</title>
      <link href="/2014/12/22/install-hexo/"/>
      <url>/2014/12/22/install-hexo/</url>
      <content type="html"><![CDATA[<h2 id="安装 -nvm"><a href="# 安装 -nvm" class="headerlink" title="安装 nvm"></a>安装 nvm</h2><p>cURL:<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl https://raw.github.com/creationix/nvm/master/install.sh | sh</span><br></pre></td></tr></table></figure><p></p><a id="more"></a><p>Wget:<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget -qO- https://raw.github.com/creationix/nvm/master/install.sh | sh</span><br></pre></td></tr></table></figure><p></p><p>安装后重启 Terminal 。</p><blockquote><p>因为使用的是 zsh，所以最好在.zshrc 文件中加入这句 <code>source ~/.nvm/nvm.sh</code></p></blockquote><h2 id="安装 -NodeJS"><a href="# 安装 -NodeJS" class="headerlink" title="安装 NodeJS"></a> 安装 NodeJS</h2><p>运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nvm install 0.10 &amp;&amp; nvm use 0.10</span><br></pre></td></tr></table></figure><h3 id="安装 -Hexo"><a href="# 安装 -Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo</span><br></pre></td></tr></table></figure><blockquote><p>Hexo 的使用以及注意事项见 <a href="http://hexo.io/docs/" target="_blank" rel="noopener"> 链接</a></p></blockquote>]]></content>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
