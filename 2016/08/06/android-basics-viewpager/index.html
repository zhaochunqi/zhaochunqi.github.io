<!doctype html><html class="theme-next pisces use-motion"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="http://fonts.useso.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css"><meta name="keywords" content="android,"><link rel="alternate" href="/atom.xml" title="Alex Coding" type="application/atom+xml"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1"><meta name="description" content="概述Layout manager that allows the user to flip left and right through pages of data. You supply an implementation of a PagerAdapter to generate the pages that the view shows.用来允许用户在含有数据的页面上左右滑动的布局管理器，需"><meta property="og:type" content="article"><meta property="og:title" content="Android 中 ViewPager 的使用☄"><meta property="og:url" content="http://blog.zhaochunqi.com/2016/08/06/android-basics-viewpager/index.html"><meta property="og:site_name" content="Alex Coding"><meta property="og:description" content="概述Layout manager that allows the user to flip left and right through pages of data. You supply an implementation of a PagerAdapter to generate the pages that the view shows.用来允许用户在含有数据的页面上左右滑动的布局管理器，需"><meta property="og:image" content="http://harchiko.qiniudn.com/75zqnxN.png"><meta property="og:image" content="https://i.imgur.com/a2wpJ80.png"><meta property="og:image" content="http://i.stack.imgur.com/ddm1j.jpg"><meta property="og:image" content="http://i.imgur.com/qZt0ug9.gif"><meta property="og:image" content="http://i.imgur.com/VaCvAm5.png"><meta property="og:image" content="http://i.imgur.com/SBxPXZZ.gif"><meta property="og:image" content="http://i.imgur.com/lCMRaJX.gif"><meta property="og:updated_time" content="2016-08-05T20:49:06.160Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Android 中 ViewPager 的使用☄"><meta name="twitter:description" content="概述Layout manager that allows the user to flip left and right through pages of data. You supply an implementation of a PagerAdapter to generate the pages that the view shows.用来允许用户在含有数据的页面上左右滑动的布局管理器，需"><meta name="twitter:image" content="http://harchiko.qiniudn.com/75zqnxN.png"><script type="text/javascript" id="hexo.configuration">var NexT=window.NexT||{},CONFIG={scheme:"Pisces",sidebar:{position:"left",display:"post"},fancybox:!0,motion:!0,duoshuo:{userId:892003,author:"Author"}}</script><title>Android 中 ViewPager 的使用☄ | Alex Coding</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-42448552-1","auto"),ga("send","pageview")</script><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?cfffa20d202ba9f4f0d6257e1cc94ea6";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><div class="container one-collumn sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Alex Coding</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">A Place Where I Write Things.</p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-home fa-fw"></i><br>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="menu-item-icon fa fa-th fa-fw"></i><br>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="menu-item-icon fa fa-tags fa-fw"></i><br>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives" rel="section"><i class="menu-item-icon fa fa-archive fa-fw"></i><br>归档</a></li><li class="menu-item menu-item-about"><a href="/about" rel="section"><i class="menu-item-icon fa fa-user fa-fw"></i><br>关于</a></li><li class="menu-item menu-item-search"><a href="#" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup"><span class="search-icon fa fa-search"></span> <input type="text" placeholder="搜索..." id="local-search-input"><div id="local-search-result"></div><span class="popup-btn-close">close</span></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><header class="post-header"><h1 class="post-title" itemprop="name headline">Android 中 ViewPager 的使用☄</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time itemprop="dateCreated" datetime="2016-08-06T01:15:00+00:00" content="2016-08-06">2016-08-06 </time></span><span class="post-category">&nbsp; | &nbsp; <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/android/" itemprop="url" rel="index"><span itemprop="name">android</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h2 id="概述"><a href="# 概述" class="headerlink" title="概述"></a>概述</h2><blockquote><p>Layout manager that allows the user to flip left and right through pages of data. You supply an implementation of a <code>PagerAdapter</code> to generate the pages that the view shows.</p></blockquote><p>用来允许用户在含有数据的页面上左右滑动的布局管理器，需要实现 <code>PageAdapter</code> 来获取需要展示的页面信息。</p><p><img src="http://harchiko.qiniudn.com/75zqnxN.png" alt="http://harchiko.qiniudn.com/75zqnxN.png"></p><a id="more"></a><h2 id="用法"><a href="# 用法" class="headerlink" title="用法"></a>用法</h2><h3 id="Layout-ViewPager"><a href="#Layout-ViewPager" class="headerlink" title="Layout ViewPager"></a>Layout ViewPager</h3><p><code>ViewPager</code> 属于 layout， 可以被添加到 root layout 下的布局文件中。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</div><div class="line"> </div><div class="line">    <span class="tag">&lt;<span class="name">android.support.v4.view.ViewPager</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/vpPager"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">android.support.v4.view.ViewPager</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure><p>如果你想要一个如上图一样的 “指示器”，需要内部包含一个 <code>indicator view</code>叫做 <a href="http://developer.android.com/reference/android/support/v4/view/PagerTabStrip.html" target="_blank" rel="external">PagerTabStrip</a></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">android.support.v4.view.ViewPager</span></span></div><div class="line">   <span class="attr">android:id</span>=<span class="string">"@+id/vpPager"</span></div><div class="line">   <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">   <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>&gt;</div><div class="line"></div><div class="line">   <span class="tag">&lt;<span class="name">android.support.v4.view.PagerTabStrip</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/pager_header"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_gravity</span>=<span class="string">"top"</span></div><div class="line">        <span class="attr">android:paddingBottom</span>=<span class="string">"4dp"</span></div><div class="line">        <span class="attr">android:paddingTop</span>=<span class="string">"4dp"</span> /&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">android.support.v4.view.ViewPager</span>&gt;</span></div></pre></td></tr></table></figure><p>它会自动的为页面展示指示器，你也可以看下一个优化过的 page indicator <a href="http://viewpagerindicator.com/" target="_blank" rel="external">ViewPagerIndicator</a>.</p><h3 id="Define-Fragments"><a href="#Define-Fragments" class="headerlink" title="Define Fragments"></a>Define Fragments</h3><p>定义两个 Fragment : FirstFragment 和 SecondFragment，两个 Fragment 都在 layout 中包含一个 label(标签），实现如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstFragment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> </span>&#123;</div><div class="line">	<span class="comment">// Store instance variables</span></div><div class="line">	<span class="keyword">private</span> String title;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> page;</div><div class="line"></div><div class="line">	<span class="comment">// newInstance constructor for creating fragment with arguments</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> FirstFragment <span class="title">newInstance</span><span class="params">(<span class="keyword">int</span> page, String title)</span> </span>&#123;</div><div class="line">		FirstFragment fragmentFirst = <span class="keyword">new</span> FirstFragment();</div><div class="line">		Bundle args = <span class="keyword">new</span> Bundle();</div><div class="line">		args.putInt(<span class="string">"someInt"</span>, page);</div><div class="line">		args.putString(<span class="string">"someTitle"</span>, title);</div><div class="line">		fragmentFirst.setArguments(args);</div><div class="line">		<span class="keyword">return</span> fragmentFirst;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// Store instance variables based on arguments passed</span></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">		<span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">		page = getArguments().getInt(<span class="string">"someInt"</span>, <span class="number">0</span>);</div><div class="line">		title = getArguments().getString(<span class="string">"someTitle"</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="comment">// Inflate the view for the fragment based on layout XML</span></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> View <span class="title">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup container, </span></span></div><div class="line">            Bundle savedInstanceState) &#123;</div><div class="line">		View view = inflater.inflate(R.layout.fragment_first, container, <span class="keyword">false</span>);</div><div class="line">		TextView tvLabel = (TextView) view.findViewById(R.id.tvLabel);</div><div class="line">		tvLabel.setText(page + <span class="string">"--"</span> + title);</div><div class="line">		<span class="keyword">return</span> view;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="Setup-FragmentPagerAdapter"><a href="#Setup-FragmentPagerAdapter" class="headerlink" title="Setup FragmentPagerAdapter"></a>Setup FragmentPagerAdapter</h3><p>定义一个 adapter，它可以确定 pages 数量，确定哪个 fragment 来显示，定义 <a href="http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html" target="_blank" rel="external">FragmentPagerAdapter</a>:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line">	<span class="comment">// ...</span></div><div class="line">	</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPagerAdapter</span> <span class="keyword">extends</span> <span class="title">FragmentPagerAdapter</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> NUM_ITEMS = <span class="number">3</span>;</div><div class="line">		</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MyPagerAdapter</span><span class="params">(FragmentManager fragmentManager)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>(fragmentManager);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// Returns total number of pages</span></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> NUM_ITEMS;</div><div class="line">        &#125;</div><div class="line"> </div><div class="line">        <span class="comment">// Returns the fragment to display for that page</span></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> Fragment <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">            <span class="keyword">switch</span> (position) &#123;</div><div class="line">            <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">// Fragment # 0 - This will show FirstFragment</span></div><div class="line">                <span class="keyword">return</span> FirstFragment.newInstance(<span class="number">0</span>, <span class="string">"Page # 1"</span>);</div><div class="line">            <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">// Fragment # 0 - This will show FirstFragment different title</span></div><div class="line">                <span class="keyword">return</span> FirstFragment.newInstance(<span class="number">1</span>, <span class="string">"Page # 2"</span>);</div><div class="line">            <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">// Fragment # 1 - This will show SecondFragment</span></div><div class="line">                <span class="keyword">return</span> SecondFragment.newInstance(<span class="number">2</span>, <span class="string">"Page # 3"</span>);</div><div class="line">            <span class="keyword">default</span>:</div><div class="line">            	<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// Returns the page title for the top indicator</span></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> CharSequence <span class="title">getPageTitle</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        	<span class="keyword">return</span> <span class="string">"Page"</span> + position;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="Apply-the-Adapter"><a href="#Apply-the-Adapter" class="headerlink" title="Apply the Adapter"></a>Apply the Adapter</h3><p>最后，为 ViewPager 添加 adapter。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line">	FragmentPagerAdapter adapterViewPager;</div><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">		<span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">		setContentView(R.layout.activity_home);</div><div class="line">		ViewPager vpPager = (ViewPager) findViewById(R.id.vpPager);</div><div class="line">		adapterViewPager = <span class="keyword">new</span> MyPagerAdapter(getSupportFragmentManager());</div><div class="line">		vpPager.setAdapter(adapterViewPager);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure><p>现在我们有了一个具备基本功能的 <code>ViewPager</code></p><h3 id="Selecting-or-Getting-the-Page"><a href="#Selecting-or-Getting-the-Page" class="headerlink" title="Selecting or Getting the Page"></a>Selecting or Getting the Page</h3><p>可以使用 <a href="http://developer.android.com/reference/android/support/v4/view/ViewPager.html#getCurrentItem\(\" target="_blank" rel="external">getCurrentItem</a>)方法获取当前 page 的索引。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vpPager.getCurrentItem(); <span class="comment">// --&gt; 2</span></div></pre></td></tr></table></figure><p>也可以在代码中改变当前页面</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vpPager.setCurrentItem(<span class="number">2</span>)</div></pre></td></tr></table></figure><p>有了这两个，我们就可以在运行时很容易的获取和修改选定的 page</p><h3 id="Setup-OnPageChangeListener"><a href="#Setup-OnPageChangeListener" class="headerlink" title="Setup OnPageChangeListener"></a>Setup OnPageChangeListener</h3><p>如果 Activity 需要能够 listen page 的切换，我们只需要实现 <a href="http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html" target="_blank" rel="external">ViewPager.OnPageChangeListener</a> 来处理事件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Attach the page change listener inside the activity</span></div><div class="line">vpPager.addOnPageChangeListener(<span class="keyword">new</span> OnPageChangeListener() &#123;</div><div class="line">	</div><div class="line">	<span class="comment">// This method will be invoked when a new page becomes selected.</span></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageSelected</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">		Toast.makeText(HomeActivity.<span class="keyword">this</span>, </div><div class="line">                    <span class="string">"Selected page position:"</span> + position, Toast.LENGTH_SHORT).show();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">// This method will be invoked when the current page is scrolled</span></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageScrolled</span><span class="params">(<span class="keyword">int</span> position, <span class="keyword">float</span> positionOffset, <span class="keyword">int</span> positionOffsetPixels)</span> </span>&#123;</div><div class="line">		<span class="comment">// Code goes here</span></div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="comment">// Called when the scroll state changes: </span></div><div class="line">	<span class="comment">// SCROLL_STATE_IDLE, SCROLL_STATE_DRAGGING, SCROLL_STATE_SETTLING</span></div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageScrollStateChanged</span><span class="params">(<span class="keyword">int</span> state)</span> </span>&#123;</div><div class="line">		<span class="comment">// Code goes here</span></div><div class="line">	&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure><h2 id="Tabbed-Interface-with-Pager"><a href="#Tabbed-Interface-with-Pager" class="headerlink" title="Tabbed Interface with Pager"></a>Tabbed Interface with Pager</h2><p>在 2015 年的 Google I/O，谷歌推出了新的 <code>TabLayout</code> 类，使得 Tab 洁面实现更为容易。</p><p>另一个可选的实现是一个叫 PagerSlidingTabStrip(<a href="https://github.com/astuetz/PagerSlidingTabStrip" target="_blank" rel="external">https://github.com/astuetz/PagerSlidingTabStrip</a>) 的第三方库。</p><p><img src="https://i.imgur.com/a2wpJ80.png" alt="Tabs"></p><p>这样，可以使用 tab 当导航指示，同时又能使用上述的 pager 系统。</p><h2 id="Dynamic-ViewPager-Fragments"><a href="#Dynamic-ViewPager-Fragments" class="headerlink" title="Dynamic ViewPager Fragments"></a>Dynamic ViewPager Fragments</h2><p>In certain cases, we may require a dynamic <code>ViewPager</code> where we want to get access to fragment instances or with pages being added or removed at runtime. If your ViewPager is more dynamic with many pages and fragments, we will want to use an implementation of the alternate <a href="http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html" target="_blank" rel="external">FragmentStatePagerAdapter</a> instead. Below shows us how to use this and also intelligently cache the fragments for easy lookup.</p><h3 id="Setup-SmartFragmentStatePagerAdapter"><a href="#Setup-SmartFragmentStatePagerAdapter" class="headerlink" title="Setup SmartFragmentStatePagerAdapter"></a>Setup SmartFragmentStatePagerAdapter</h3><p>First, copy in the <a href="https://gist.github.com/nesquena/c715c9b22fb873b1d259" target="_blank" rel="external">SmartFragmentStatePagerAdapter.java</a> which provides the intelligent caching of registered fragments within our <code>ViewPager</code>. This solves the common problem of needing to <strong>access the current item within the ViewPager</strong>.</p><p>Now, we want to extend from <code>SmartFragmentStatePagerAdapter</code> copied above when declaring our adapter so we can take advantage of the better memory management of the state pager:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">    <span class="keyword">private</span> SmartFragmentStatePagerAdapter adapterViewPager;</div><div class="line">    </div><div class="line">    <span class="comment">// Extend from SmartFragmentStatePagerAdapter now instead for more dynamic ViewPager items</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPagerAdapter</span> <span class="keyword">extends</span> <span class="title">SmartFragmentStatePagerAdapter</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> NUM_ITEMS = <span class="number">3</span>;</div><div class="line">		</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MyPagerAdapter</span><span class="params">(FragmentManager fragmentManager)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>(fragmentManager);</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// Returns total number of pages</span></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> NUM_ITEMS;</div><div class="line">        &#125;</div><div class="line"> </div><div class="line">        <span class="comment">// Returns the fragment to display for that page</span></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> Fragment <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">            <span class="keyword">switch</span> (position) &#123;</div><div class="line">            <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">// Fragment # 0 - This will show FirstFragment</span></div><div class="line">                <span class="keyword">return</span> FirstFragment.newInstance(<span class="number">0</span>, <span class="string">"Page # 1"</span>);</div><div class="line">            <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">// Fragment # 0 - This will show FirstFragment different title</span></div><div class="line">                <span class="keyword">return</span> FirstFragment.newInstance(<span class="number">1</span>, <span class="string">"Page # 2"</span>);</div><div class="line">            <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">// Fragment # 1 - This will show SecondFragment</span></div><div class="line">                <span class="keyword">return</span> SecondFragment.newInstance(<span class="number">2</span>, <span class="string">"Page # 3"</span>);</div><div class="line">            <span class="keyword">default</span>:</div><div class="line">            	<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        <span class="comment">// Returns the page title for the top indicator</span></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> CharSequence <span class="title">getPageTitle</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        	<span class="keyword">return</span> <span class="string">"Page"</span> + position;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure><h3 id="Access-Fragment-Instances"><a href="#Access-Fragment-Instances" class="headerlink" title="Access Fragment Instances"></a>Access Fragment Instances</h3><p>Now with this adapter in place, we can also easily access any fragments within the <code>ViewPager</code> with:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">adapterViewPager.getRegisteredFragment(<span class="number">0</span>); </div><div class="line"><span class="comment">// returns first Fragment item within the pager</span></div></pre></td></tr></table></figure><p>and we can easily access the “current” pager item with:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">adapterViewPager.getRegisteredFragment(vpPager.getCurrentItem());</div><div class="line"><span class="comment">// returns current Fragment item displayed within the pager</span></div></pre></td></tr></table></figure><p>This pattern should save your app quite a deal of memory and allow for much easier management of fragments within your pager for the right situation.</p><h2 id="Set-Offscreen-Page-Limit"><a href="#Set-Offscreen-Page-Limit" class="headerlink" title="Set Offscreen Page Limit"></a>Set Offscreen Page Limit</h2><p>Alternatively, you can use the method <code>setOffscreenPageLimit(int limit)</code> provided by ViewPager to set how many page instances you want the system to keep in memory on either side of your current page. As a result, more memory will be consumed. So be careful when tweaking this setting if your pages have complex layouts.</p><p>For example, to let the system keep 3 page instances on both sides of the current page:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vpPager.setOffscreenPageLimit(<span class="number">3</span>);</div></pre></td></tr></table></figure><p>This can be useful in order to preload more fragments for a smoother viewing experience trading off with memory usage.</p><h2 id="ViewPager-with-Visible-Adjacent-Pages"><a href="#ViewPager-with-Visible-Adjacent-Pages" class="headerlink" title="ViewPager with Visible Adjacent Pages"></a>ViewPager with Visible Adjacent Pages</h2><p>If you are interested in a ViewPager with visible adjacent pages that are partially visible:</p><p><img src="http://i.stack.imgur.com/ddm1j.jpg" alt="ViewPager Adjacent"></p><p>We can do that with by tuning a few properties of our pager. First, here’s how the <code>ViewPager</code> might be defined in the XML Layout:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">android.support.v4.view.ViewPager</span></span></div><div class="line">  	<span class="attr">android:id</span>=<span class="string">"@+id/pager"</span></div><div class="line">  	<span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">  	<span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">  	<span class="attr">android:layout_height</span>=<span class="string">"0px"</span></div><div class="line">  	<span class="attr">android:paddingLeft</span>=<span class="string">"24dp"</span></div><div class="line">  	<span class="attr">android:paddingRight</span>=<span class="string">"12dp"</span></div><div class="line">  	<span class="attr">android:layout_weight</span>=<span class="string">"1"</span> /&gt;</div></pre></td></tr></table></figure><p>Next, we need to tune these properties of the pager in the containing fragment or activity:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ViewPager vpPager = (ViewPager) view.findViewById(R.id.vpPager);</div><div class="line">vpPager.setClipToPadding(<span class="keyword">false</span>);</div><div class="line">vpPager.setPageMargin(<span class="number">12</span>);</div><div class="line"><span class="comment">// Now setup the adapter as normal</span></div></pre></td></tr></table></figure><p>Finally we need to adjust the width inside the adapter:</p><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">class MyPageAdapter : FragmentStatePagerAdapter &#123;</div><div class="line">    @Override</div><div class="line">    public float getPageWidth (int position) &#123;</div><div class="line">        return 0.93f;</div><div class="line">    &#125;	</div><div class="line">    </div><div class="line">    // ...</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>For more details, you can follow these guides:</p><ul><li><a href="http://blog.neteril.org/blog/2013/10/14/android-tip-viewpager-with-protruding-children/" target="_blank" rel="external">ViewPager with Protruding Children</a></li><li><a href="http://stackoverflow.com/questions/13914609/viewpager-with-previous-and-next-page-boundaries" target="_blank" rel="external">ViewPager with Page Boundaries</a></li></ul><h2 id="Animating-the-Scroll-with-PageTransformer"><a href="#Animating-the-Scroll-with-PageTransformer" class="headerlink" title="Animating the Scroll with PageTransformer"></a>Animating the Scroll with PageTransformer</h2><p>We can customize how the pages animate as they are being swiped between using the <a href="http://developer.android.com/reference/android/support/v4/view/ViewPager.PageTransformer.html" target="_blank" rel="external">PageTransformer</a>. This transformer exists within the support library and is compatible with API 11 or greater.</p><h3 id="Using-a-Third-Party-Library"><a href="#Using-a-Third-Party-Library" class="headerlink" title="Using a Third-Party Library"></a>Using a Third-Party Library</h3><p>The easiest way to leverage transformers is to use this <a href="https://github.com/ToxicBakery/ViewPagerTransforms" target="_blank" rel="external">ViewPagerTransforms</a> library:</p><p><a href="https://github.com/ToxicBakery/ViewPagerTransforms" target="_blank" rel="external"><img src="http://i.imgur.com/qZt0ug9.gif" width="250"></a></p><p>Loading the library into <code>app/build.gradle</code> with:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">compile</span> <span class="string">'com.ToxicBakery.viewpager.transforms:view-pager-transforms:1.2.32@aar'</span></div></pre></td></tr></table></figure><p>and then using the desired effect:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Reference (or instantiate) a ViewPager instance and apply a transformer</span></div><div class="line">pager = (ViewPager) findViewById(R.id.container);</div><div class="line">pager.setAdapter(mAdapter);</div><div class="line">pager.setPageTransformer(<span class="keyword">true</span>, <span class="keyword">new</span> RotateUpTransformer());</div></pre></td></tr></table></figure><p>Other transform types include <code>AccordionTransformer</code>, <code>CubeInTransformer</code>, <code>FlipHorizontalTransformer</code>, <code>ScaleInOutTransformer</code>, <code>ZoomInTransformer</code>, and <a href="https://github.com/ToxicBakery/ViewPagerTransforms/tree/master/library/src/main/java/com/ToxicBakery/viewpager/transforms" target="_blank" rel="external">many others</a>.</p><h3 id="Developing-Custom-Transforms"><a href="#Developing-Custom-Transforms" class="headerlink" title="Developing Custom Transforms"></a>Developing Custom Transforms</h3><p>However, custom usage is pretty straightforward, just attach a PageTransformer to the ViewPager:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">vpPager.setPageTransformer(<span class="keyword">false</span>, <span class="keyword">new</span> ViewPager.PageTransformer() &#123; </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transformPage</span><span class="params">(View page, <span class="keyword">float</span> position)</span> </span>&#123;</div><div class="line">        <span class="comment">// Do our transformations to the pages here</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p>The first argument is set to true if the <strong>supplied PageTransformer requires page views to be drawn from last to first</strong> instead of first to last. The second argument is the transformer which requires defining the <code>transformPage</code> method to define the sliding page behavior.</p><p>The <code>transformPage</code> method accepts two parameters: <code>page</code> which is the particular page to be modified and <code>position</code> which indicates where a given page is located <strong>relative to the center of the screen</strong>. The page <strong>which fills the screen</strong> is at <strong>position 0</strong>. The page immediately to the right is at <strong>position 1</strong>. If the user scrolls halfway between pages one and two, page one has a position of -0.5 and page two has a position of 0.5.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">vpPager.setPageTransformer(<span class="keyword">false</span>, <span class="keyword">new</span> ViewPager.PageTransformer() &#123; </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transformPage</span><span class="params">(View page, <span class="keyword">float</span> position)</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> pageWidth = view.getWidth();</div><div class="line">        <span class="keyword">int</span> pageHeight = view.getHeight();</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (position &lt; -<span class="number">1</span>) &#123; <span class="comment">// [-Infinity,-1)</span></div><div class="line">            <span class="comment">// This page is way off-screen to the left.</span></div><div class="line">            view.setAlpha(<span class="number">0</span>);</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(position &lt;= <span class="number">1</span>)&#123; <span class="comment">// Page to the left, page centered, page to the right</span></div><div class="line">           <span class="comment">// modify page view animations here for pages in view </span></div><div class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// (1,+Infinity]</span></div><div class="line">            <span class="comment">// This page is way off-screen to the right.</span></div><div class="line">            view.setAlpha(<span class="number">0</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p>For more details, check out <a href="http://developer.android.com/training/animation/screen-slide.html#pagetransformer" target="_blank" rel="external">the official guide</a> or <a href="http://howrobotswork.wordpress.com/2013/06/27/create-viewpager-transitions-a-pagertransformer-example/" target="_blank" rel="external">this guide</a>. You can also review this cool <a href="https://stevenkideckel.wordpress.com/tag/pagetransformer/" target="_blank" rel="external">rotating page transformer effect</a> for another example.</p><h2 id="Disabling-Swipe-Events"><a href="#Disabling-Swipe-Events" class="headerlink" title="Disabling Swipe Events"></a>Disabling Swipe Events</h2><p>If we want to <strong>disable swipe in a particular direction</strong>, check out this <a href="http://stackoverflow.com/questions/19602369/how-to-disable-viewpager-from-swiping-in-one-direction/34076649#34076649" target="_blank" rel="external">custom ViewPager that swipes in only one direction</a> using a custom class extending <code>ViewPager</code> that intercepts the swipe touch events.</p><p>In certain situations your app might even want to have a <code>ViewPager</code> that allows switching pages using an indicator but that <strong>doesn’t intercept swipe events at all</strong>. This is usually because we want to have the swipe events perform another action rather than change the page.</p><p>The first step is to define a custom <code>ViewPager</code> <a href="https://gist.github.com/nesquena/898db22a38747bd9bc19" target="_blank" rel="external">subclass called LockableViewPager</a>. The class inherits from ViewPager and includes a new method called <code>setSwipeable</code> to control if swipe events are enabled or not. Copy <a href="https://gist.github.com/nesquena/898db22a38747bd9bc19" target="_blank" rel="external">this class</a> into your project. Make sure to change your layout file accordingly:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">mypackage.lockableviewpager</span></span></div><div class="line">    <span class="attr">android:id</span>=<span class="string">"@+id/photosViewPager"</span> </div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span> </div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span> /&gt;</div></pre></td></tr></table></figure><p>Now, just call <code>setSwipeable(false)</code> to disable swiping to change the page.</p><h2 id="Launching-an-Activity-with-Tab-Selected"><a href="#Launching-an-Activity-with-Tab-Selected" class="headerlink" title="Launching an Activity with Tab Selected"></a>Launching an Activity with Tab Selected</h2><p>Often when launching a tabbed activity, there needs to be a way to select a particular tab to be displayed once the activity loads. For example, an activity has three tabs with one tab being a list of created posts. After a user creates a post on a separate activity, the user needs to be returned to the main activity with the “new posts” tab displayed. This can be done through the use of intent extras and the <code>ViewPager#setCurrentItem</code> method. First, when launching the tabbed activity, we need to pass in the selected tab as an extra:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* In creation activity that wants to launch a tabbed activity */</span></div><div class="line">Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, MyTabbedActivity.class);</div><div class="line"><span class="comment">// Pass in tab to be displayed</span></div><div class="line">i.putExtra(MyTabbedActivity.SELECTED_TAB_EXTRA_KEY, MyTabbedActivity.NEW_POSTS_TAB);</div><div class="line"><span class="comment">// Start the activity</span></div><div class="line">startActivity(i);</div></pre></td></tr></table></figure><p>If the activity needs to return a result, we can also [[return this as an activity result|Using-Intents-to-Create-Flows#returning-data-result-to-parent-activity]]. Next, we can read this information from the intent within the tabbed activity:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* In tabbed activity */</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> SELECTED_TAB_EXTRA_KEY = <span class="string">"selectedTabIndex"</span>;</div><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> HOME_TAB = <span class="number">0</span>;</div><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> FAVORITES_TAB = <span class="number">1</span>;</div><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> NEW_POSTS_TAB = <span class="number">2</span>;</div><div class="line"></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">    setContentView(R.layout.main_activity);</div><div class="line">    <span class="comment">// Set the selected tab</span></div><div class="line">    setSelectedTab();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Reads selected tab from launching intent and </span></div><div class="line"><span class="comment">// sets page accordingly</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSelectedTab</span><span class="params">()</span> </span>&#123;</div><div class="line">   <span class="comment">// Fetch the selected tab index with default</span></div><div class="line">   <span class="keyword">int</span> selectedTabIndex = getIntent().getIntExtra(SELECTED_TAB_EXTRA_KEY, HOME_TAB); </div><div class="line">   <span class="comment">// Switch to page based on index</span></div><div class="line">   vpPager.setCurrentItem(selectedTabIndex);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>With that, any activity can launch the tabbed activity with the ability to configure the selected tab.</p><h2 id="Custom-Pages-without-Fragments"><a href="#Custom-Pages-without-Fragments" class="headerlink" title="Custom Pages without Fragments"></a>Custom Pages without Fragments</h2><p>While a <code>ViewPager</code> is often coupled with a <code>Fragment</code> for each page using the <code>FragmentPagerAdapter</code>, there are cases where the pages are better off as plain views.</p><p><img src="http://i.imgur.com/VaCvAm5.png" width="200"></p><p>A good example is an image gallery, where the user can swipe between different pictures. To achieve this, we can extend from <code>PagerAdapter</code>:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Custom pager adapter not using fragments</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomPagerAdapter</span> <span class="keyword">extends</span> <span class="title">PagerAdapter</span> </span>&#123;</div><div class="line"> </div><div class="line">    Context mContext;</div><div class="line">    LayoutInflater mLayoutInflater;</div><div class="line">    ArrayList&lt;Page&gt; pages = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomPagerAdapter</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        mContext = context;</div><div class="line">        mLayoutInflater = LayoutInflater.from(mContext);</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">// Returns the number of pages to be displayed in the ViewPager.</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> pages.size();</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">// Returns true if a particular object (page) is from a particular page</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isViewFromObject</span><span class="params">(View view, Object object)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> view == object;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">// This method should create the page for the given position passed to it as an argument. </span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">instantiateItem</span><span class="params">(ViewGroup container, <span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">        <span class="comment">// Inflate the layout for the page</span></div><div class="line">        View itemView = mLayoutInflater.inflate(R.layout.pager_item, container, <span class="keyword">false</span>);</div><div class="line">        <span class="comment">// Find and populate data into the page (i.e set the image)</span></div><div class="line">        ImageView imageView = (ImageView) itemView.findViewById(R.id.imageView);</div><div class="line">        <span class="comment">// ...</span></div><div class="line">        <span class="comment">// Add the page to the container</span></div><div class="line">        container.addView(itemView);</div><div class="line">        <span class="comment">// Return the page</span></div><div class="line">        <span class="keyword">return</span> itemView;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="comment">// Removes the page from the container for the given position.</span></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroyItem</span><span class="params">(ViewGroup container, <span class="keyword">int</span> position, Object object)</span> </span>&#123;</div><div class="line">        container.removeView((View) object);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>This is most commonly used for image slideshows or galleries. See <a href="http://codetheory.in/android-image-slideshow-using-viewpager-pageradapter/" target="_blank" rel="external">this image gallery tutorial</a> or this <a href="https://www.bignerdranch.com/blog/viewpager-without-fragments/" target="_blank" rel="external">viewpager without fragments</a> guide for more detailed steps.</p><h2 id="Custom-ViewPager-Indicators"><a href="#Custom-ViewPager-Indicators" class="headerlink" title="Custom ViewPager Indicators"></a>Custom ViewPager Indicators</h2><p>An “indicator” is the UI element that displays the possible pages and the current page such as “tabs”. There are a number of other custom indicators for the pager that can be helpful in various contexts.</p><p><a href="https://github.com/DavidPacioianu/InkPageIndicator" target="_blank" rel="external"><img src="http://i.imgur.com/SBxPXZZ.gif" height="600"></a><br><a href="https://github.com/chenupt/SpringIndicator" target="_blank" rel="external"><img src="http://i.imgur.com/lCMRaJX.gif" height="600"></a></p><p>A few of the most interesting ones are listed below:</p><ul><li><a href="https://github.com/chenupt/SpringIndicator" target="_blank" rel="external">Spring indicator with animated elastic selection</a>. Indicator that visually springs between pages as dragged.</li><li><a href="https://github.com/ongakuer/CircleIndicator" target="_blank" rel="external">Simple circle “dots” indicator for pages</a>. Indicator that displays the typical “dots” associated to pages.</li><li><a href="https://github.com/DavidPacioianu/InkPageIndicator" target="_blank" rel="external">Custom “Ink” dots indicator for pages</a>. Indicator that displays dots for items and uses “ink” to visualize the current page.</li></ul><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul><li><a href="http://architects.dzone.com/articles/android-tutorial-using" target="_blank" rel="external">http://architects.dzone.com/articles/android-tutorial-using</a></li><li><a href="http://developer.android.com/training/animation/screen-slide.html" target="_blank" rel="external">http://developer.android.com/training/animation/screen-slide.html</a></li><li><a href="http://developer.android.com/reference/android/support/v4/view/ViewPager.html" target="_blank" rel="external">http://developer.android.com/reference/android/support/v4/view/ViewPager.html</a></li><li><a href="http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html" target="_blank" rel="external">http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html</a></li><li><a href="http://viewpagerindicator.com/" target="_blank" rel="external">http://viewpagerindicator.com/</a></li><li><a href="http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/" target="_blank" rel="external">http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/</a></li><li><a href="http://tamsler.blogspot.com/2011/10/android-viewpager-and-fragments.html" target="_blank" rel="external">http://tamsler.blogspot.com/2011/10/android-viewpager-and-fragments.html</a></li><li><a href="http://www.truiton.com/2013/05/android-fragmentpageradapter-example/" target="_blank" rel="external">http://www.truiton.com/2013/05/android-fragmentpageradapter-example/</a></li></ul></div><div><div id="wechat_subscriber" style="display:block； padding: 10px 0;margin:20px auto;width:100%;text-align:center"><img id="wechat_subscriber_qcode" src="http://harchiko.qiniudn.com/2016-04-25%2019.20.45.jpg" alt="Alex Zhao wechat" style="width:200px;max-width:100%"><div>欢迎您扫一扫二维码，加我为好友！</div></div></div><div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/android/" rel="tag">#android</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2016/06/26/what-does-this-mean/" rel="next" title="\">/dev/null 2>&1\" 什么意思？"> <i class="fa fa-chevron-left"></i> \"> /dev/null 2>&1\" 什么意思？</a></div><div class="post-nav-prev post-nav-item"></div></div></footer></article><div class="post-spread"></div></div></div><div class="comments" id="comments"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview">站点概览</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="http://harchiko.qiniudn.com/for_the_blog_girls.png" alt="Alex Zhao"><p class="site-author-name" itemprop="name">Alex Zhao</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives"><span class="site-state-item-count">36</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories"><span class="site-state-item-count">6</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags"><span class="site-state-item-count">43</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/zhaochunqi" target="_blank" title="github"><i class="fa fa-globe"></i> github </a></span><span class="links-of-author-item"><a href="http://weibo.com/121189047" target="_blank" title="weibo"><i class="fa fa-globe"></i> weibo</a></span></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#概述"><span class="nav-number">1.</span> <span class="nav-text">概述 </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用法"><span class="nav-number">2.</span> <span class="nav-text">用法 </span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Layout-ViewPager"><span class="nav-number">2.1.</span> <span class="nav-text">Layout ViewPager</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Define-Fragments"><span class="nav-number">2.2.</span> <span class="nav-text">Define Fragments</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Setup-FragmentPagerAdapter"><span class="nav-number">2.3.</span> <span class="nav-text">Setup FragmentPagerAdapter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Apply-the-Adapter"><span class="nav-number">2.4.</span> <span class="nav-text">Apply the Adapter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Selecting-or-Getting-the-Page"><span class="nav-number">2.5.</span> <span class="nav-text">Selecting or Getting the Page</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Setup-OnPageChangeListener"><span class="nav-number">2.6.</span> <span class="nav-text">Setup OnPageChangeListener</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tabbed-Interface-with-Pager"><span class="nav-number">3.</span> <span class="nav-text">Tabbed Interface with Pager</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dynamic-ViewPager-Fragments"><span class="nav-number">4.</span> <span class="nav-text">Dynamic ViewPager Fragments</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Setup-SmartFragmentStatePagerAdapter"><span class="nav-number">4.1.</span> <span class="nav-text">Setup SmartFragmentStatePagerAdapter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Access-Fragment-Instances"><span class="nav-number">4.2.</span> <span class="nav-text">Access Fragment Instances</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Set-Offscreen-Page-Limit"><span class="nav-number">5.</span> <span class="nav-text">Set Offscreen Page Limit</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ViewPager-with-Visible-Adjacent-Pages"><span class="nav-number">6.</span> <span class="nav-text">ViewPager with Visible Adjacent Pages</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Animating-the-Scroll-with-PageTransformer"><span class="nav-number">7.</span> <span class="nav-text">Animating the Scroll with PageTransformer</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Using-a-Third-Party-Library"><span class="nav-number">7.1.</span> <span class="nav-text">Using a Third-Party Library</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Developing-Custom-Transforms"><span class="nav-number">7.2.</span> <span class="nav-text">Developing Custom Transforms</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Disabling-Swipe-Events"><span class="nav-number">8.</span> <span class="nav-text">Disabling Swipe Events</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Launching-an-Activity-with-Tab-Selected"><span class="nav-number">9.</span> <span class="nav-text">Launching an Activity with Tab Selected</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Custom-Pages-without-Fragments"><span class="nav-number">10.</span> <span class="nav-text">Custom Pages without Fragments</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Custom-ViewPager-Indicators"><span class="nav-number">11.</span> <span class="nav-text">Custom ViewPager Indicators</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#References"><span class="nav-number">12.</span> <span class="nav-text">References</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2015 - <span itemprop="copyrightYear">2016</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Alex Zhao</span></div><div class="powered-by">由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动</div><div class="theme-info">主题 - <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.3/jquery.min.js"></script><script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="http://apps.bdimg.com/libs/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="popoverlay">').css("overflow","hidden"),$(".popup").toggle()}var isfetched=!1,search_path="search.xml";0==search_path.length&&(search_path="search.xml");var path="/"+search_path,searchFunc=function(e,t,a){"use strict";$.ajax({url:e,dataType:"xml",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var r=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),c=document.getElementById(t),s=document.getElementById(a);c.addEventListener("input",function(){var e=0,t='<ul class="search-result-list">',a=this.value.trim().toLowerCase().split(/[\s\-]+/);s.innerHTML="",this.value.trim().length>1&&r.forEach(function(r){var c=!0,s=r.title.trim().toLowerCase(),n=r.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),o=r.url,i=-1,l=-1,p=-1;if(""!=s&&""!=n&&a.forEach(function(e,t){i=s.indexOf(e),l=n.indexOf(e),i<0&&l<0?c=!1:(l<0&&(l=0),0==t&&(p=l))}),c){e+=1,t+="<li><a href='"+o+"' class='search-result-title'>"+s+"</a>";var h=r.content.trim().replace(/<[^>]+>/g,"");if(p>=0){var u=p-20,d=p+80;u<0&&(u=0),0==u&&(d=50),d>h.length&&(d=h.length);var f=h.substring(u,d);a.forEach(function(e){var t=new RegExp(e,"gi");f=f.replace(t,'<b class="search-keyword">'+e+"</b>")}),t+='<p class="search-result">'+f+"...</p>"}t+="</li>"}}),t+="</ul>",0==e&&(t='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'),""==a&&(t='<div id="no-result"><i class="fa fa-search fa-5x" /></div>'),s.innerHTML=t}),proceedsearch()}})};$(".popup-trigger").mousedown(function(e){e.stopPropagation(),0==isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(function(e){$(".popup").hide(),$(".popoverlay").remove(),$("body").css("overflow","")}),$(".popup").click(function(e){e.stopPropagation()})</script></body></html>